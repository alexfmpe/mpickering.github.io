<a href="Info.hs1777724115269220094.out.html">prev</a></br><a href="failures.html">home</a></br><a href="Instances.hs1075260298824938981.out.html">next</a></br></br><pre>24c24
< -- | injectDoc(unsafeInjectRangeMin,unsafeVecRangeMinBy,<=) The returned function /does not/ do bounds checks;
---
> -- | injectDoc(unsafeInjectRangeMin,unsafeVecRangeMinBy,<=) The returned function /does not/ do bounds checks;-- | /O(n)/. @'inj' f xs@ is equivalent to @'other' (\\ x y -> f x 'cmp' f y) xs@, but is frequently much faster, fusing with the input vector and converting it directly to a @'PV.Vector' 'Int'@. The returned function /does not/ do bounds checks;
27c27
<     (a -> Int)  -- ^ injection
---
>     (a -> Int)  -- ^ injection-- ^ An order-preserving function into 'Int'. (The ordering on the elements is equivalent to @\\ x y -> f x '<=' f y@.)
33c33
< -- | injectDoc(unsafeInjectRangeMax,unsafeVecRangeMinBy,>=) The returned function /does not/ do bounds checks;
---
> -- | injectDoc(unsafeInjectRangeMax,unsafeVecRangeMinBy,>=) The returned function /does not/ do bounds checks;-- | /O(n)/. @'inj' f xs@ is equivalent to @'other' (\\ x y -> f x 'cmp' f y) xs@, but is frequently much faster, fusing with the input vector and converting it directly to a @'PV.Vector' 'Int'@. The returned function /does not/ do bounds checks;
36c36
<     (a -> Int)  -- ^ injection
---
>     (a -> Int)  -- ^ injection-- ^ An order-preserving function into 'Int'. (The ordering on the elements is equivalent to @\\ x y -> f x '<=' f y@.)
42c42
< -- | injectDoc(injectRangeMin,vecRangeMinBy,<=) The returned function /does/ do bounds checks; see 'intRangeMin' for details.
---
> -- | injectDoc(injectRangeMin,vecRangeMinBy,<=) The returned function /does/ do bounds checks; see 'intRangeMin' for details.-- | /O(n)/. @'inj' f xs@ is equivalent to @'other' (\\ x y -> f x 'cmp' f y) xs@, but is frequently much faster, fusing with the input vector and converting it directly to a @'PV.Vector' 'Int'@. The returned function /does/ do bounds checks; see 'intRangeMin' for details.
44c44
<     (a -> Int)  -- ^ injection
---
>     (a -> Int)  -- ^ injection-- ^ An order-preserving function into 'Int'. (The ordering on the elements is equivalent to @\\ x y -> f x '<=' f y@.)
50c50
< -- | injectDoc(injectRangeMax,vecRangeMinBy,>=) The returned function /does/ do bounds checks; see 'intRangeMin' for details.
---
> -- | injectDoc(injectRangeMax,vecRangeMinBy,>=) The returned function /does/ do bounds checks; see 'intRangeMin' for details.-- | /O(n)/. @'inj' f xs@ is equivalent to @'other' (\\ x y -> f x 'cmp' f y) xs@, but is frequently much faster, fusing with the input vector and converting it directly to a @'PV.Vector' 'Int'@. The returned function /does/ do bounds checks; see 'intRangeMin' for details.
52c52
<     (a -> Int)  -- ^ injection
---
>     (a -> Int)  -- ^ injection-- ^ An order-preserving function into 'Int'. (The ordering on the elements is equivalent to @\\ x y -> f x '<=' f y@.)
60a61
> 
</pre></br><h2>original</h2></br><pre>{-# LANGUAGE CPP #-}
module Data.RangeMin.Inject (
    Injective,
    unsafeInjectRangeMin,
    unsafeInjectRangeMax,
    injectRangeMin,
    injectRangeMax) where

import Data.RangeMin.Common
import Data.RangeMin.Int
import Data.RangeMin.Vector
import Data.RangeMin.Cartesian.Spec

import qualified Data.Vector.Primitive as PV
import qualified Data.Vector.Generic as G

#define injection An order-preserving function into 'Int'.  (The ordering on the elements is    \
    equivalent to @\\ x y -> f x '<=' f y@.)
#define injectDoc(inj,other,cmp)  /O(n)/.  @'inj' f xs@ is equivalent to            \
    @'other' (\\ x y -> f x 'cmp' f y) xs@, but is frequently much faster,          \
    fusing with the input vector and converting it directly to a @'PV.Vector' 'Int'@.

{-# INLINE unsafeInjectRangeMin #-}
-- | injectDoc(unsafeInjectRangeMin,unsafeVecRangeMinBy,<=) The returned function /does not/ do bounds checks;
-- see 'unsafeIntRangeMin' for details.
unsafeInjectRangeMin :: G.Vector v a =>
    (a -> Int)  -- ^ injection
    -> v a      -- ^ The input vector.
    -> RangeMin -- ^ A range-min function on the elements (under the above ordering)
            -- which runs in /O(1)/.

{-# INLINE unsafeInjectRangeMax #-}
-- | injectDoc(unsafeInjectRangeMax,unsafeVecRangeMinBy,>=) The returned function /does not/ do bounds checks;
-- see 'unsafeIntRangeMin' for details.
unsafeInjectRangeMax :: G.Vector v a =>
    (a -> Int)  -- ^ injection
    -> v a      -- ^ The input vector.
    -> RangeMin -- ^ A range-max function on the elements (under the above ordering)
            -- which runs in /O(1)/.

{-# INLINE injectRangeMin #-}
-- | injectDoc(injectRangeMin,vecRangeMinBy,<=) The returned function /does/ do bounds checks; see 'intRangeMin' for details.
injectRangeMin :: G.Vector v a =>
    (a -> Int)  -- ^ injection
    -> v a      -- ^ The input vector.
    -> RangeMin -- ^ A range-min function on the elements (under the above ordering)
            -- which runs in /O(1)/.

{-# INLINE injectRangeMax #-}
-- | injectDoc(injectRangeMax,vecRangeMinBy,>=) The returned function /does/ do bounds checks; see 'intRangeMin' for details.
injectRangeMax :: G.Vector v a =>
    (a -> Int)  -- ^ injection
    -> v a      -- ^ The input vector.
    -> RangeMin -- ^ A range-max function on the elements (under the above ordering)
            -- which runs in /O(1)/.

unsafeInjectRangeMin inject xs = unsafeIntRangeMin (G.unstream (fmap inject (G.stream xs)))
unsafeInjectRangeMax inject = unsafeInjectRangeMin (invertValue . inject)
injectRangeMin inject xs = intRangeMin (G.unstream (fmap inject (G.stream xs)))
injectRangeMax inject = injectRangeMin (invertValue . inject)
</pre></br><h2>printed</h2></br><pre>{-# LANGUAGE CPP #-}
module Data.RangeMin.Inject (
    Injective,
    unsafeInjectRangeMin,
    unsafeInjectRangeMax,
    injectRangeMin,
    injectRangeMax) where

import Data.RangeMin.Common
import Data.RangeMin.Int
import Data.RangeMin.Vector
import Data.RangeMin.Cartesian.Spec

import qualified Data.Vector.Primitive as PV
import qualified Data.Vector.Generic as G

#define injection An order-preserving function into 'Int'.  (The ordering on the elements is    \
    equivalent to @\\ x y -> f x '<=' f y@.)
#define injectDoc(inj,other,cmp)  /O(n)/.  @'inj' f xs@ is equivalent to            \
    @'other' (\\ x y -> f x 'cmp' f y) xs@, but is frequently much faster,          \
    fusing with the input vector and converting it directly to a @'PV.Vector' 'Int'@.

{-# INLINE unsafeInjectRangeMin #-}
-- | injectDoc(unsafeInjectRangeMin,unsafeVecRangeMinBy,<=) The returned function /does not/ do bounds checks;-- | /O(n)/. @'inj' f xs@ is equivalent to @'other' (\\ x y -> f x 'cmp' f y) xs@, but is frequently much faster, fusing with the input vector and converting it directly to a @'PV.Vector' 'Int'@. The returned function /does not/ do bounds checks;
-- see 'unsafeIntRangeMin' for details.
unsafeInjectRangeMin :: G.Vector v a =>
    (a -> Int)  -- ^ injection-- ^ An order-preserving function into 'Int'. (The ordering on the elements is equivalent to @\\ x y -> f x '<=' f y@.)
    -> v a      -- ^ The input vector.
    -> RangeMin -- ^ A range-min function on the elements (under the above ordering)
            -- which runs in /O(1)/.

{-# INLINE unsafeInjectRangeMax #-}
-- | injectDoc(unsafeInjectRangeMax,unsafeVecRangeMinBy,>=) The returned function /does not/ do bounds checks;-- | /O(n)/. @'inj' f xs@ is equivalent to @'other' (\\ x y -> f x 'cmp' f y) xs@, but is frequently much faster, fusing with the input vector and converting it directly to a @'PV.Vector' 'Int'@. The returned function /does not/ do bounds checks;
-- see 'unsafeIntRangeMin' for details.
unsafeInjectRangeMax :: G.Vector v a =>
    (a -> Int)  -- ^ injection-- ^ An order-preserving function into 'Int'. (The ordering on the elements is equivalent to @\\ x y -> f x '<=' f y@.)
    -> v a      -- ^ The input vector.
    -> RangeMin -- ^ A range-max function on the elements (under the above ordering)
            -- which runs in /O(1)/.

{-# INLINE injectRangeMin #-}
-- | injectDoc(injectRangeMin,vecRangeMinBy,<=) The returned function /does/ do bounds checks; see 'intRangeMin' for details.-- | /O(n)/. @'inj' f xs@ is equivalent to @'other' (\\ x y -> f x 'cmp' f y) xs@, but is frequently much faster, fusing with the input vector and converting it directly to a @'PV.Vector' 'Int'@. The returned function /does/ do bounds checks; see 'intRangeMin' for details.
injectRangeMin :: G.Vector v a =>
    (a -> Int)  -- ^ injection-- ^ An order-preserving function into 'Int'. (The ordering on the elements is equivalent to @\\ x y -> f x '<=' f y@.)
    -> v a      -- ^ The input vector.
    -> RangeMin -- ^ A range-min function on the elements (under the above ordering)
            -- which runs in /O(1)/.

{-# INLINE injectRangeMax #-}
-- | injectDoc(injectRangeMax,vecRangeMinBy,>=) The returned function /does/ do bounds checks; see 'intRangeMin' for details.-- | /O(n)/. @'inj' f xs@ is equivalent to @'other' (\\ x y -> f x 'cmp' f y) xs@, but is frequently much faster, fusing with the input vector and converting it directly to a @'PV.Vector' 'Int'@. The returned function /does/ do bounds checks; see 'intRangeMin' for details.
injectRangeMax :: G.Vector v a =>
    (a -> Int)  -- ^ injection-- ^ An order-preserving function into 'Int'. (The ordering on the elements is equivalent to @\\ x y -> f x '<=' f y@.)
    -> v a      -- ^ The input vector.
    -> RangeMin -- ^ A range-max function on the elements (under the above ordering)
            -- which runs in /O(1)/.

unsafeInjectRangeMin inject xs = unsafeIntRangeMin (G.unstream (fmap inject (G.stream xs)))
unsafeInjectRangeMax inject = unsafeInjectRangeMin (invertValue . inject)
injectRangeMin inject xs = intRangeMin (G.unstream (fmap inject (G.stream xs)))
injectRangeMax inject = injectRangeMin (invertValue . inject)

</pre>