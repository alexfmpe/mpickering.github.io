<a href="Misc.hs8102788901163498603.out.html">prev</a></br><a href="failures.html">home</a></br><a href="mkReadme.hs17035688271629293585.out.html">next</a></br></br><pre>35c35
< (f1 <@> f2) super this = f1 (f2 super this) this
---
>     <@>     f2  super this = f1 (f2 super this) this
60a61
> 
</pre></br><h2>original</h2></br><pre>-- | Module with basic infrastructure for function inheritance
--   based on open rercusion.
--
--   See the work of William Cook.
--
--   We use the following terminology.
--
--     * A /closed/ function is an ordinary function.
--
--     * A /mixin/ function is an open function that can be
--       inherited from, or that extends another open function.
--
--   We obtain a closed function from a base mixin 'base'
--   and a number of mixin extensions 'e1',...,'en' as follows:
--
-- >  mixin (en <@> ... <@> e1 <@> base)
--
module Control.Mixin.Mixin (
  Mixin,
  (<@>),
  mixin,
  mixinId,
  mixinLift
) where

infixl 5 <@>

-- | Type of mixin functions.
type Mixin a =  a -- the 'super' function
         -> a -- the 'this'  function
         -> a -- the current function

-- | Mixin composition.
(<@>) :: Mixin a -> Mixin a -> Mixin a
(f1 <@> f2) super this = f1 (f2 super this) this

-- | Turn a mixin into a closed function.
mixin :: Mixin a -> a
mixin openF
  = let closedF = openF errorF closedF
        errorF  = error $ "super called in base mixin"
    in closedF

-- | Mixin identity function.
--
-- Identity for mixin composition:
--
--
-- > mixinId <@> f  ==  f
-- > f <@> mixinId  ==  f
--
mixinId :: Mixin a
mixinId super this = super

-- | Mixin lift function
--
-- > mixin . mixinLift = id

mixinLift :: (a -> b) -> Mixin (a -> b)
mixinLift f _ _ = f
</pre></br><h2>printed</h2></br><pre>-- | Module with basic infrastructure for function inheritance
--   based on open rercusion.
--
--   See the work of William Cook.
--
--   We use the following terminology.
--
--     * A /closed/ function is an ordinary function.
--
--     * A /mixin/ function is an open function that can be
--       inherited from, or that extends another open function.
--
--   We obtain a closed function from a base mixin 'base'
--   and a number of mixin extensions 'e1',...,'en' as follows:
--
-- >  mixin (en <@> ... <@> e1 <@> base)
--
module Control.Mixin.Mixin (
  Mixin,
  (<@>),
  mixin,
  mixinId,
  mixinLift
) where

infixl 5 <@>

-- | Type of mixin functions.
type Mixin a =  a -- the 'super' function
         -> a -- the 'this'  function
         -> a -- the current function

-- | Mixin composition.
(<@>) :: Mixin a -> Mixin a -> Mixin a
    <@>     f2  super this = f1 (f2 super this) this

-- | Turn a mixin into a closed function.
mixin :: Mixin a -> a
mixin openF
  = let closedF = openF errorF closedF
        errorF  = error $ "super called in base mixin"
    in closedF

-- | Mixin identity function.
--
-- Identity for mixin composition:
--
--
-- > mixinId <@> f  ==  f
-- > f <@> mixinId  ==  f
--
mixinId :: Mixin a
mixinId super this = super

-- | Mixin lift function
--
-- > mixin . mixinLift = id

mixinLift :: (a -> b) -> Mixin (a -> b)
mixinLift f _ _ = f

</pre>