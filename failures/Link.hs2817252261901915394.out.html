<a href="Link.hs20516216091606946231.out.html">prev</a></br><a href="failures.html">home</a></br><a href="Links.hs1622650073984943658.out.html">next</a></br></br><pre>12c12
< {-# LINE 37 "src/ehc/EHC/CompilePhase/Link.chs" #-}
---
> 
12a13
> 
12a14
> 
12a15
> 
12a16
> 
12a17
> 
12a18
> 
12a19
> 
12a20
> 
12a21
> 
12a22
> 
12a23
> 
12a24
> 
12a25
> 
12a26
> 
12a27
> 
12a28
> 
12a29
> 
12a30
> 
12a31
> 
12a32
> 
12a33
> 
12a34
> 
12a35
> 
12a36
> 
27a52
> 
</pre></br><h2>original</h2></br><pre>module UHC.Light.Compiler.EHC.CompilePhase.Link
( cpLinkO )
where
import UHC.Light.Compiler.EHC.Common
import UHC.Light.Compiler.EHC.CompileUnit
import UHC.Light.Compiler.EHC.CompileRun
import Control.Monad.State
import qualified UHC.Light.Compiler.Config as Cfg
import UHC.Light.Compiler.EHC.Environment
import UHC.Light.Compiler.Base.Target

{-# LINE 37 "src/ehc/EHC/CompilePhase/Link.chs" #-}
cpLinkO :: EHCCompileRunner m => [HsName] -> String -> EHCompilePhaseT m ()
cpLinkO modNmL pkgNm
  = do { cr <- get
       ; let (crsi,opts) = crBaseInfo' cr
             codeFiles   = [ fpathToStr o | m <- modNmL, o <- ecuGenCodeFiles $ crCU m cr ]
             (libFile,_) = mkInOrOutputFPathDirFor OutputFor_Pkg opts l l (fpathSuff l)
                         where l = mkFPath $ Cfg.mkCLibFilename "" pkgNm
             linkCode    = map mkShellCmd $ Cfg.mkShellCmdLibtool (fpathToStr libFile) codeFiles
       ; when (ehcOptVerbosity opts >= VerboseALot)
              (do { liftIO $ mapM_ (putStrLn . showShellCmd) linkCode
                  })
       ; unless (null codeFiles)
                (cpSeq [ cpSystem c | c <- linkCode ])
       }

</pre></br><h2>printed</h2></br><pre>module UHC.Light.Compiler.EHC.CompilePhase.Link
( cpLinkO )
where
import UHC.Light.Compiler.EHC.Common
import UHC.Light.Compiler.EHC.CompileUnit
import UHC.Light.Compiler.EHC.CompileRun
import Control.Monad.State
import qualified UHC.Light.Compiler.Config as Cfg
import UHC.Light.Compiler.EHC.Environment
import UHC.Light.Compiler.Base.Target


























cpLinkO :: EHCCompileRunner m => [HsName] -> String -> EHCompilePhaseT m ()
cpLinkO modNmL pkgNm
  = do { cr <- get
       ; let (crsi,opts) = crBaseInfo' cr
             codeFiles   = [ fpathToStr o | m <- modNmL, o <- ecuGenCodeFiles $ crCU m cr ]
             (libFile,_) = mkInOrOutputFPathDirFor OutputFor_Pkg opts l l (fpathSuff l)
                         where l = mkFPath $ Cfg.mkCLibFilename "" pkgNm
             linkCode    = map mkShellCmd $ Cfg.mkShellCmdLibtool (fpathToStr libFile) codeFiles
       ; when (ehcOptVerbosity opts >= VerboseALot)
              (do { liftIO $ mapM_ (putStrLn . showShellCmd) linkCode
                  })
       ; unless (null codeFiles)
                (cpSeq [ cpSystem c | c <- linkCode ])
       }


</pre>