<a href="Example1.hs1897741295910819821.out.html">prev</a></br><a href="failures.html">home</a></br><a href="Examples.hs8852957311398644501.out.html">next</a></br></br><pre>15c15
< fc, gc :: Cascade '[String, Int, Double, Double]
---
> fc, gc :: Cascade  '[String, Int, Double, Double]
24c24
< mc, nc :: CascadeM IO '[ String, (), String, String, () ]
---
> mc, nc :: CascadeM IO  '[ String, (), String, String, () ]
35c35
< wc, vc :: CascadeW ((,) Char) '[ Int, Char, Int, String ]
---
> wc, vc :: CascadeW ((,) Char)  '[ Int, Char, Int, String ]
44c44
< rundmc :: IO (DebuggerM IO '[String, String, (), [Char]] () '[])
---
> rundmc :: IO (DebuggerM IO  '[String, String, (), [Char]] ()    )
50a51
> 
</pre></br><h2>original</h2></br><pre>{-# LANGUAGE DataKinds              #-}
{-# LANGUAGE GADTs                  #-}
module Cascade.Examples where

import Cascade
import Cascade.Debugger

import Control.Category
import Control.Monad
import Data.Char (toUpper)
import Prelude hiding (id, (.))
import System.Environment (getEnv, setEnv, getProgName)

-- example funcitonal cascades
fc, gc :: Cascade '[String, Int, Double, Double]
fc =  read          :>>>
      fromIntegral  :>>>
      (1/)          :>>> Done
gc =  length        :>>>
      (2^)          :>>>
      negate        :>>> Done

-- some example monadic cascades
mc, nc :: CascadeM IO '[ String, (), String, String, () ]
mc =  putStr                  >=>:
      const getLine           >=>:
      return . map toUpper    >=>:
      putStrLn                >=>: Done
nc =  setEnv "foo"            >=>:
      const (return "foo")    >=>:
      getEnv                  >=>:
      print . length          >=>: Done

-- some example comonadic cascades
wc, vc :: CascadeW ((,) Char) '[ Int, Char, Int, String ]
wc =  fst                       =>=:
      fromEnum . snd            =>=:
      uncurry (flip replicate)  =>=: Done
vc =  toEnum . snd              =>=:
      const 5                   =>=:
      show                      =>=: Done

-- run the debugger for the mc cascade all the way to the end
rundmc :: IO (DebuggerM IO '[String, String, (), [Char]] () '[])
rundmc = debugM >>> use "walk this way\n> " >=> step >=> step >=> step $ mc

-- alternate using functions from one cascade then the other
zigzag :: CascadeC c ts -> CascadeC c ts -> CascadeC c ts
zigzag Done Done = Done
zigzag (f :>>> fc) (_ :>>> gc) = f :>>> zigzag gc fc
</pre></br><h2>printed</h2></br><pre>{-# LANGUAGE DataKinds              #-}
{-# LANGUAGE GADTs                  #-}
module Cascade.Examples where

import Cascade
import Cascade.Debugger

import Control.Category
import Control.Monad
import Data.Char (toUpper)
import Prelude hiding (id, (.))
import System.Environment (getEnv, setEnv, getProgName)

-- example funcitonal cascades
fc, gc :: Cascade  '[String, Int, Double, Double]
fc =  read          :>>>
      fromIntegral  :>>>
      (1/)          :>>> Done
gc =  length        :>>>
      (2^)          :>>>
      negate        :>>> Done

-- some example monadic cascades
mc, nc :: CascadeM IO  '[ String, (), String, String, () ]
mc =  putStr                  >=>:
      const getLine           >=>:
      return . map toUpper    >=>:
      putStrLn                >=>: Done
nc =  setEnv "foo"            >=>:
      const (return "foo")    >=>:
      getEnv                  >=>:
      print . length          >=>: Done

-- some example comonadic cascades
wc, vc :: CascadeW ((,) Char)  '[ Int, Char, Int, String ]
wc =  fst                       =>=:
      fromEnum . snd            =>=:
      uncurry (flip replicate)  =>=: Done
vc =  toEnum . snd              =>=:
      const 5                   =>=:
      show                      =>=: Done

-- run the debugger for the mc cascade all the way to the end
rundmc :: IO (DebuggerM IO  '[String, String, (), [Char]] ()    )
rundmc = debugM >>> use "walk this way\n> " >=> step >=> step >=> step $ mc

-- alternate using functions from one cascade then the other
zigzag :: CascadeC c ts -> CascadeC c ts -> CascadeC c ts
zigzag Done Done = Done
zigzag (f :>>> fc) (_ :>>> gc) = f :>>> zigzag gc fc

</pre>