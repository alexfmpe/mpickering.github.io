<a href="eddie.hs1580723810704877633.out.html">prev</a></br><a href="failures.html">home</a></br><a href="Equality.hs2128236579784558821.out.html">next</a></br></br><pre>1d0
< #!/usr/bin/env runhaskell
2a2
> 
37a38
> 
</pre></br><h2>original</h2></br><pre>#!/usr/bin/env runhaskell

-- | This little example program shows how to use libnotify action
-- callback together with glib MainLoop thing so they actually work

import Control.Applicative ((<$))
import Control.Concurrent (threadDelay)
import Libnotify
import System.Glib.MainLoop (MainLoop, mainLoopNew, mainLoopRun, mainLoopQuit)

main :: IO ()
main = () <$ do
  l <- mainLoopNew Nothing False
  display $
       summary "Hello!"
    <> body "Please, say \"blop\"!"
    <> icon "face-embarrassed"
    <> timeout Infinite
    <> action "blob" "Say \"blop\"" blopCallback
    <> action "flop" "Say \"flop\"" (flopCallback l)
  mainLoopRun l

blopCallback :: Notification -> t -> IO Notification
blopCallback n _ = do
  close n
  putStrLn "Thanks!"
  threadDelay second
  display (reuse n <> summary "" <> body "Pretty please, say \"blop\"!")

flopCallback :: MainLoop -> Notification -> t -> IO ()
flopCallback l n _ = do
  close n
  putStrLn "Pfft.."
  mainLoopQuit l

second :: Int
second = 1000000
</pre></br><h2>printed</h2></br><pre>

-- | This little example program shows how to use libnotify action
-- callback together with glib MainLoop thing so they actually work

import Control.Applicative ((<$))
import Control.Concurrent (threadDelay)
import Libnotify
import System.Glib.MainLoop (MainLoop, mainLoopNew, mainLoopRun, mainLoopQuit)

main :: IO ()
main = () <$ do
  l <- mainLoopNew Nothing False
  display $
       summary "Hello!"
    <> body "Please, say \"blop\"!"
    <> icon "face-embarrassed"
    <> timeout Infinite
    <> action "blob" "Say \"blop\"" blopCallback
    <> action "flop" "Say \"flop\"" (flopCallback l)
  mainLoopRun l

blopCallback :: Notification -> t -> IO Notification
blopCallback n _ = do
  close n
  putStrLn "Thanks!"
  threadDelay second
  display (reuse n <> summary "" <> body "Pretty please, say \"blop\"!")

flopCallback :: MainLoop -> Notification -> t -> IO ()
flopCallback l n _ = do
  close n
  putStrLn "Pfft.."
  mainLoopQuit l

second :: Int
second = 1000000

</pre>