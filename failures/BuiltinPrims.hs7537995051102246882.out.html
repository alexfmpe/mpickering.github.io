<a href="Builtin.hs1952509530130060903.out.html">prev</a></br><a href="failures.html">home</a></br><a href="BuiltinSizeInfo.hs12694067521816731566.out.html">next</a></br></br><pre>15c15
< {-# LINE 28 "src/ehc/CodeGen/BuiltinPrims.chs" #-}
---
> 
15a16
> 
15a17
> 
15a18
> 
15a19
> 
15a20
> 
15a21
> 
15a22
> 
15a23
> 
15a24
> 
15a25
> 
15a26
> 
15a27
> 
25c37
< {-# LINE 43 "src/ehc/CodeGen/BuiltinPrims.chs" #-}
---
> 
25a38
> 
25a39
> 
25a40
> 
25a41
> 
25a42
> 
39a57
> 
</pre></br><h2>original</h2></br><pre>module UHC.Light.Compiler.CodeGen.BuiltinPrims
( PrimitiveNeedsEval (..), lookupPrimNeedsEval )
where
import UHC.Light.Compiler.Base.HsName
import UHC.Light.Compiler.Base.Common
import UHC.Light.Compiler.Opts
import UHC.Light.Compiler.CodeGen.BasicAnnot
import UHC.Light.Compiler.Base.HsName.Builtin
import qualified Data.Map as Map
import qualified UHC.Util.FastSeq as Seq
import UHC.Util.Pretty
import UHC.Util.Utils


{-# LINE 28 "src/ehc/CodeGen/BuiltinPrims.chs" #-}
data PrimitiveNeedsEval
  = Prim
      { primArgNeedEval     :: ![Bool]          -- default: True
      , primResNeedEval     :: ! Bool           -- default: False
      }

lookupPrimNeedsEval :: {- Backend -> -} String -> Maybe PrimitiveNeedsEval
lookupPrimNeedsEval {- backend -} name =  Map.lookup name primsNeedsEval {- >>= Map.lookup backend -}

{-# LINE 43 "src/ehc/CodeGen/BuiltinPrims.chs" #-}
primsNeedsEval :: Map.Map String ({- Map.Map Backend -} PrimitiveNeedsEval)
primsNeedsEval
  = Map.fromList
      [
        ( "primCatchException"  , Prim [False,False]        False )
      , ( "primThrowException"  , Prim [False]              False )
      , ( "primNewArray"        , Prim [True,False]         False )
      , ( "primIndexArray"      , Prim [True,True]          True  )
      , ( "primWriteArray"      , Prim [True,True,False]    False )
      -- , ( "primReadMutVar"       , Prim [True,True]          True  )
      , ( "primNewMutVar"       , Prim [False,True]         False )
      , ( "primWriteMutVar"     , Prim [True,False,True]    False )
      ]

</pre></br><h2>printed</h2></br><pre>module UHC.Light.Compiler.CodeGen.BuiltinPrims
( PrimitiveNeedsEval (..), lookupPrimNeedsEval )
where
import UHC.Light.Compiler.Base.HsName
import UHC.Light.Compiler.Base.Common
import UHC.Light.Compiler.Opts
import UHC.Light.Compiler.CodeGen.BasicAnnot
import UHC.Light.Compiler.Base.HsName.Builtin
import qualified Data.Map as Map
import qualified UHC.Util.FastSeq as Seq
import UHC.Util.Pretty
import UHC.Util.Utils















data PrimitiveNeedsEval
  = Prim
      { primArgNeedEval     :: ![Bool]          -- default: True
      , primResNeedEval     :: ! Bool           -- default: False
      }

lookupPrimNeedsEval :: {- Backend -> -} String -> Maybe PrimitiveNeedsEval
lookupPrimNeedsEval {- backend -} name =  Map.lookup name primsNeedsEval {- >>= Map.lookup backend -}







primsNeedsEval :: Map.Map String ({- Map.Map Backend -} PrimitiveNeedsEval)
primsNeedsEval
  = Map.fromList
      [
        ( "primCatchException"  , Prim [False,False]        False )
      , ( "primThrowException"  , Prim [False]              False )
      , ( "primNewArray"        , Prim [True,False]         False )
      , ( "primIndexArray"      , Prim [True,True]          True  )
      , ( "primWriteArray"      , Prim [True,True,False]    False )
      -- , ( "primReadMutVar"       , Prim [True,True]          True  )
      , ( "primNewMutVar"       , Prim [False,True]         False )
      , ( "primWriteMutVar"     , Prim [True,False,True]    False )
      ]


</pre>