<a href="Binary.hs12694067521816731566.out.html">prev</a></br><a href="failures.html">home</a></br><a href="BitIndex.hs8849367161807130337.out.html">next</a></br></br><pre>18c18
<             let arr :: CArray (Int,Int) Double = copyImageToCArray img
---
>             let arr    CArray (Int,Int) Double = copyImageToCArray img
24a25
> 
</pre></br><h2>original</h2></br><pre>-- |Binary instances for images. Currently it only supports the type
-- `Image Grayscale D32`.
{-#LANGUAGE ScopedTypeVariables, FlexibleInstances#-}
module CV.Binary where
import CV.Image (Image,GrayScale,D32)
import CV.Conversions

import Data.Maybe (fromJust)
import Data.Binary
import Data.Array.CArray
import Data.Array.IArray


-- NOTE: This binary instance is NOT PORTABLE.

instance Binary (Image GrayScale D32) where
    put img = do
            let arr :: CArray (Int,Int) Double = copyImageToCArray img
            put (bounds arr)
            put . unsafeCArrayToByteString $ arr
    get = do
            bds <- get
            get >>= return . copyCArrayToImage . fromJust . unsafeByteStringToCArray bds

</pre></br><h2>printed</h2></br><pre>-- |Binary instances for images. Currently it only supports the type
-- `Image Grayscale D32`.
{-#LANGUAGE ScopedTypeVariables, FlexibleInstances#-}
module CV.Binary where
import CV.Image (Image,GrayScale,D32)
import CV.Conversions

import Data.Maybe (fromJust)
import Data.Binary
import Data.Array.CArray
import Data.Array.IArray


-- NOTE: This binary instance is NOT PORTABLE.

instance Binary (Image GrayScale D32) where
    put img = do
            let arr    CArray (Int,Int) Double = copyImageToCArray img
            put (bounds arr)
            put . unsafeCArrayToByteString $ arr
    get = do
            bds <- get
            get >>= return . copyCArrayToImage . fromJust . unsafeByteStringToCArray bds


</pre>