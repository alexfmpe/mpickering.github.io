<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-comment">{-
(c) The University of Glasgow 2006
(c) The GRASP/AQUA Project, Glasgow University, 1992-1998


Type checking of type signatures in interface files
-}</span><span>
</span><a name="line-8"></a><span>
</span><a name="line-9"></a><span class="hs-pragma">{-# LANGUAGE CPP #-}</span><span>
</span><a name="line-10"></a><span>
</span><a name="line-11"></a><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">TcIface</span><span> </span><span class="hs-special">(</span><span>
</span><a name="line-12"></a><span>        </span><a href="LoadIface.html#tcLookupImported_maybe"><span class="hs-identifier hs-var">tcLookupImported_maybe</span></a><span class="hs-special">,</span><span>
</span><a name="line-13"></a><span>        </span><a href="LoadIface.html#importDecl"><span class="hs-identifier hs-var">importDecl</span></a><span class="hs-special">,</span><span> </span><a href="LoadIface.html#checkWiredInTyCon"><span class="hs-identifier hs-var">checkWiredInTyCon</span></a><span class="hs-special">,</span><span> </span><a href="TcIface.html#tcHiBootIface"><span class="hs-identifier hs-var">tcHiBootIface</span></a><span class="hs-special">,</span><span> </span><a href="TcIface.html#typecheckIface"><span class="hs-identifier hs-var">typecheckIface</span></a><span class="hs-special">,</span><span>
</span><a name="line-14"></a><span>        </span><a href="TcIface.html#tcIfaceDecl"><span class="hs-identifier hs-var">tcIfaceDecl</span></a><span class="hs-special">,</span><span> </span><a href="TcIface.html#tcIfaceInst"><span class="hs-identifier hs-var">tcIfaceInst</span></a><span class="hs-special">,</span><span> </span><a href="TcIface.html#tcIfaceFamInst"><span class="hs-identifier hs-var">tcIfaceFamInst</span></a><span class="hs-special">,</span><span> </span><a href="TcIface.html#tcIfaceRules"><span class="hs-identifier hs-var">tcIfaceRules</span></a><span class="hs-special">,</span><span>
</span><a name="line-15"></a><span>        </span><a href="TcIface.html#tcIfaceVectInfo"><span class="hs-identifier hs-var">tcIfaceVectInfo</span></a><span class="hs-special">,</span><span> </span><a href="TcIface.html#tcIfaceAnnotations"><span class="hs-identifier hs-var">tcIfaceAnnotations</span></a><span class="hs-special">,</span><span>
</span><a name="line-16"></a><span>        </span><a href="TcIface.html#tcIfaceExpr"><span class="hs-identifier hs-var">tcIfaceExpr</span></a><span class="hs-special">,</span><span>    </span><span class="hs-comment">-- Desired by HERMIT (Trac #7683)</span><span>
</span><a name="line-17"></a><span>        </span><a href="TcIface.html#tcIfaceGlobal"><span class="hs-identifier hs-var">tcIfaceGlobal</span></a><span>
</span><a name="line-18"></a><span> </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-19"></a><span>
</span><a name="line-20"></a><span class="hs-cpp">#include &quot;HsVersions.h&quot;</span><span>
</span><a name="line-21"></a><span>
</span><a name="line-22"></a><span class="hs-keyword">import</span><span> </span><a href="TcTypeNats.html"><span class="hs-identifier">TcTypeNats</span></a><span class="hs-special">(</span><a href="TcTypeNats.html#typeNatCoAxiomRules"><span class="hs-identifier hs-var">typeNatCoAxiomRules</span></a><span class="hs-special">)</span><span>
</span><a name="line-23"></a><span class="hs-keyword">import</span><span> </span><a href="IfaceSyn.html"><span class="hs-identifier">IfaceSyn</span></a><span>
</span><a name="line-24"></a><span class="hs-keyword">import</span><span> </span><a href="LoadIface.html"><span class="hs-identifier">LoadIface</span></a><span>
</span><a name="line-25"></a><span class="hs-keyword">import</span><span> </span><a href="IfaceEnv.html"><span class="hs-identifier">IfaceEnv</span></a><span>
</span><a name="line-26"></a><span class="hs-keyword">import</span><span> </span><a href="BuildTyCl.html"><span class="hs-identifier">BuildTyCl</span></a><span>
</span><a name="line-27"></a><span class="hs-keyword">import</span><span> </span><a href="TcRnMonad.html"><span class="hs-identifier">TcRnMonad</span></a><span>
</span><a name="line-28"></a><span class="hs-keyword">import</span><span> </span><a href="TcType.html"><span class="hs-identifier">TcType</span></a><span>
</span><a name="line-29"></a><span class="hs-keyword">import</span><span> </span><a href="Type.html"><span class="hs-identifier">Type</span></a><span>
</span><a name="line-30"></a><span class="hs-keyword">import</span><span> </span><a href="Coercion.html"><span class="hs-identifier">Coercion</span></a><span>
</span><a name="line-31"></a><span class="hs-keyword">import</span><span> </span><a href="CoAxiom.html"><span class="hs-identifier">CoAxiom</span></a><span>
</span><a name="line-32"></a><span class="hs-keyword">import</span><span> </span><a href="TyCoRep.html"><span class="hs-identifier">TyCoRep</span></a><span>    </span><span class="hs-comment">-- needs to build types &amp; coercions in a knot</span><span>
</span><a name="line-33"></a><span class="hs-keyword">import</span><span> </span><a href="HscTypes.html"><span class="hs-identifier">HscTypes</span></a><span>
</span><a name="line-34"></a><span class="hs-keyword">import</span><span> </span><a href="Annotations.html"><span class="hs-identifier">Annotations</span></a><span>
</span><a name="line-35"></a><span class="hs-keyword">import</span><span> </span><a href="InstEnv.html"><span class="hs-identifier">InstEnv</span></a><span>
</span><a name="line-36"></a><span class="hs-keyword">import</span><span> </span><a href="FamInstEnv.html"><span class="hs-identifier">FamInstEnv</span></a><span>
</span><a name="line-37"></a><span class="hs-keyword">import</span><span> </span><a href="CoreSyn.html"><span class="hs-identifier">CoreSyn</span></a><span>
</span><a name="line-38"></a><span class="hs-keyword">import</span><span> </span><a href="CoreUtils.html"><span class="hs-identifier">CoreUtils</span></a><span>
</span><a name="line-39"></a><span class="hs-keyword">import</span><span> </span><a href="CoreUnfold.html"><span class="hs-identifier">CoreUnfold</span></a><span>
</span><a name="line-40"></a><span class="hs-keyword">import</span><span> </span><a href="CoreLint.html"><span class="hs-identifier">CoreLint</span></a><span>
</span><a name="line-41"></a><span class="hs-keyword">import</span><span> </span><a href="MkCore.html"><span class="hs-identifier">MkCore</span></a><span>
</span><a name="line-42"></a><span class="hs-keyword">import</span><span> </span><a href="Id.html"><span class="hs-identifier">Id</span></a><span>
</span><a name="line-43"></a><span class="hs-keyword">import</span><span> </span><a href="MkId.html"><span class="hs-identifier">MkId</span></a><span>
</span><a name="line-44"></a><span class="hs-keyword">import</span><span> </span><a href="IdInfo.html"><span class="hs-identifier">IdInfo</span></a><span>
</span><a name="line-45"></a><span class="hs-keyword">import</span><span> </span><a href="Class.html"><span class="hs-identifier">Class</span></a><span>
</span><a name="line-46"></a><span class="hs-keyword">import</span><span> </span><a href="TyCon.html"><span class="hs-identifier">TyCon</span></a><span>
</span><a name="line-47"></a><span class="hs-keyword">import</span><span> </span><a href="ConLike.html"><span class="hs-identifier">ConLike</span></a><span>
</span><a name="line-48"></a><span class="hs-keyword">import</span><span> </span><a href="DataCon.html"><span class="hs-identifier">DataCon</span></a><span>
</span><a name="line-49"></a><span class="hs-keyword">import</span><span> </span><a href="PrelNames.html"><span class="hs-identifier">PrelNames</span></a><span>
</span><a name="line-50"></a><span class="hs-keyword">import</span><span> </span><a href="TysWiredIn.html"><span class="hs-identifier">TysWiredIn</span></a><span>
</span><a name="line-51"></a><span class="hs-keyword">import</span><span> </span><a href="Literal.html"><span class="hs-identifier">Literal</span></a><span>
</span><a name="line-52"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><a href="Var.html"><span class="hs-identifier">Var</span></a><span>
</span><a name="line-53"></a><span class="hs-keyword">import</span><span> </span><a href="VarEnv.html"><span class="hs-identifier">VarEnv</span></a><span>
</span><a name="line-54"></a><span class="hs-keyword">import</span><span> </span><a href="VarSet.html"><span class="hs-identifier">VarSet</span></a><span>
</span><a name="line-55"></a><span class="hs-keyword">import</span><span> </span><a href="Name.html"><span class="hs-identifier">Name</span></a><span>
</span><a name="line-56"></a><span class="hs-keyword">import</span><span> </span><a href="NameEnv.html"><span class="hs-identifier">NameEnv</span></a><span>
</span><a name="line-57"></a><span class="hs-keyword">import</span><span> </span><a href="NameSet.html"><span class="hs-identifier">NameSet</span></a><span>
</span><a name="line-58"></a><span class="hs-keyword">import</span><span> </span><a href="OccurAnal.html"><span class="hs-identifier">OccurAnal</span></a><span>        </span><span class="hs-special">(</span><span> </span><a href="OccurAnal.html#occurAnalyseExpr"><span class="hs-identifier hs-var">occurAnalyseExpr</span></a><span> </span><span class="hs-special">)</span><span>
</span><a name="line-59"></a><span class="hs-keyword">import</span><span> </span><a href="Demand.html"><span class="hs-identifier">Demand</span></a><span>
</span><a name="line-60"></a><span class="hs-keyword">import</span><span> </span><a href="Module.html"><span class="hs-identifier">Module</span></a><span>
</span><a name="line-61"></a><span class="hs-keyword">import</span><span> </span><a href="UniqFM.html"><span class="hs-identifier">UniqFM</span></a><span>
</span><a name="line-62"></a><span class="hs-keyword">import</span><span> </span><a href="UniqSupply.html"><span class="hs-identifier">UniqSupply</span></a><span>
</span><a name="line-63"></a><span class="hs-keyword">import</span><span> </span><a href="Outputable.html"><span class="hs-identifier">Outputable</span></a><span>
</span><a name="line-64"></a><span class="hs-keyword">import</span><span> </span><a href="Maybes.html"><span class="hs-identifier">Maybes</span></a><span>
</span><a name="line-65"></a><span class="hs-keyword">import</span><span> </span><a href="SrcLoc.html"><span class="hs-identifier">SrcLoc</span></a><span>
</span><a name="line-66"></a><span class="hs-keyword">import</span><span> </span><a href="DynFlags.html"><span class="hs-identifier">DynFlags</span></a><span>
</span><a name="line-67"></a><span class="hs-keyword">import</span><span> </span><a href="Util.html"><span class="hs-identifier">Util</span></a><span>
</span><a name="line-68"></a><span class="hs-keyword">import</span><span> </span><a href="FastString.html"><span class="hs-identifier">FastString</span></a><span>
</span><a name="line-69"></a><span class="hs-keyword">import</span><span> </span><a href="BasicTypes.html"><span class="hs-identifier">BasicTypes</span></a><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span> </span><a href="BasicTypes.html#SuccessFlag"><span class="hs-identifier hs-type">SuccessFlag</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><a name="line-70"></a><span class="hs-keyword">import</span><span> </span><a href="ListSetOps.html"><span class="hs-identifier">ListSetOps</span></a><span>
</span><a name="line-71"></a><span>
</span><a name="line-72"></a><span class="hs-keyword">import</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.List.html"><span class="hs-identifier">Data</span><span class="hs-operator">.</span><span class="hs-identifier">List</span></a><span>
</span><a name="line-73"></a><span class="hs-keyword">import</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Control.Monad.html"><span class="hs-identifier">Control</span><span class="hs-operator">.</span><span class="hs-identifier">Monad</span></a><span>
</span><a name="line-74"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><a href="../containers-0.5.7.1/src/%{MODULE/./-}.html#%{NAME}/Data.Map.html"><span class="hs-identifier">Data</span><span class="hs-operator">.</span><span class="hs-identifier">Map</span></a><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">Map</span><span>
</span><a name="line-75"></a><span>
</span><a name="line-76"></a><span class="hs-comment">{-
This module takes

        IfaceDecl -&gt; TyThing
        IfaceType -&gt; Type
        etc

An IfaceDecl is populated with RdrNames, and these are not renamed to
Names before typechecking, because there should be no scope errors etc.

        -- For (b) consider: f = \$(...h....)
        -- where h is imported, and calls f via an hi-boot file.
        -- This is bad!  But it is not seen as a staging error, because h
        -- is indeed imported.  We don't want the type-checker to black-hole
        -- when simplifying and compiling the splice!
        --
        -- Simple solution: discard any unfolding that mentions a variable
        -- bound in this module (and hence not yet processed).
        -- The discarding happens when forkM finds a type error.


************************************************************************
*                                                                      *
                Type-checking a complete interface
*                                                                      *
************************************************************************

Suppose we discover we don't need to recompile.  Then we must type
check the old interface file.  This is a bit different to the
incremental type checking we do as we suck in interface files.  Instead
we do things similarly as when we are typechecking source decls: we
bring into scope the type envt for the interface all at once, using a
knot.  Remember, the decls aren't necessarily in dependency order --
and even if they were, the type decls might be mutually recursive.
-}</span><span>
</span><a name="line-111"></a><span>
</span><a name="line-112"></a><span class="hs-identifier">typecheckIface</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="HscTypes.html#ModIface"><span class="hs-identifier hs-type">ModIface</span></a><span>      </span><span class="hs-comment">-- Get the decls from here</span><span>
</span><a name="line-113"></a><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#TcRnIf"><span class="hs-identifier hs-type">TcRnIf</span></a><span> </span><a href="#local-1628087073"><span class="hs-identifier hs-type">gbl</span></a><span> </span><a href="#local-1628087074"><span class="hs-identifier hs-type">lcl</span></a><span> </span><a href="HscTypes.html#ModDetails"><span class="hs-identifier hs-type">ModDetails</span></a><span>
</span><a name="line-114"></a><a name="typecheckIface"><a href="TcIface.html#typecheckIface"><span class="hs-identifier">typecheckIface</span></a></a><span> </span><a name="local-1628087075"><a href="#local-1628087075"><span class="hs-identifier">iface</span></a></a><span>
</span><a name="line-115"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="TcRnMonad.html#initIfaceTc"><span class="hs-identifier hs-var">initIfaceTc</span></a><span> </span><a href="#local-1628087075"><span class="hs-identifier hs-var">iface</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><span class="hs-glyph">\</span><span> </span><a name="local-1628087076"><a href="#local-1628087076"><span class="hs-identifier">tc_env_var</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-116"></a><span>        </span><span class="hs-comment">-- The tc_env_var is freshly allocated, private to</span><span>
</span><a name="line-117"></a><span>        </span><span class="hs-comment">-- type-checking this particular interface</span><span>
</span><a name="line-118"></a><span>        </span><span class="hs-special">{</span><span>       </span><span class="hs-comment">-- Get the right set of decls and rules.  If we are compiling without -O</span><span>
</span><a name="line-119"></a><span>                </span><span class="hs-comment">-- we discard pragmas before typechecking, so that we don't &quot;see&quot;</span><span>
</span><a name="line-120"></a><span>                </span><span class="hs-comment">-- information that we shouldn't.  From a versioning point of view</span><span>
</span><a name="line-121"></a><span>                </span><span class="hs-comment">-- It's not actually *wrong* to do so, but in fact GHCi is unable</span><span>
</span><a name="line-122"></a><span>                </span><span class="hs-comment">-- to handle unboxed tuples, so it must not see unfoldings.</span><span>
</span><a name="line-123"></a><span>          </span><a name="local-1628087077"><a href="#local-1628087077"><span class="hs-identifier">ignore_prags</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcRnMonad.html#goptM"><span class="hs-identifier hs-var">goptM</span></a><span> </span><a href="DynFlags.html#Opt_IgnoreInterfacePragmas"><span class="hs-identifier hs-var">Opt_IgnoreInterfacePragmas</span></a><span>
</span><a name="line-124"></a><span>
</span><a name="line-125"></a><span>                </span><span class="hs-comment">-- Typecheck the decls.  This is done lazily, so that the knot-tying</span><span>
</span><a name="line-126"></a><span>                </span><span class="hs-comment">-- within this single module work out right.  In the If monad there is</span><span>
</span><a name="line-127"></a><span>                </span><span class="hs-comment">-- no global envt for the current interface; instead, the knot is tied</span><span>
</span><a name="line-128"></a><span>                </span><span class="hs-comment">-- through the if_rec_types field of IfGblEnv</span><span>
</span><a name="line-129"></a><span>        </span><span class="hs-special">;</span><span> </span><a name="local-1628087078"><a href="#local-1628087078"><span class="hs-identifier">names_w_things</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="LoadIface.html#loadDecls"><span class="hs-identifier hs-var">loadDecls</span></a><span> </span><a href="#local-1628087077"><span class="hs-identifier hs-var">ignore_prags</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier">mi_decls</span><span> </span><a href="#local-1628087075"><span class="hs-identifier hs-var">iface</span></a><span class="hs-special">)</span><span>
</span><a name="line-130"></a><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><a name="local-1628087079"><a href="#local-1628087079"><span class="hs-identifier">type_env</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="NameEnv.html#mkNameEnv"><span class="hs-identifier hs-var">mkNameEnv</span></a><span> </span><a href="#local-1628087078"><span class="hs-identifier hs-var">names_w_things</span></a><span>
</span><a name="line-131"></a><span>        </span><span class="hs-special">;</span><span> </span><a href="IOEnv.html#writeMutVar"><span class="hs-identifier hs-var">writeMutVar</span></a><span> </span><a href="#local-1628087076"><span class="hs-identifier hs-var">tc_env_var</span></a><span> </span><a href="#local-1628087079"><span class="hs-identifier hs-var">type_env</span></a><span>
</span><a name="line-132"></a><span>
</span><a name="line-133"></a><span>                </span><span class="hs-comment">-- Now do those rules, instances and annotations</span><span>
</span><a name="line-134"></a><span>        </span><span class="hs-special">;</span><span> </span><a name="local-1628087080"><a href="#local-1628087080"><span class="hs-identifier">insts</span></a></a><span>     </span><span class="hs-glyph">&lt;-</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a><span> </span><a href="TcIface.html#tcIfaceInst"><span class="hs-identifier hs-var">tcIfaceInst</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier">mi_insts</span><span> </span><a href="#local-1628087075"><span class="hs-identifier hs-var">iface</span></a><span class="hs-special">)</span><span>
</span><a name="line-135"></a><span>        </span><span class="hs-special">;</span><span> </span><a name="local-1628087081"><a href="#local-1628087081"><span class="hs-identifier">fam_insts</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a><span> </span><a href="TcIface.html#tcIfaceFamInst"><span class="hs-identifier hs-var">tcIfaceFamInst</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier">mi_fam_insts</span><span> </span><a href="#local-1628087075"><span class="hs-identifier hs-var">iface</span></a><span class="hs-special">)</span><span>
</span><a name="line-136"></a><span>        </span><span class="hs-special">;</span><span> </span><a name="local-1628087082"><a href="#local-1628087082"><span class="hs-identifier">rules</span></a></a><span>     </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tcIfaceRules"><span class="hs-identifier hs-var">tcIfaceRules</span></a><span> </span><a href="#local-1628087077"><span class="hs-identifier hs-var">ignore_prags</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier">mi_rules</span><span> </span><a href="#local-1628087075"><span class="hs-identifier hs-var">iface</span></a><span class="hs-special">)</span><span>
</span><a name="line-137"></a><span>        </span><span class="hs-special">;</span><span> </span><a name="local-1628087083"><a href="#local-1628087083"><span class="hs-identifier">anns</span></a></a><span>      </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tcIfaceAnnotations"><span class="hs-identifier hs-var">tcIfaceAnnotations</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier">mi_anns</span><span> </span><a href="#local-1628087075"><span class="hs-identifier hs-var">iface</span></a><span class="hs-special">)</span><span>
</span><a name="line-138"></a><span>
</span><a name="line-139"></a><span>                </span><span class="hs-comment">-- Vectorisation information</span><span>
</span><a name="line-140"></a><span>        </span><span class="hs-special">;</span><span> </span><a name="local-1628087084"><a href="#local-1628087084"><span class="hs-identifier">vect_info</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tcIfaceVectInfo"><span class="hs-identifier hs-var">tcIfaceVectInfo</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier">mi_module</span><span> </span><a href="#local-1628087075"><span class="hs-identifier hs-var">iface</span></a><span class="hs-special">)</span><span> </span><a href="#local-1628087079"><span class="hs-identifier hs-var">type_env</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier">mi_vect_info</span><span> </span><a href="#local-1628087075"><span class="hs-identifier hs-var">iface</span></a><span class="hs-special">)</span><span>
</span><a name="line-141"></a><span>
</span><a name="line-142"></a><span>                </span><span class="hs-comment">-- Exports</span><span>
</span><a name="line-143"></a><span>        </span><span class="hs-special">;</span><span> </span><a name="local-1628087085"><a href="#local-1628087085"><span class="hs-identifier">exports</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="IfaceEnv.html#ifaceExportNames"><span class="hs-identifier hs-var">ifaceExportNames</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier">mi_exports</span><span> </span><a href="#local-1628087075"><span class="hs-identifier hs-var">iface</span></a><span class="hs-special">)</span><span>
</span><a name="line-144"></a><span>
</span><a name="line-145"></a><span>                </span><span class="hs-comment">-- Finished</span><span>
</span><a name="line-146"></a><span>        </span><span class="hs-special">;</span><span> </span><a href="TcRnMonad.html#traceIf"><span class="hs-identifier hs-var">traceIf</span></a><span> </span><span class="hs-special">(</span><a href="Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a><span> </span><span class="hs-special">[</span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;Finished typechecking interface for&quot;</span><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier">mi_module</span><span> </span><a href="#local-1628087075"><span class="hs-identifier hs-var">iface</span></a><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><a name="line-147"></a><span>                         </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;Type envt:&quot;</span><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1628087079"><span class="hs-identifier hs-var">type_env</span></a><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><a name="line-148"></a><span>        </span><span class="hs-special">;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><a href="HscTypes.html#ModDetails"><span class="hs-identifier hs-var">ModDetails</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">md_types</span><span>     </span><span class="hs-glyph">=</span><span> </span><a href="#local-1628087079"><span class="hs-identifier hs-var">type_env</span></a><span>
</span><a name="line-149"></a><span>                              </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">md_insts</span><span>     </span><span class="hs-glyph">=</span><span> </span><a href="#local-1628087080"><span class="hs-identifier hs-var">insts</span></a><span>
</span><a name="line-150"></a><span>                              </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">md_fam_insts</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1628087081"><span class="hs-identifier hs-var">fam_insts</span></a><span>
</span><a name="line-151"></a><span>                              </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">md_rules</span><span>     </span><span class="hs-glyph">=</span><span> </span><a href="#local-1628087082"><span class="hs-identifier hs-var">rules</span></a><span>
</span><a name="line-152"></a><span>                              </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">md_anns</span><span>      </span><span class="hs-glyph">=</span><span> </span><a href="#local-1628087083"><span class="hs-identifier hs-var">anns</span></a><span>
</span><a name="line-153"></a><span>                              </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">md_vect_info</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1628087084"><span class="hs-identifier hs-var">vect_info</span></a><span>
</span><a name="line-154"></a><span>                              </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">md_exports</span><span>   </span><span class="hs-glyph">=</span><span> </span><a href="#local-1628087085"><span class="hs-identifier hs-var">exports</span></a><span>
</span><a name="line-155"></a><span>                              </span><span class="hs-special">}</span><span>
</span><a name="line-156"></a><span>    </span><span class="hs-special">}</span><span>
</span><a name="line-157"></a><span>
</span><a name="line-158"></a><span class="hs-comment">{-
************************************************************************
*                                                                      *
                Type and class declarations
*                                                                      *
************************************************************************
-}</span><span>
</span><a name="line-165"></a><span>
</span><a name="line-166"></a><span class="hs-identifier">tcHiBootIface</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="DriverPhases.html#HscSource"><span class="hs-identifier hs-type">HscSource</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Module.html#Module"><span class="hs-identifier hs-type">Module</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#TcRn"><span class="hs-identifier hs-type">TcRn</span></a><span> </span><a href="TcRnTypes.html#SelfBootInfo"><span class="hs-identifier hs-type">SelfBootInfo</span></a><span>
</span><a name="line-167"></a><span class="hs-comment">-- Load the hi-boot iface for the module being compiled,</span><span>
</span><a name="line-168"></a><span class="hs-comment">-- if it indeed exists in the transitive closure of imports</span><span>
</span><a name="line-169"></a><span class="hs-comment">-- Return the ModDetails; Nothing if no hi-boot iface</span><span>
</span><a name="line-170"></a><a name="tcHiBootIface"><a href="TcIface.html#tcHiBootIface"><span class="hs-identifier">tcHiBootIface</span></a></a><span> </span><a name="local-1628087086"><a href="#local-1628087086"><span class="hs-identifier">hsc_src</span></a></a><span> </span><a name="local-1628087087"><a href="#local-1628087087"><span class="hs-identifier">mod</span></a></a><span>
</span><a name="line-171"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a href="DriverPhases.html#HsBootFile"><span class="hs-identifier hs-var">HsBootFile</span></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="#local-1628087086"><span class="hs-identifier hs-var">hsc_src</span></a><span>            </span><span class="hs-comment">-- Already compiling a hs-boot file</span><span>
</span><a name="line-172"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><a href="TcRnTypes.html#NoSelfBoot"><span class="hs-identifier hs-var">NoSelfBoot</span></a><span>
</span><a name="line-173"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a><span>
</span><a name="line-174"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><a href="TcRnMonad.html#traceIf"><span class="hs-identifier hs-var">traceIf</span></a><span> </span><span class="hs-special">(</span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;loadHiBootInterface&quot;</span><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1628087087"><span class="hs-identifier hs-var">mod</span></a><span class="hs-special">)</span><span>
</span><a name="line-175"></a><span>
</span><a name="line-176"></a><span>        </span><span class="hs-special">;</span><span> </span><a name="local-1628087092"><a href="#local-1628087092"><span class="hs-identifier">mode</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcRnMonad.html#getGhcMode"><span class="hs-identifier hs-var">getGhcMode</span></a><span>
</span><a name="line-177"></a><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="hs-identifier hs-var">not</span><span> </span><span class="hs-special">(</span><a href="DynFlags.html#isOneShot"><span class="hs-identifier hs-var">isOneShot</span></a><span> </span><a href="#local-1628087092"><span class="hs-identifier hs-var">mode</span></a><span class="hs-special">)</span><span>
</span><a name="line-178"></a><span>                </span><span class="hs-comment">-- In --make and interactive mode, if this module has an hs-boot file</span><span>
</span><a name="line-179"></a><span>                </span><span class="hs-comment">-- we'll have compiled it already, and it'll be in the HPT</span><span>
</span><a name="line-180"></a><span>                </span><span class="hs-comment">--</span><span>
</span><a name="line-181"></a><span>                </span><span class="hs-comment">-- We check wheher the interface is a *boot* interface.</span><span>
</span><a name="line-182"></a><span>                </span><span class="hs-comment">-- It can happen (when using GHC from Visual Studio) that we</span><span>
</span><a name="line-183"></a><span>                </span><span class="hs-comment">-- compile a module in TypecheckOnly mode, with a stable,</span><span>
</span><a name="line-184"></a><span>                </span><span class="hs-comment">-- fully-populated HPT.  In that case the boot interface isn't there</span><span>
</span><a name="line-185"></a><span>                </span><span class="hs-comment">-- (it's been replaced by the mother module) so we can't check it.</span><span>
</span><a name="line-186"></a><span>                </span><span class="hs-comment">-- And that's fine, because if M's ModInfo is in the HPT, then</span><span>
</span><a name="line-187"></a><span>                </span><span class="hs-comment">-- it's been compiled once, and we don't need to check the boot iface</span><span>
</span><a name="line-188"></a><span>          </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><a name="local-1628087093"><a href="#local-1628087093"><span class="hs-identifier">hpt</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcRnMonad.html#getHpt"><span class="hs-identifier hs-var">getHpt</span></a><span>
</span><a name="line-189"></a><span>                 </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="UniqFM.html#lookupUFM"><span class="hs-identifier hs-var">lookupUFM</span></a><span> </span><a href="#local-1628087093"><span class="hs-identifier hs-var">hpt</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier">moduleName</span><span> </span><a href="#local-1628087087"><span class="hs-identifier hs-var">mod</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-190"></a><span>                      </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Just"><span class="hs-identifier hs-var">Just</span></a><span> </span><a name="local-1628087094"><a href="#local-1628087094"><span class="hs-identifier">info</span></a></a><span> </span><span class="hs-glyph">|</span><span> </span><a href="HscTypes.html#mi_boot"><span class="hs-identifier hs-var">mi_boot</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier">hm_iface</span><span> </span><a href="#local-1628087094"><span class="hs-identifier hs-var">info</span></a><span class="hs-special">)</span><span>
</span><a name="line-191"></a><span>                                </span><span class="hs-glyph">-&gt;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="TcIface.html#mkSelfBootInfo"><span class="hs-identifier hs-var">mkSelfBootInfo</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier">hm_details</span><span> </span><a href="#local-1628087094"><span class="hs-identifier hs-var">info</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-192"></a><span>                      </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><a href="TcRnTypes.html#NoSelfBoot"><span class="hs-identifier hs-var">NoSelfBoot</span></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-193"></a><span>          </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-194"></a><span>
</span><a name="line-195"></a><span>        </span><span class="hs-comment">-- OK, so we're in one-shot mode.</span><span>
</span><a name="line-196"></a><span>        </span><span class="hs-comment">-- Re #9245, we always check if there is an hi-boot interface</span><span>
</span><a name="line-197"></a><span>        </span><span class="hs-comment">-- to check consistency against, rather than just when we notice</span><span>
</span><a name="line-198"></a><span>        </span><span class="hs-comment">-- that an hi-boot is necessary due to a circular import.</span><span>
</span><a name="line-199"></a><span>        </span><span class="hs-special">{</span><span> </span><a name="local-1628087095"><a href="#local-1628087095"><span class="hs-identifier">read_result</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="LoadIface.html#findAndReadIface"><span class="hs-identifier hs-var">findAndReadIface</span></a><span>
</span><a name="line-200"></a><span>                                </span><a href="#local-1628087088"><span class="hs-identifier hs-var">need</span></a><span> </span><a href="#local-1628087087"><span class="hs-identifier hs-var">mod</span></a><span>
</span><a name="line-201"></a><span>                                </span><span class="hs-identifier hs-var">True</span><span>    </span><span class="hs-comment">-- Hi-boot file</span><span>
</span><a name="line-202"></a><span>
</span><a name="line-203"></a><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="#local-1628087095"><span class="hs-identifier hs-var">read_result</span></a><span> </span><span class="hs-keyword">of</span><span> </span><span class="hs-special">{</span><span>
</span><a name="line-204"></a><span>            </span><a href="Maybes.html#Succeeded"><span class="hs-identifier hs-var">Succeeded</span></a><span> </span><span class="hs-special">(</span><a name="local-1628087096"><a href="#local-1628087096"><span class="hs-identifier">iface</span></a></a><span class="hs-special">,</span><span> </span><a name="local-1628087097"><a href="#local-1628087097"><span class="hs-identifier">_path</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><a name="local-1628087098"><a href="#local-1628087098"><span class="hs-identifier">tc_iface</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#typecheckIface"><span class="hs-identifier hs-var">typecheckIface</span></a><span> </span><a href="#local-1628087096"><span class="hs-identifier hs-var">iface</span></a><span>
</span><a name="line-205"></a><span>                                           </span><span class="hs-special">;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="TcIface.html#mkSelfBootInfo"><span class="hs-identifier hs-var">mkSelfBootInfo</span></a><span> </span><a href="#local-1628087098"><span class="hs-identifier hs-var">tc_iface</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">;</span><span>
</span><a name="line-206"></a><span>            </span><a href="Maybes.html#Failed"><span class="hs-identifier hs-var">Failed</span></a><span> </span><a name="local-1628087099"><a href="#local-1628087099"><span class="hs-identifier">err</span></a></a><span>               </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-207"></a><span>
</span><a name="line-208"></a><span>        </span><span class="hs-comment">-- There was no hi-boot file. But if there is circularity in</span><span>
</span><a name="line-209"></a><span>        </span><span class="hs-comment">-- the module graph, there really should have been one.</span><span>
</span><a name="line-210"></a><span>        </span><span class="hs-comment">-- Since we've read all the direct imports by now,</span><span>
</span><a name="line-211"></a><span>        </span><span class="hs-comment">-- eps_is_boot will record if any of our imports mention the</span><span>
</span><a name="line-212"></a><span>        </span><span class="hs-comment">-- current module, which either means a module loop (not</span><span>
</span><a name="line-213"></a><span>        </span><span class="hs-comment">-- a SOURCE import) or that our hi-boot file has mysteriously</span><span>
</span><a name="line-214"></a><span>        </span><span class="hs-comment">-- disappeared.</span><span>
</span><a name="line-215"></a><span>    </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><a name="local-1628087100"><a href="#local-1628087100"><span class="hs-identifier">eps</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcRnMonad.html#getEps"><span class="hs-identifier hs-var">getEps</span></a><span>
</span><a name="line-216"></a><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="UniqFM.html#lookupUFM"><span class="hs-identifier hs-var">lookupUFM</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier">eps_is_boot</span><span> </span><a href="#local-1628087100"><span class="hs-identifier hs-var">eps</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">moduleName</span><span> </span><a href="#local-1628087087"><span class="hs-identifier hs-var">mod</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-217"></a><span>            </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><a href="TcRnTypes.html#NoSelfBoot"><span class="hs-identifier hs-var">NoSelfBoot</span></a><span> </span><span class="hs-comment">-- The typical case</span><span>
</span><a name="line-218"></a><span>
</span><a name="line-219"></a><span>            </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Just"><span class="hs-identifier hs-var">Just</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier">_</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">False</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnMonad.html#failWithTc"><span class="hs-identifier hs-var">failWithTc</span></a><span> </span><a href="#local-1628087089"><span class="hs-identifier hs-var">moduleLoop</span></a><span>
</span><a name="line-220"></a><span>                </span><span class="hs-comment">-- Someone below us imported us!</span><span>
</span><a name="line-221"></a><span>                </span><span class="hs-comment">-- This is a loop with no hi-boot in the way</span><span>
</span><a name="line-222"></a><span>
</span><a name="line-223"></a><span>            </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Just"><span class="hs-identifier hs-var">Just</span></a><span> </span><span class="hs-special">(</span><a name="local-1628087101"><a href="#local-1628087101"><span class="hs-identifier">_mod</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">True</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnMonad.html#failWithTc"><span class="hs-identifier hs-var">failWithTc</span></a><span> </span><span class="hs-special">(</span><a href="#local-1628087090"><span class="hs-identifier hs-var">elaborate</span></a><span> </span><a href="#local-1628087099"><span class="hs-identifier hs-var">err</span></a><span class="hs-special">)</span><span>
</span><a name="line-224"></a><span>                </span><span class="hs-comment">-- The hi-boot file has mysteriously disappeared.</span><span>
</span><a name="line-225"></a><span>    </span><span class="hs-special">}</span><span class="hs-special">}</span><span class="hs-special">}</span><span class="hs-special">}</span><span>
</span><a name="line-226"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-227"></a><span>    </span><a name="local-1628087088"><a href="#local-1628087088"><span class="hs-identifier">need</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;Need the hi-boot interface for&quot;</span><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1628087087"><span class="hs-identifier hs-var">mod</span></a><span>
</span><a name="line-228"></a><span>                 </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;to compare against the Real Thing&quot;</span><span>
</span><a name="line-229"></a><span>
</span><a name="line-230"></a><span>    </span><a name="local-1628087089"><a href="#local-1628087089"><span class="hs-identifier">moduleLoop</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;Circular imports: module&quot;</span><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a><span> </span><span class="hs-special">(</span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1628087087"><span class="hs-identifier hs-var">mod</span></a><span class="hs-special">)</span><span>
</span><a name="line-231"></a><span>                     </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;depends on itself&quot;</span><span>
</span><a name="line-232"></a><span>
</span><a name="line-233"></a><span>    </span><a name="local-1628087090"><a href="#local-1628087090"><span class="hs-identifier">elaborate</span></a></a><span> </span><a name="local-1628087091"><a href="#local-1628087091"><span class="hs-identifier">err</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a><span> </span><span class="hs-special">(</span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;Could not find hi-boot interface for&quot;</span><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span>
</span><a name="line-234"></a><span>                          </span><a href="Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a><span> </span><span class="hs-special">(</span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1628087087"><span class="hs-identifier hs-var">mod</span></a><span class="hs-special">)</span><span> </span><a href="Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a><span> </span><a href="Outputable.html#colon"><span class="hs-identifier hs-var">colon</span></a><span class="hs-special">)</span><span> </span><span class="hs-number">4</span><span> </span><a href="#local-1628087091"><span class="hs-identifier hs-var">err</span></a><span>
</span><a name="line-235"></a><span>
</span><a name="line-236"></a><span>
</span><a name="line-237"></a><span class="hs-identifier">mkSelfBootInfo</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="HscTypes.html#ModDetails"><span class="hs-identifier hs-type">ModDetails</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#SelfBootInfo"><span class="hs-identifier hs-type">SelfBootInfo</span></a><span>
</span><a name="line-238"></a><a name="mkSelfBootInfo"><a href="TcIface.html#mkSelfBootInfo"><span class="hs-identifier">mkSelfBootInfo</span></a></a><span> </span><a name="local-1628087102"><a href="#local-1628087102"><span class="hs-identifier">mds</span></a></a><span>
</span><a name="line-239"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="TcRnTypes.html#SelfBoot"><span class="hs-identifier hs-var">SelfBoot</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">sb_mds</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1628087102"><span class="hs-identifier hs-var">mds</span></a><span>
</span><a name="line-240"></a><span>             </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">sb_tcs</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="NameSet.html#mkNameSet"><span class="hs-identifier hs-var">mkNameSet</span></a><span> </span><span class="hs-special">(</span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a><span> </span><span class="hs-identifier">tyConName</span><span> </span><span class="hs-special">(</span><a href="HscTypes.html#typeEnvTyCons"><span class="hs-identifier hs-var">typeEnvTyCons</span></a><span> </span><a href="#local-1628087103"><span class="hs-identifier hs-var">iface_env</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-241"></a><span>             </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">sb_ids</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="NameSet.html#mkNameSet"><span class="hs-identifier hs-var">mkNameSet</span></a><span> </span><span class="hs-special">(</span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a><span> </span><a href="Id.html#idName"><span class="hs-identifier hs-var">idName</span></a><span> </span><span class="hs-special">(</span><a href="HscTypes.html#typeEnvIds"><span class="hs-identifier hs-var">typeEnvIds</span></a><span> </span><a href="#local-1628087103"><span class="hs-identifier hs-var">iface_env</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-242"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-243"></a><span>    </span><a name="local-1628087103"><a href="#local-1628087103"><span class="hs-identifier">iface_env</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">md_types</span><span> </span><a href="#local-1628087102"><span class="hs-identifier hs-var">mds</span></a><span>
</span><a name="line-244"></a><span>
</span><a name="line-245"></a><span class="hs-comment">{-
************************************************************************
*                                                                      *
                Type and class declarations
*                                                                      *
************************************************************************

When typechecking a data type decl, we *lazily* (via forkM) typecheck
the constructor argument types.  This is in the hope that we may never
poke on those argument types, and hence may never need to load the
interface files for types mentioned in the arg types.

E.g.
        data Foo.S = MkS Baz.T
Mabye we can get away without even loading the interface for Baz!

This is not just a performance thing.  Suppose we have
        data Foo.S = MkS Baz.T
        data Baz.T = MkT Foo.S
(in different interface files, of course).
Now, first we load and typecheck Foo.S, and add it to the type envt.
If we do explore MkS's argument, we'll load and typecheck Baz.T.
If we explore MkT's argument we'll find Foo.S already in the envt.

If we typechecked constructor args eagerly, when loading Foo.S we'd try to
typecheck the type Baz.T.  So we'd fault in Baz.T... and then need Foo.S...
which isn't done yet.

All very cunning. However, there is a rather subtle gotcha which bit
me when developing this stuff.  When we typecheck the decl for S, we
extend the type envt with S, MkS, and all its implicit Ids.  Suppose
(a bug, but it happened) that the list of implicit Ids depended in
turn on the constructor arg types.  Then the following sequence of
events takes place:
        * we build a thunk &lt;t&gt; for the constructor arg tys
        * we build a thunk for the extended type environment (depends on &lt;t&gt;)
        * we write the extended type envt into the global EPS mutvar

Now we look something up in the type envt
        * that pulls on &lt;t&gt;
        * which reads the global type envt out of the global EPS mutvar
        * but that depends in turn on &lt;t&gt;

It's subtle, because, it'd work fine if we typechecked the constructor args
eagerly -- they don't need the extended type envt.  They just get the extended
type envt by accident, because they look at it later.

What this means is that the implicitTyThings MUST NOT DEPEND on any of
the forkM stuff.
-}</span><span>
</span><a name="line-295"></a><span>
</span><a name="line-296"></a><span class="hs-identifier">tcIfaceDecl</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>     </span><span class="hs-comment">-- ^ True &lt;=&gt; discard IdInfo on IfaceId bindings</span><span>
</span><a name="line-297"></a><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><a href="IfaceSyn.html#IfaceDecl"><span class="hs-identifier hs-type">IfaceDecl</span></a><span>
</span><a name="line-298"></a><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><a href="TyCoRep.html#TyThing"><span class="hs-identifier hs-type">TyThing</span></a><span>
</span><a name="line-299"></a><a name="tcIfaceDecl"><a href="TcIface.html#tcIfaceDecl"><span class="hs-identifier">tcIfaceDecl</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="TcIface.html#tc_iface_decl"><span class="hs-identifier hs-var">tc_iface_decl</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a><span>
</span><a name="line-300"></a><span>
</span><a name="line-301"></a><span class="hs-identifier">tc_iface_decl</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a><span> </span><a href="Class.html#Class"><span class="hs-identifier hs-type">Class</span></a><span>  </span><span class="hs-comment">-- ^ For associated type/data family declarations</span><span>
</span><a name="line-302"></a><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>         </span><span class="hs-comment">-- ^ True &lt;=&gt; discard IdInfo on IfaceId bindings</span><span>
</span><a name="line-303"></a><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><a href="IfaceSyn.html#IfaceDecl"><span class="hs-identifier hs-type">IfaceDecl</span></a><span>
</span><a name="line-304"></a><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><a href="TyCoRep.html#TyThing"><span class="hs-identifier hs-type">TyThing</span></a><span>
</span><a name="line-305"></a><a name="tc_iface_decl"><a href="TcIface.html#tc_iface_decl"><span class="hs-identifier">tc_iface_decl</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-1628087104"><a href="#local-1628087104"><span class="hs-identifier">ignore_prags</span></a></a><span> </span><span class="hs-special">(</span><a href="IfaceSyn.html#IfaceId"><span class="hs-identifier hs-var">IfaceId</span></a><span> </span><span class="hs-special">{</span><span class="hs-identifier">ifName</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087105"><a href="#local-1628087105"><span class="hs-identifier">occ_name</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">ifType</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087106"><a href="#local-1628087106"><span class="hs-identifier">iface_type</span></a></a><span class="hs-special">,</span><span>
</span><a name="line-306"></a><span>                                       </span><span class="hs-identifier">ifIdDetails</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087107"><a href="#local-1628087107"><span class="hs-identifier">details</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">ifIdInfo</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087108"><a href="#local-1628087108"><span class="hs-identifier">info</span></a></a><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><a name="line-307"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><a name="local-1628087109"><a href="#local-1628087109"><span class="hs-identifier">name</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="IfaceEnv.html#lookupIfaceTop"><span class="hs-identifier hs-var">lookupIfaceTop</span></a><span> </span><a href="#local-1628087105"><span class="hs-identifier hs-var">occ_name</span></a><span>
</span><a name="line-308"></a><span>        </span><span class="hs-special">;</span><span> </span><a name="local-1628087110"><a href="#local-1628087110"><span class="hs-identifier">ty</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tcIfaceType"><span class="hs-identifier hs-var">tcIfaceType</span></a><span> </span><a href="#local-1628087106"><span class="hs-identifier hs-var">iface_type</span></a><span>
</span><a name="line-309"></a><span>        </span><span class="hs-special">;</span><span> </span><a name="local-1628087111"><a href="#local-1628087111"><span class="hs-identifier">details</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tcIdDetails"><span class="hs-identifier hs-var">tcIdDetails</span></a><span> </span><a href="#local-1628087110"><span class="hs-identifier hs-var">ty</span></a><span> </span><a href="#local-1628087107"><span class="hs-identifier hs-var">details</span></a><span>
</span><a name="line-310"></a><span>        </span><span class="hs-special">;</span><span> </span><a name="local-1628087112"><a href="#local-1628087112"><span class="hs-identifier">info</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tcIdInfo"><span class="hs-identifier hs-var">tcIdInfo</span></a><span> </span><a href="#local-1628087104"><span class="hs-identifier hs-var">ignore_prags</span></a><span> </span><a href="#local-1628087109"><span class="hs-identifier hs-var">name</span></a><span> </span><a href="#local-1628087110"><span class="hs-identifier hs-var">ty</span></a><span> </span><a href="#local-1628087108"><span class="hs-identifier hs-var">info</span></a><span>
</span><a name="line-311"></a><span>        </span><span class="hs-special">;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="TyCoRep.html#AnId"><span class="hs-identifier hs-var">AnId</span></a><span> </span><span class="hs-special">(</span><a href="Id.html#mkGlobalId"><span class="hs-identifier hs-var">mkGlobalId</span></a><span> </span><a href="#local-1628087111"><span class="hs-identifier hs-var">details</span></a><span> </span><a href="#local-1628087109"><span class="hs-identifier hs-var">name</span></a><span> </span><a href="#local-1628087110"><span class="hs-identifier hs-var">ty</span></a><span> </span><a href="#local-1628087112"><span class="hs-identifier hs-var">info</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-312"></a><span>
</span><a name="line-313"></a><span class="hs-identifier">tc_iface_decl</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><a href="IfaceSyn.html#IfaceData"><span class="hs-identifier hs-var">IfaceData</span></a><span> </span><span class="hs-special">{</span><span class="hs-identifier">ifName</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087113"><a href="#local-1628087113"><span class="hs-identifier">occ_name</span></a></a><span class="hs-special">,</span><span>
</span><a name="line-314"></a><span>                          </span><span class="hs-identifier">ifCType</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087114"><a href="#local-1628087114"><span class="hs-identifier">cType</span></a></a><span class="hs-special">,</span><span>
</span><a name="line-315"></a><span>                          </span><span class="hs-identifier">ifBinders</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087115"><a href="#local-1628087115"><span class="hs-identifier">binders</span></a></a><span class="hs-special">,</span><span>
</span><a name="line-316"></a><span>                          </span><span class="hs-identifier">ifResKind</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087116"><a href="#local-1628087116"><span class="hs-identifier">res_kind</span></a></a><span class="hs-special">,</span><span>
</span><a name="line-317"></a><span>                          </span><span class="hs-identifier">ifRoles</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087117"><a href="#local-1628087117"><span class="hs-identifier">roles</span></a></a><span class="hs-special">,</span><span>
</span><a name="line-318"></a><span>                          </span><span class="hs-identifier">ifCtxt</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087118"><a href="#local-1628087118"><span class="hs-identifier">ctxt</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">ifGadtSyntax</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087119"><a href="#local-1628087119"><span class="hs-identifier">gadt_syn</span></a></a><span class="hs-special">,</span><span>
</span><a name="line-319"></a><span>                          </span><span class="hs-identifier">ifCons</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087120"><a href="#local-1628087120"><span class="hs-identifier">rdr_cons</span></a></a><span class="hs-special">,</span><span>
</span><a name="line-320"></a><span>                          </span><span class="hs-identifier">ifRec</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087121"><a href="#local-1628087121"><span class="hs-identifier">is_rec</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">ifParent</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087122"><a href="#local-1628087122"><span class="hs-identifier">mb_parent</span></a></a><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><a name="line-321"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="TcIface.html#bindIfaceTyConBinders_AT"><span class="hs-identifier hs-var">bindIfaceTyConBinders_AT</span></a><span> </span><a href="#local-1628087115"><span class="hs-identifier hs-var">binders</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><span class="hs-glyph">\</span><span> </span><a name="local-1628087132"><a href="#local-1628087132"><span class="hs-identifier">tyvars</span></a></a><span> </span><a name="local-1628087133"><a href="#local-1628087133"><span class="hs-identifier">binders'</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-322"></a><span>    </span><span class="hs-special">{</span><span> </span><a name="local-1628087134"><a href="#local-1628087134"><span class="hs-identifier">tc_name</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="IfaceEnv.html#lookupIfaceTop"><span class="hs-identifier hs-var">lookupIfaceTop</span></a><span> </span><a href="#local-1628087113"><span class="hs-identifier hs-var">occ_name</span></a><span>
</span><a name="line-323"></a><span>    </span><span class="hs-special">;</span><span> </span><a name="local-1628087135"><a href="#local-1628087135"><span class="hs-identifier">res_kind'</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tcIfaceType"><span class="hs-identifier hs-var">tcIfaceType</span></a><span> </span><a href="#local-1628087116"><span class="hs-identifier hs-var">res_kind</span></a><span>
</span><a name="line-324"></a><span>
</span><a name="line-325"></a><span>    </span><span class="hs-special">;</span><span> </span><a name="local-1628087140"><a href="#local-1628087140"><span class="hs-identifier">tycon</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="IOEnv.html#fixM"><span class="hs-identifier hs-var">fixM</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><span class="hs-glyph">\</span><span> </span><a name="local-1628087136"><a href="#local-1628087136"><span class="hs-identifier">tycon</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-326"></a><span>            </span><span class="hs-special">{</span><span> </span><a name="local-1628087137"><a href="#local-1628087137"><span class="hs-identifier">stupid_theta</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tcIfaceCtxt"><span class="hs-identifier hs-var">tcIfaceCtxt</span></a><span> </span><a href="#local-1628087118"><span class="hs-identifier hs-var">ctxt</span></a><span>
</span><a name="line-327"></a><span>            </span><span class="hs-special">;</span><span> </span><a name="local-1628087138"><a href="#local-1628087138"><span class="hs-identifier">parent'</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="#local-1628087123"><span class="hs-identifier hs-var">tc_parent</span></a><span> </span><a href="#local-1628087134"><span class="hs-identifier hs-var">tc_name</span></a><span> </span><a href="#local-1628087122"><span class="hs-identifier hs-var">mb_parent</span></a><span>
</span><a name="line-328"></a><span>            </span><span class="hs-special">;</span><span> </span><a name="local-1628087139"><a href="#local-1628087139"><span class="hs-identifier">cons</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tcIfaceDataCons"><span class="hs-identifier hs-var">tcIfaceDataCons</span></a><span> </span><a href="#local-1628087134"><span class="hs-identifier hs-var">tc_name</span></a><span> </span><a href="#local-1628087136"><span class="hs-identifier hs-var">tycon</span></a><span> </span><a href="#local-1628087132"><span class="hs-identifier hs-var">tyvars</span></a><span> </span><a href="#local-1628087120"><span class="hs-identifier hs-var">rdr_cons</span></a><span>
</span><a name="line-329"></a><span>            </span><span class="hs-special">;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="TyCon.html#mkAlgTyCon"><span class="hs-identifier hs-var">mkAlgTyCon</span></a><span> </span><a href="#local-1628087134"><span class="hs-identifier hs-var">tc_name</span></a><span> </span><a href="#local-1628087133"><span class="hs-identifier hs-var">binders'</span></a><span> </span><a href="#local-1628087135"><span class="hs-identifier hs-var">res_kind'</span></a><span> </span><a href="#local-1628087132"><span class="hs-identifier hs-var">tyvars</span></a><span> </span><a href="#local-1628087117"><span class="hs-identifier hs-var">roles</span></a><span> </span><a href="#local-1628087114"><span class="hs-identifier hs-var">cType</span></a><span> </span><a href="#local-1628087137"><span class="hs-identifier hs-var">stupid_theta</span></a><span>
</span><a name="line-330"></a><span>                                    </span><a href="#local-1628087139"><span class="hs-identifier hs-var">cons</span></a><span> </span><a href="#local-1628087138"><span class="hs-identifier hs-var">parent'</span></a><span> </span><a href="#local-1628087121"><span class="hs-identifier hs-var">is_rec</span></a><span> </span><a href="#local-1628087119"><span class="hs-identifier hs-var">gadt_syn</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-331"></a><span>    </span><span class="hs-special">;</span><span> </span><a href="TcRnMonad.html#traceIf"><span class="hs-identifier hs-var">traceIf</span></a><span> </span><span class="hs-special">(</span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;tcIfaceDecl4&quot;</span><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1628087140"><span class="hs-identifier hs-var">tycon</span></a><span class="hs-special">)</span><span>
</span><a name="line-332"></a><span>    </span><span class="hs-special">;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="TyCoRep.html#ATyCon"><span class="hs-identifier hs-var">ATyCon</span></a><span> </span><a href="#local-1628087140"><span class="hs-identifier hs-var">tycon</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-333"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-334"></a><span>    </span><span class="hs-identifier">tc_parent</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Name.html#Name"><span class="hs-identifier hs-type">Name</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="IfaceSyn.html#IfaceTyConParent"><span class="hs-identifier hs-type">IfaceTyConParent</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><a href="TyCon.html#AlgTyConFlav"><span class="hs-identifier hs-type">AlgTyConFlav</span></a><span>
</span><a name="line-335"></a><span>    </span><a name="local-1628087123"><a href="#local-1628087123"><span class="hs-identifier">tc_parent</span></a></a><span> </span><a name="local-1628087124"><a href="#local-1628087124"><span class="hs-identifier">tc_name</span></a></a><span> </span><a href="IfaceSyn.html#IfNoParent"><span class="hs-identifier hs-var">IfNoParent</span></a><span>
</span><a name="line-336"></a><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><a name="local-1628087125"><a href="#local-1628087125"><span class="hs-identifier">tc_rep_name</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="BuildTyCl.html#newTyConRepName"><span class="hs-identifier hs-var">newTyConRepName</span></a><span> </span><a href="#local-1628087124"><span class="hs-identifier hs-var">tc_name</span></a><span>
</span><a name="line-337"></a><span>           </span><span class="hs-special">;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="TyCon.html#VanillaAlgTyCon"><span class="hs-identifier hs-var">VanillaAlgTyCon</span></a><span> </span><a href="#local-1628087125"><span class="hs-identifier hs-var">tc_rep_name</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-338"></a><span>    </span><span class="hs-identifier">tc_parent</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><a href="IfaceSyn.html#IfDataInstance"><span class="hs-identifier hs-var">IfDataInstance</span></a><span> </span><a name="local-1628087126"><a href="#local-1628087126"><span class="hs-identifier">ax_name</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-1628087127"><a href="#local-1628087127"><span class="hs-identifier">arg_tys</span></a></a><span class="hs-special">)</span><span>
</span><a name="line-339"></a><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><a name="local-1628087128"><a href="#local-1628087128"><span class="hs-identifier">ax</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tcIfaceCoAxiom"><span class="hs-identifier hs-var">tcIfaceCoAxiom</span></a><span> </span><a href="#local-1628087126"><span class="hs-identifier hs-var">ax_name</span></a><span>
</span><a name="line-340"></a><span>           </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><a name="local-1628087129"><a href="#local-1628087129"><span class="hs-identifier">fam_tc</span></a></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="CoAxiom.html#coAxiomTyCon"><span class="hs-identifier hs-var">coAxiomTyCon</span></a><span> </span><a href="#local-1628087128"><span class="hs-identifier hs-var">ax</span></a><span>
</span><a name="line-341"></a><span>                 </span><a name="local-1628087130"><a href="#local-1628087130"><span class="hs-identifier">ax_unbr</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="CoAxiom.html#toUnbranchedAxiom"><span class="hs-identifier hs-var">toUnbranchedAxiom</span></a><span> </span><a href="#local-1628087128"><span class="hs-identifier hs-var">ax</span></a><span>
</span><a name="line-342"></a><span>           </span><span class="hs-special">;</span><span> </span><a name="local-1628087131"><a href="#local-1628087131"><span class="hs-identifier">lhs_tys</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tcIfaceTcArgs"><span class="hs-identifier hs-var">tcIfaceTcArgs</span></a><span> </span><a href="#local-1628087127"><span class="hs-identifier hs-var">arg_tys</span></a><span>
</span><a name="line-343"></a><span>           </span><span class="hs-special">;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="TyCon.html#DataFamInstTyCon"><span class="hs-identifier hs-var">DataFamInstTyCon</span></a><span> </span><a href="#local-1628087130"><span class="hs-identifier hs-var">ax_unbr</span></a><span> </span><a href="#local-1628087129"><span class="hs-identifier hs-var">fam_tc</span></a><span> </span><a href="#local-1628087131"><span class="hs-identifier hs-var">lhs_tys</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-344"></a><span>
</span><a name="line-345"></a><span class="hs-identifier">tc_iface_decl</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><a href="IfaceSyn.html#IfaceSynonym"><span class="hs-identifier hs-var">IfaceSynonym</span></a><span> </span><span class="hs-special">{</span><span class="hs-identifier">ifName</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087141"><a href="#local-1628087141"><span class="hs-identifier">occ_name</span></a></a><span class="hs-special">,</span><span>
</span><a name="line-346"></a><span>                                      </span><span class="hs-identifier">ifRoles</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087142"><a href="#local-1628087142"><span class="hs-identifier">roles</span></a></a><span class="hs-special">,</span><span>
</span><a name="line-347"></a><span>                                      </span><span class="hs-identifier">ifSynRhs</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087143"><a href="#local-1628087143"><span class="hs-identifier">rhs_ty</span></a></a><span class="hs-special">,</span><span>
</span><a name="line-348"></a><span>                                      </span><span class="hs-identifier">ifBinders</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087144"><a href="#local-1628087144"><span class="hs-identifier">binders</span></a></a><span class="hs-special">,</span><span>
</span><a name="line-349"></a><span>                                      </span><span class="hs-identifier">ifResKind</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087145"><a href="#local-1628087145"><span class="hs-identifier">res_kind</span></a></a><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><a name="line-350"></a><span>   </span><span class="hs-glyph">=</span><span> </span><a href="TcIface.html#bindIfaceTyConBinders_AT"><span class="hs-identifier hs-var">bindIfaceTyConBinders_AT</span></a><span> </span><a href="#local-1628087144"><span class="hs-identifier hs-var">binders</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><span class="hs-glyph">\</span><span> </span><a name="local-1628087148"><a href="#local-1628087148"><span class="hs-identifier">tyvars</span></a></a><span> </span><a name="local-1628087149"><a href="#local-1628087149"><span class="hs-identifier">binders'</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-351"></a><span>     </span><span class="hs-special">{</span><span> </span><a name="local-1628087150"><a href="#local-1628087150"><span class="hs-identifier">tc_name</span></a></a><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><a href="IfaceEnv.html#lookupIfaceTop"><span class="hs-identifier hs-var">lookupIfaceTop</span></a><span> </span><a href="#local-1628087141"><span class="hs-identifier hs-var">occ_name</span></a><span>
</span><a name="line-352"></a><span>     </span><span class="hs-special">;</span><span> </span><a name="local-1628087151"><a href="#local-1628087151"><span class="hs-identifier">res_kind'</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tcIfaceType"><span class="hs-identifier hs-var">tcIfaceType</span></a><span> </span><a href="#local-1628087145"><span class="hs-identifier hs-var">res_kind</span></a><span>     </span><span class="hs-comment">-- Note [Synonym kind loop]</span><span>
</span><a name="line-353"></a><span>     </span><span class="hs-special">;</span><span> </span><a name="local-1628087152"><a href="#local-1628087152"><span class="hs-identifier">rhs</span></a></a><span>      </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcRnMonad.html#forkM"><span class="hs-identifier hs-var">forkM</span></a><span> </span><span class="hs-special">(</span><a href="#local-1628087146"><span class="hs-identifier hs-var">mk_doc</span></a><span> </span><a href="#local-1628087150"><span class="hs-identifier hs-var">tc_name</span></a><span class="hs-special">)</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span>
</span><a name="line-354"></a><span>                   </span><a href="TcIface.html#tcIfaceType"><span class="hs-identifier hs-var">tcIfaceType</span></a><span> </span><a href="#local-1628087143"><span class="hs-identifier hs-var">rhs_ty</span></a><span>
</span><a name="line-355"></a><span>     </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><a name="local-1628087153"><a href="#local-1628087153"><span class="hs-identifier">tycon</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="TyCon.html#mkSynonymTyCon"><span class="hs-identifier hs-var">mkSynonymTyCon</span></a><span> </span><a href="#local-1628087150"><span class="hs-identifier hs-var">tc_name</span></a><span> </span><a href="#local-1628087149"><span class="hs-identifier hs-var">binders'</span></a><span> </span><a href="#local-1628087151"><span class="hs-identifier hs-var">res_kind'</span></a><span> </span><a href="#local-1628087148"><span class="hs-identifier hs-var">tyvars</span></a><span> </span><a href="#local-1628087142"><span class="hs-identifier hs-var">roles</span></a><span> </span><a href="#local-1628087152"><span class="hs-identifier hs-var">rhs</span></a><span>
</span><a name="line-356"></a><span>     </span><span class="hs-special">;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="TyCoRep.html#ATyCon"><span class="hs-identifier hs-var">ATyCon</span></a><span> </span><a href="#local-1628087153"><span class="hs-identifier hs-var">tycon</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-357"></a><span>   </span><span class="hs-keyword">where</span><span>
</span><a name="line-358"></a><span>     </span><a name="local-1628087146"><a href="#local-1628087146"><span class="hs-identifier">mk_doc</span></a></a><span> </span><a name="local-1628087147"><a href="#local-1628087147"><span class="hs-identifier">n</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;Type synonym&quot;</span><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1628087147"><span class="hs-identifier hs-var">n</span></a><span>
</span><a name="line-359"></a><span>
</span><a name="line-360"></a><span class="hs-identifier">tc_iface_decl</span><span> </span><a name="local-1628087154"><a href="#local-1628087154"><span class="hs-identifier">parent</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><a href="IfaceSyn.html#IfaceFamily"><span class="hs-identifier hs-var">IfaceFamily</span></a><span> </span><span class="hs-special">{</span><span class="hs-identifier">ifName</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087155"><a href="#local-1628087155"><span class="hs-identifier">occ_name</span></a></a><span class="hs-special">,</span><span>
</span><a name="line-361"></a><span>                                     </span><span class="hs-identifier">ifFamFlav</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087156"><a href="#local-1628087156"><span class="hs-identifier">fam_flav</span></a></a><span class="hs-special">,</span><span>
</span><a name="line-362"></a><span>                                     </span><span class="hs-identifier">ifBinders</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087157"><a href="#local-1628087157"><span class="hs-identifier">binders</span></a></a><span class="hs-special">,</span><span>
</span><a name="line-363"></a><span>                                     </span><span class="hs-identifier">ifResKind</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087158"><a href="#local-1628087158"><span class="hs-identifier">res_kind</span></a></a><span class="hs-special">,</span><span>
</span><a name="line-364"></a><span>                                     </span><span class="hs-identifier">ifResVar</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087159"><a href="#local-1628087159"><span class="hs-identifier">res</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">ifFamInj</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087160"><a href="#local-1628087160"><span class="hs-identifier">inj</span></a></a><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><a name="line-365"></a><span>   </span><span class="hs-glyph">=</span><span> </span><a href="TcIface.html#bindIfaceTyConBinders_AT"><span class="hs-identifier hs-var">bindIfaceTyConBinders_AT</span></a><span> </span><a href="#local-1628087157"><span class="hs-identifier hs-var">binders</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><span class="hs-glyph">\</span><span> </span><a name="local-1628087168"><a href="#local-1628087168"><span class="hs-identifier">tyvars</span></a></a><span> </span><a name="local-1628087169"><a href="#local-1628087169"><span class="hs-identifier">binders'</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-366"></a><span>     </span><span class="hs-special">{</span><span> </span><a name="local-1628087170"><a href="#local-1628087170"><span class="hs-identifier">tc_name</span></a></a><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><a href="IfaceEnv.html#lookupIfaceTop"><span class="hs-identifier hs-var">lookupIfaceTop</span></a><span> </span><a href="#local-1628087155"><span class="hs-identifier hs-var">occ_name</span></a><span>
</span><a name="line-367"></a><span>     </span><span class="hs-special">;</span><span> </span><a name="local-1628087171"><a href="#local-1628087171"><span class="hs-identifier">res_kind'</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tcIfaceType"><span class="hs-identifier hs-var">tcIfaceType</span></a><span> </span><a href="#local-1628087158"><span class="hs-identifier hs-var">res_kind</span></a><span>    </span><span class="hs-comment">-- Note [Synonym kind loop]</span><span>
</span><a name="line-368"></a><span>     </span><span class="hs-special">;</span><span> </span><a name="local-1628087172"><a href="#local-1628087172"><span class="hs-identifier">rhs</span></a></a><span>      </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcRnMonad.html#forkM"><span class="hs-identifier hs-var">forkM</span></a><span> </span><span class="hs-special">(</span><a href="#local-1628087161"><span class="hs-identifier hs-var">mk_doc</span></a><span> </span><a href="#local-1628087170"><span class="hs-identifier hs-var">tc_name</span></a><span class="hs-special">)</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span>
</span><a name="line-369"></a><span>                   </span><a href="#local-1628087162"><span class="hs-identifier hs-var">tc_fam_flav</span></a><span> </span><a href="#local-1628087170"><span class="hs-identifier hs-var">tc_name</span></a><span> </span><a href="#local-1628087156"><span class="hs-identifier hs-var">fam_flav</span></a><span>
</span><a name="line-370"></a><span>     </span><span class="hs-special">;</span><span> </span><a name="local-1628087173"><a href="#local-1628087173"><span class="hs-identifier">res_name</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Traversable.html#traverse"><span class="hs-identifier hs-var">traverse</span></a><span> </span><span class="hs-special">(</span><a href="IfaceEnv.html#newIfaceName"><span class="hs-identifier hs-var">newIfaceName</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a><span> </span><a href="OccName.html#mkTyVarOccFS"><span class="hs-identifier hs-var">mkTyVarOccFS</span></a><span class="hs-special">)</span><span> </span><a href="#local-1628087159"><span class="hs-identifier hs-var">res</span></a><span>
</span><a name="line-371"></a><span>     </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><a name="local-1628087174"><a href="#local-1628087174"><span class="hs-identifier">tycon</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="TyCon.html#mkFamilyTyCon"><span class="hs-identifier hs-var">mkFamilyTyCon</span></a><span> </span><a href="#local-1628087170"><span class="hs-identifier hs-var">tc_name</span></a><span> </span><a href="#local-1628087169"><span class="hs-identifier hs-var">binders'</span></a><span> </span><a href="#local-1628087171"><span class="hs-identifier hs-var">res_kind'</span></a><span> </span><a href="#local-1628087168"><span class="hs-identifier hs-var">tyvars</span></a><span> </span><a href="#local-1628087173"><span class="hs-identifier hs-var">res_name</span></a><span> </span><a href="#local-1628087172"><span class="hs-identifier hs-var">rhs</span></a><span> </span><a href="#local-1628087154"><span class="hs-identifier hs-var">parent</span></a><span> </span><a href="#local-1628087160"><span class="hs-identifier hs-var">inj</span></a><span>
</span><a name="line-372"></a><span>     </span><span class="hs-special">;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="TyCoRep.html#ATyCon"><span class="hs-identifier hs-var">ATyCon</span></a><span> </span><a href="#local-1628087174"><span class="hs-identifier hs-var">tycon</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-373"></a><span>   </span><span class="hs-keyword">where</span><span>
</span><a name="line-374"></a><span>     </span><a name="local-1628087161"><a href="#local-1628087161"><span class="hs-identifier">mk_doc</span></a></a><span> </span><a name="local-1628087163"><a href="#local-1628087163"><span class="hs-identifier">n</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;Type synonym&quot;</span><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1628087163"><span class="hs-identifier hs-var">n</span></a><span>
</span><a name="line-375"></a><span>
</span><a name="line-376"></a><span>     </span><span class="hs-identifier">tc_fam_flav</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Name.html#Name"><span class="hs-identifier hs-type">Name</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="IfaceSyn.html#IfaceFamTyConFlav"><span class="hs-identifier hs-type">IfaceFamTyConFlav</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><a href="TyCon.html#FamTyConFlav"><span class="hs-identifier hs-type">FamTyConFlav</span></a><span>
</span><a name="line-377"></a><span>     </span><a name="local-1628087162"><a href="#local-1628087162"><span class="hs-identifier">tc_fam_flav</span></a></a><span> </span><a name="local-1628087164"><a href="#local-1628087164"><span class="hs-identifier">tc_name</span></a></a><span> </span><a href="IfaceSyn.html#IfaceDataFamilyTyCon"><span class="hs-identifier hs-var">IfaceDataFamilyTyCon</span></a><span>
</span><a name="line-378"></a><span>       </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><a name="local-1628087165"><a href="#local-1628087165"><span class="hs-identifier">tc_rep_name</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="BuildTyCl.html#newTyConRepName"><span class="hs-identifier hs-var">newTyConRepName</span></a><span> </span><a href="#local-1628087164"><span class="hs-identifier hs-var">tc_name</span></a><span>
</span><a name="line-379"></a><span>            </span><span class="hs-special">;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="TyCon.html#DataFamilyTyCon"><span class="hs-identifier hs-var">DataFamilyTyCon</span></a><span> </span><a href="#local-1628087165"><span class="hs-identifier hs-var">tc_rep_name</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-380"></a><span>     </span><span class="hs-identifier">tc_fam_flav</span><span> </span><span class="hs-identifier">_</span><span> </span><a href="IfaceSyn.html#IfaceOpenSynFamilyTyCon"><span class="hs-identifier hs-var">IfaceOpenSynFamilyTyCon</span></a><span class="hs-glyph">=</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><a href="TyCon.html#OpenSynFamilyTyCon"><span class="hs-identifier hs-var">OpenSynFamilyTyCon</span></a><span>
</span><a name="line-381"></a><span>     </span><span class="hs-identifier">tc_fam_flav</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><a href="IfaceSyn.html#IfaceClosedSynFamilyTyCon"><span class="hs-identifier hs-var">IfaceClosedSynFamilyTyCon</span></a><span> </span><a name="local-1628087166"><a href="#local-1628087166"><span class="hs-identifier">mb_ax_name_branches</span></a></a><span class="hs-special">)</span><span>
</span><a name="line-382"></a><span>       </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><a name="local-1628087167"><a href="#local-1628087167"><span class="hs-identifier">ax</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Traversable.html#traverse"><span class="hs-identifier hs-var">traverse</span></a><span> </span><span class="hs-special">(</span><a href="TcIface.html#tcIfaceCoAxiom"><span class="hs-identifier hs-var">tcIfaceCoAxiom</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Tuple.html#fst"><span class="hs-identifier hs-var">fst</span></a><span class="hs-special">)</span><span> </span><a href="#local-1628087166"><span class="hs-identifier hs-var">mb_ax_name_branches</span></a><span>
</span><a name="line-383"></a><span>            </span><span class="hs-special">;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="TyCon.html#ClosedSynFamilyTyCon"><span class="hs-identifier hs-var">ClosedSynFamilyTyCon</span></a><span> </span><a href="#local-1628087167"><span class="hs-identifier hs-var">ax</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-384"></a><span>     </span><span class="hs-identifier">tc_fam_flav</span><span> </span><span class="hs-identifier">_</span><span> </span><a href="IfaceSyn.html#IfaceAbstractClosedSynFamilyTyCon"><span class="hs-identifier hs-var">IfaceAbstractClosedSynFamilyTyCon</span></a><span>
</span><a name="line-385"></a><span>         </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><a href="TyCon.html#AbstractClosedSynFamilyTyCon"><span class="hs-identifier hs-var">AbstractClosedSynFamilyTyCon</span></a><span>
</span><a name="line-386"></a><span>     </span><span class="hs-identifier">tc_fam_flav</span><span> </span><span class="hs-identifier">_</span><span> </span><a href="IfaceSyn.html#IfaceBuiltInSynFamTyCon"><span class="hs-identifier hs-var">IfaceBuiltInSynFamTyCon</span></a><span>
</span><a name="line-387"></a><span>         </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a><span> </span><span class="hs-string">&quot;tc_iface_decl&quot;</span><span>
</span><a name="line-388"></a><span>                    </span><span class="hs-special">(</span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;IfaceBuiltInSynFamTyCon in interface file&quot;</span><span class="hs-special">)</span><span>
</span><a name="line-389"></a><span>
</span><a name="line-390"></a><span class="hs-identifier">tc_iface_decl</span><span> </span><a name="local-1628087175"><a href="#local-1628087175"><span class="hs-identifier">_parent</span></a></a><span> </span><a name="local-1628087176"><a href="#local-1628087176"><span class="hs-identifier">ignore_prags</span></a></a><span>
</span><a name="line-391"></a><span>            </span><span class="hs-special">(</span><a href="IfaceSyn.html#IfaceClass"><span class="hs-identifier hs-var">IfaceClass</span></a><span> </span><span class="hs-special">{</span><span class="hs-identifier">ifCtxt</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087177"><a href="#local-1628087177"><span class="hs-identifier">rdr_ctxt</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">ifName</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087178"><a href="#local-1628087178"><span class="hs-identifier">tc_occ</span></a></a><span class="hs-special">,</span><span>
</span><a name="line-392"></a><span>                         </span><span class="hs-identifier">ifRoles</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087179"><a href="#local-1628087179"><span class="hs-identifier">roles</span></a></a><span class="hs-special">,</span><span>
</span><a name="line-393"></a><span>                         </span><span class="hs-identifier">ifBinders</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087180"><a href="#local-1628087180"><span class="hs-identifier">binders</span></a></a><span class="hs-special">,</span><span>
</span><a name="line-394"></a><span>                         </span><span class="hs-identifier">ifFDs</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087181"><a href="#local-1628087181"><span class="hs-identifier">rdr_fds</span></a></a><span class="hs-special">,</span><span>
</span><a name="line-395"></a><span>                         </span><span class="hs-identifier">ifATs</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087182"><a href="#local-1628087182"><span class="hs-identifier">rdr_ats</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">ifSigs</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087183"><a href="#local-1628087183"><span class="hs-identifier">rdr_sigs</span></a></a><span class="hs-special">,</span><span>
</span><a name="line-396"></a><span>                         </span><span class="hs-identifier">ifMinDef</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087184"><a href="#local-1628087184"><span class="hs-identifier">mindef_occ</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">ifRec</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087185"><a href="#local-1628087185"><span class="hs-identifier">tc_isrec</span></a></a><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><a name="line-397"></a><span class="hs-comment">-- ToDo: in hs-boot files we should really treat abstract classes specially,</span><span>
</span><a name="line-398"></a><span class="hs-comment">--       as we do abstract tycons</span><span>
</span><a name="line-399"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="TcIface.html#bindIfaceTyConBinders"><span class="hs-identifier hs-var">bindIfaceTyConBinders</span></a><span> </span><a href="#local-1628087180"><span class="hs-identifier hs-var">binders</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><span class="hs-glyph">\</span><span> </span><a name="local-1628087220"><a href="#local-1628087220"><span class="hs-identifier">tyvars</span></a></a><span> </span><a name="local-1628087221"><a href="#local-1628087221"><span class="hs-identifier">binders'</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-400"></a><span>    </span><span class="hs-special">{</span><span> </span><a name="local-1628087222"><a href="#local-1628087222"><span class="hs-identifier">tc_name</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="IfaceEnv.html#lookupIfaceTop"><span class="hs-identifier hs-var">lookupIfaceTop</span></a><span> </span><a href="#local-1628087178"><span class="hs-identifier hs-var">tc_occ</span></a><span>
</span><a name="line-401"></a><span>    </span><span class="hs-special">;</span><span> </span><a href="TcRnMonad.html#traceIf"><span class="hs-identifier hs-var">traceIf</span></a><span> </span><span class="hs-special">(</span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;tc-iface-class1&quot;</span><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1628087178"><span class="hs-identifier hs-var">tc_occ</span></a><span class="hs-special">)</span><span>
</span><a name="line-402"></a><span>    </span><span class="hs-special">;</span><span> </span><a name="local-1628087223"><a href="#local-1628087223"><span class="hs-identifier">ctxt</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a><span> </span><a href="#local-1628087186"><span class="hs-identifier hs-var">tc_sc</span></a><span> </span><a href="#local-1628087177"><span class="hs-identifier hs-var">rdr_ctxt</span></a><span>
</span><a name="line-403"></a><span>    </span><span class="hs-special">;</span><span> </span><a href="TcRnMonad.html#traceIf"><span class="hs-identifier hs-var">traceIf</span></a><span> </span><span class="hs-special">(</span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;tc-iface-class2&quot;</span><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1628087178"><span class="hs-identifier hs-var">tc_occ</span></a><span class="hs-special">)</span><span>
</span><a name="line-404"></a><span>    </span><span class="hs-special">;</span><span> </span><a name="local-1628087224"><a href="#local-1628087224"><span class="hs-identifier">sigs</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a><span> </span><a href="#local-1628087187"><span class="hs-identifier hs-var">tc_sig</span></a><span> </span><a href="#local-1628087183"><span class="hs-identifier hs-var">rdr_sigs</span></a><span>
</span><a name="line-405"></a><span>    </span><span class="hs-special">;</span><span> </span><a name="local-1628087225"><a href="#local-1628087225"><span class="hs-identifier">fds</span></a></a><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a><span> </span><a href="#local-1628087193"><span class="hs-identifier hs-var">tc_fd</span></a><span> </span><a href="#local-1628087181"><span class="hs-identifier hs-var">rdr_fds</span></a><span>
</span><a name="line-406"></a><span>    </span><span class="hs-special">;</span><span> </span><a href="TcRnMonad.html#traceIf"><span class="hs-identifier hs-var">traceIf</span></a><span> </span><span class="hs-special">(</span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;tc-iface-class3&quot;</span><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1628087178"><span class="hs-identifier hs-var">tc_occ</span></a><span class="hs-special">)</span><span>
</span><a name="line-407"></a><span>    </span><span class="hs-special">;</span><span> </span><a name="local-1628087226"><a href="#local-1628087226"><span class="hs-identifier">mindef</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Traversable.html#traverse"><span class="hs-identifier hs-var">traverse</span></a><span> </span><span class="hs-special">(</span><a href="IfaceEnv.html#lookupIfaceTop"><span class="hs-identifier hs-var">lookupIfaceTop</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a><span> </span><a href="OccName.html#mkVarOccFS"><span class="hs-identifier hs-var">mkVarOccFS</span></a><span class="hs-special">)</span><span> </span><a href="#local-1628087184"><span class="hs-identifier hs-var">mindef_occ</span></a><span>
</span><a name="line-408"></a><span>    </span><span class="hs-special">;</span><span> </span><a name="local-1628087229"><a href="#local-1628087229"><span class="hs-identifier">cls</span></a></a><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><a href="IOEnv.html#fixM"><span class="hs-identifier hs-var">fixM</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><span class="hs-glyph">\</span><span> </span><a name="local-1628087227"><a href="#local-1628087227"><span class="hs-identifier">cls</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-409"></a><span>              </span><span class="hs-special">{</span><span> </span><a name="local-1628087228"><a href="#local-1628087228"><span class="hs-identifier">ats</span></a></a><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a><span> </span><span class="hs-special">(</span><a href="#local-1628087189"><span class="hs-identifier hs-var">tc_at</span></a><span> </span><a href="#local-1628087227"><span class="hs-identifier hs-var">cls</span></a><span class="hs-special">)</span><span> </span><a href="#local-1628087182"><span class="hs-identifier hs-var">rdr_ats</span></a><span>
</span><a name="line-410"></a><span>              </span><span class="hs-special">;</span><span> </span><a href="TcRnMonad.html#traceIf"><span class="hs-identifier hs-var">traceIf</span></a><span> </span><span class="hs-special">(</span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;tc-iface-class4&quot;</span><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1628087178"><span class="hs-identifier hs-var">tc_occ</span></a><span class="hs-special">)</span><span>
</span><a name="line-411"></a><span>              </span><span class="hs-special">;</span><span> </span><a href="BuildTyCl.html#buildClass"><span class="hs-identifier hs-var">buildClass</span></a><span> </span><a href="#local-1628087222"><span class="hs-identifier hs-var">tc_name</span></a><span> </span><a href="#local-1628087220"><span class="hs-identifier hs-var">tyvars</span></a><span> </span><a href="#local-1628087179"><span class="hs-identifier hs-var">roles</span></a><span> </span><a href="#local-1628087223"><span class="hs-identifier hs-var">ctxt</span></a><span> </span><a href="#local-1628087221"><span class="hs-identifier hs-var">binders'</span></a><span> </span><a href="#local-1628087225"><span class="hs-identifier hs-var">fds</span></a><span> </span><a href="#local-1628087228"><span class="hs-identifier hs-var">ats</span></a><span> </span><a href="#local-1628087224"><span class="hs-identifier hs-var">sigs</span></a><span> </span><a href="#local-1628087226"><span class="hs-identifier hs-var">mindef</span></a><span> </span><a href="#local-1628087185"><span class="hs-identifier hs-var">tc_isrec</span></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-412"></a><span>    </span><span class="hs-special">;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="TyCoRep.html#ATyCon"><span class="hs-identifier hs-var">ATyCon</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier">classTyCon</span><span> </span><a href="#local-1628087229"><span class="hs-identifier hs-var">cls</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-413"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-414"></a><span>   </span><a name="local-1628087186"><a href="#local-1628087186"><span class="hs-identifier">tc_sc</span></a></a><span> </span><a name="local-1628087194"><a href="#local-1628087194"><span class="hs-identifier">pred</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="TcRnMonad.html#forkM"><span class="hs-identifier hs-var">forkM</span></a><span> </span><span class="hs-special">(</span><a href="#local-1628087190"><span class="hs-identifier hs-var">mk_sc_doc</span></a><span> </span><a href="#local-1628087194"><span class="hs-identifier hs-var">pred</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><a href="TcIface.html#tcIfaceType"><span class="hs-identifier hs-var">tcIfaceType</span></a><span> </span><a href="#local-1628087194"><span class="hs-identifier hs-var">pred</span></a><span class="hs-special">)</span><span>
</span><a name="line-415"></a><span>        </span><span class="hs-comment">-- The *length* of the superclasses is used by buildClass, and hence must</span><span>
</span><a name="line-416"></a><span>        </span><span class="hs-comment">-- not be inside the thunk.  But the *content* maybe recursive and hence</span><span>
</span><a name="line-417"></a><span>        </span><span class="hs-comment">-- must be lazy (via forkM).  Example:</span><span>
</span><a name="line-418"></a><span>        </span><span class="hs-comment">--     class C (T a) =&gt; D a where</span><span>
</span><a name="line-419"></a><span>        </span><span class="hs-comment">--       data T a</span><span>
</span><a name="line-420"></a><span>        </span><span class="hs-comment">-- Here the associated type T is knot-tied with the class, and</span><span>
</span><a name="line-421"></a><span>        </span><span class="hs-comment">-- so we must not pull on T too eagerly.  See Trac #5970</span><span>
</span><a name="line-422"></a><span>
</span><a name="line-423"></a><span>   </span><span class="hs-identifier">tc_sig</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="IfaceSyn.html#IfaceClassOp"><span class="hs-identifier hs-type">IfaceClassOp</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><a href="BuildTyCl.html#TcMethInfo"><span class="hs-identifier hs-type">TcMethInfo</span></a><span>
</span><a name="line-424"></a><span>   </span><a name="local-1628087187"><a href="#local-1628087187"><span class="hs-identifier">tc_sig</span></a></a><span> </span><span class="hs-special">(</span><a href="IfaceSyn.html#IfaceClassOp"><span class="hs-identifier hs-var">IfaceClassOp</span></a><span> </span><a name="local-1628087195"><a href="#local-1628087195"><span class="hs-identifier">occ</span></a></a><span> </span><a name="local-1628087196"><a href="#local-1628087196"><span class="hs-identifier">rdr_ty</span></a></a><span> </span><a name="local-1628087197"><a href="#local-1628087197"><span class="hs-identifier">dm</span></a></a><span class="hs-special">)</span><span>
</span><a name="line-425"></a><span>     </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><a name="local-1628087198"><a href="#local-1628087198"><span class="hs-identifier">op_name</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="IfaceEnv.html#lookupIfaceTop"><span class="hs-identifier hs-var">lookupIfaceTop</span></a><span> </span><a href="#local-1628087195"><span class="hs-identifier hs-var">occ</span></a><span>
</span><a name="line-426"></a><span>          </span><span class="hs-special">;</span><span> </span><span class="hs-glyph">~</span><span class="hs-special">(</span><a name="local-1628087201"><a href="#local-1628087201"><span class="hs-identifier">op_ty</span></a></a><span class="hs-special">,</span><span> </span><a name="local-1628087202"><a href="#local-1628087202"><span class="hs-identifier">dm'</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcRnMonad.html#forkM"><span class="hs-identifier hs-var">forkM</span></a><span> </span><span class="hs-special">(</span><a href="#local-1628087192"><span class="hs-identifier hs-var">mk_op_doc</span></a><span> </span><a href="#local-1628087198"><span class="hs-identifier hs-var">op_name</span></a><span> </span><a href="#local-1628087196"><span class="hs-identifier hs-var">rdr_ty</span></a><span class="hs-special">)</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span>
</span><a name="line-427"></a><span>                             </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><a name="local-1628087199"><a href="#local-1628087199"><span class="hs-identifier">ty</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tcIfaceType"><span class="hs-identifier hs-var">tcIfaceType</span></a><span> </span><a href="#local-1628087196"><span class="hs-identifier hs-var">rdr_ty</span></a><span>
</span><a name="line-428"></a><span>                                </span><span class="hs-special">;</span><span> </span><a name="local-1628087200"><a href="#local-1628087200"><span class="hs-identifier">dm'</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="#local-1628087188"><span class="hs-identifier hs-var">tc_dm</span></a><span> </span><a href="#local-1628087197"><span class="hs-identifier hs-var">dm</span></a><span>
</span><a name="line-429"></a><span>                                </span><span class="hs-special">;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="#local-1628087199"><span class="hs-identifier hs-var">ty</span></a><span class="hs-special">,</span><span> </span><a href="#local-1628087200"><span class="hs-identifier hs-var">dm'</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-430"></a><span>                </span><span class="hs-comment">-- Must be done lazily for just the same reason as the</span><span>
</span><a name="line-431"></a><span>                </span><span class="hs-comment">-- type of a data con; to avoid sucking in types that</span><span>
</span><a name="line-432"></a><span>                </span><span class="hs-comment">-- it mentions unless it's necessary to do so</span><span>
</span><a name="line-433"></a><span>          </span><span class="hs-special">;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="#local-1628087198"><span class="hs-identifier hs-var">op_name</span></a><span class="hs-special">,</span><span> </span><a href="#local-1628087201"><span class="hs-identifier hs-var">op_ty</span></a><span class="hs-special">,</span><span> </span><a href="#local-1628087202"><span class="hs-identifier hs-var">dm'</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-434"></a><span>
</span><a name="line-435"></a><span>   </span><span class="hs-identifier">tc_dm</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#DefMethSpec"><span class="hs-identifier hs-type">DefMethSpec</span></a><span> </span><a href="IfaceType.html#IfaceType"><span class="hs-identifier hs-type">IfaceType</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><span class="hs-special">(</span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#DefMethSpec"><span class="hs-identifier hs-type">DefMethSpec</span></a><span> </span><a href="TyCoRep.html#Type"><span class="hs-identifier hs-type">Type</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-436"></a><span>   </span><a name="local-1628087188"><a href="#local-1628087188"><span class="hs-identifier">tc_dm</span></a></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a><span>               </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a><span>
</span><a name="line-437"></a><span>   </span><span class="hs-identifier">tc_dm</span><span> </span><span class="hs-special">(</span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Just"><span class="hs-identifier hs-var">Just</span></a><span> </span><a href="BasicTypes.html#VanillaDM"><span class="hs-identifier hs-var">VanillaDM</span></a><span class="hs-special">)</span><span>      </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Just"><span class="hs-identifier hs-var">Just</span></a><span> </span><a href="BasicTypes.html#VanillaDM"><span class="hs-identifier hs-var">VanillaDM</span></a><span class="hs-special">)</span><span>
</span><a name="line-438"></a><span>   </span><span class="hs-identifier">tc_dm</span><span> </span><span class="hs-special">(</span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Just"><span class="hs-identifier hs-var">Just</span></a><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#GenericDM"><span class="hs-identifier hs-var">GenericDM</span></a><span> </span><a name="local-1628087203"><a href="#local-1628087203"><span class="hs-identifier">ty</span></a></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><a name="local-1628087204"><a href="#local-1628087204"><span class="hs-identifier">ty'</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tcIfaceType"><span class="hs-identifier hs-var">tcIfaceType</span></a><span> </span><a href="#local-1628087203"><span class="hs-identifier hs-var">ty</span></a><span>
</span><a name="line-439"></a><span>                                    </span><span class="hs-special">;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Just"><span class="hs-identifier hs-var">Just</span></a><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#GenericDM"><span class="hs-identifier hs-var">GenericDM</span></a><span> </span><a href="#local-1628087204"><span class="hs-identifier hs-var">ty'</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-440"></a><span>
</span><a name="line-441"></a><span>   </span><a name="local-1628087189"><a href="#local-1628087189"><span class="hs-identifier">tc_at</span></a></a><span> </span><a name="local-1628087205"><a href="#local-1628087205"><span class="hs-identifier">cls</span></a></a><span> </span><span class="hs-special">(</span><a href="IfaceSyn.html#IfaceAT"><span class="hs-identifier hs-var">IfaceAT</span></a><span> </span><a name="local-1628087206"><a href="#local-1628087206"><span class="hs-identifier">tc_decl</span></a></a><span> </span><a name="local-1628087207"><a href="#local-1628087207"><span class="hs-identifier">if_def</span></a></a><span class="hs-special">)</span><span>
</span><a name="line-442"></a><span>     </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><a href="TyCoRep.html#ATyCon"><span class="hs-identifier hs-var">ATyCon</span></a><span> </span><a name="local-1628087208"><a href="#local-1628087208"><span class="hs-identifier">tc</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tc_iface_decl"><span class="hs-identifier hs-var">tc_iface_decl</span></a><span> </span><span class="hs-special">(</span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Just"><span class="hs-identifier hs-var">Just</span></a><span> </span><a href="#local-1628087205"><span class="hs-identifier hs-var">cls</span></a><span class="hs-special">)</span><span> </span><a href="#local-1628087176"><span class="hs-identifier hs-var">ignore_prags</span></a><span> </span><a href="#local-1628087206"><span class="hs-identifier hs-var">tc_decl</span></a><span>
</span><a name="line-443"></a><span>          </span><a name="local-1628087211"><a href="#local-1628087211"><span class="hs-identifier">mb_def</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="#local-1628087207"><span class="hs-identifier hs-var">if_def</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-444"></a><span>                      </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a><span>
</span><a name="line-445"></a><span>                      </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Just"><span class="hs-identifier hs-var">Just</span></a><span> </span><a name="local-1628087209"><a href="#local-1628087209"><span class="hs-identifier">def</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnMonad.html#forkM"><span class="hs-identifier hs-var">forkM</span></a><span> </span><span class="hs-special">(</span><a href="#local-1628087191"><span class="hs-identifier hs-var">mk_at_doc</span></a><span> </span><a href="#local-1628087208"><span class="hs-identifier hs-var">tc</span></a><span class="hs-special">)</span><span>                 </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span>
</span><a name="line-446"></a><span>                                  </span><a href="IfaceEnv.html#extendIfaceTyVarEnv"><span class="hs-identifier hs-var">extendIfaceTyVarEnv</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier">tyConTyVars</span><span> </span><a href="#local-1628087208"><span class="hs-identifier hs-var">tc</span></a><span class="hs-special">)</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span>
</span><a name="line-447"></a><span>                                  </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><a name="local-1628087210"><a href="#local-1628087210"><span class="hs-identifier">tc_def</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tcIfaceType"><span class="hs-identifier hs-var">tcIfaceType</span></a><span> </span><a href="#local-1628087209"><span class="hs-identifier hs-var">def</span></a><span>
</span><a name="line-448"></a><span>                                     </span><span class="hs-special">;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Just"><span class="hs-identifier hs-var">Just</span></a><span> </span><span class="hs-special">(</span><a href="#local-1628087210"><span class="hs-identifier hs-var">tc_def</span></a><span class="hs-special">,</span><span> </span><a href="SrcLoc.html#noSrcSpan"><span class="hs-identifier hs-var">noSrcSpan</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-449"></a><span>                  </span><span class="hs-comment">-- Must be done lazily in case the RHS of the defaults mention</span><span>
</span><a name="line-450"></a><span>                  </span><span class="hs-comment">-- the type constructor being defined here</span><span>
</span><a name="line-451"></a><span>                  </span><span class="hs-comment">-- e.g.   type AT a; type AT b = AT [b]   Trac #8002</span><span>
</span><a name="line-452"></a><span>          </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="Class.html#ATI"><span class="hs-identifier hs-var">ATI</span></a><span> </span><a href="#local-1628087208"><span class="hs-identifier hs-var">tc</span></a><span> </span><a href="#local-1628087211"><span class="hs-identifier hs-var">mb_def</span></a><span class="hs-special">)</span><span>
</span><a name="line-453"></a><span>
</span><a name="line-454"></a><span>   </span><a name="local-1628087190"><a href="#local-1628087190"><span class="hs-identifier">mk_sc_doc</span></a></a><span> </span><a name="local-1628087212"><a href="#local-1628087212"><span class="hs-identifier">pred</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;Superclass&quot;</span><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1628087212"><span class="hs-identifier hs-var">pred</span></a><span>
</span><a name="line-455"></a><span>   </span><a name="local-1628087191"><a href="#local-1628087191"><span class="hs-identifier">mk_at_doc</span></a></a><span> </span><a name="local-1628087213"><a href="#local-1628087213"><span class="hs-identifier">tc</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;Associated type&quot;</span><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1628087213"><span class="hs-identifier hs-var">tc</span></a><span>
</span><a name="line-456"></a><span>   </span><a name="local-1628087192"><a href="#local-1628087192"><span class="hs-identifier">mk_op_doc</span></a></a><span> </span><a name="local-1628087214"><a href="#local-1628087214"><span class="hs-identifier">op_name</span></a></a><span> </span><a name="local-1628087215"><a href="#local-1628087215"><span class="hs-identifier">op_ty</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;Class op&quot;</span><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a><span> </span><span class="hs-special">[</span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1628087214"><span class="hs-identifier hs-var">op_name</span></a><span class="hs-special">,</span><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1628087215"><span class="hs-identifier hs-var">op_ty</span></a><span class="hs-special">]</span><span>
</span><a name="line-457"></a><span>
</span><a name="line-458"></a><span>   </span><a name="local-1628087193"><a href="#local-1628087193"><span class="hs-identifier">tc_fd</span></a></a><span> </span><span class="hs-special">(</span><a name="local-1628087216"><a href="#local-1628087216"><span class="hs-identifier">tvs1</span></a></a><span class="hs-special">,</span><span> </span><a name="local-1628087217"><a href="#local-1628087217"><span class="hs-identifier">tvs2</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><a name="local-1628087218"><a href="#local-1628087218"><span class="hs-identifier">tvs1'</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a><span> </span><a href="IfaceEnv.html#tcIfaceTyVar"><span class="hs-identifier hs-var">tcIfaceTyVar</span></a><span> </span><a href="#local-1628087216"><span class="hs-identifier hs-var">tvs1</span></a><span>
</span><a name="line-459"></a><span>                           </span><span class="hs-special">;</span><span> </span><a name="local-1628087219"><a href="#local-1628087219"><span class="hs-identifier">tvs2'</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a><span> </span><a href="IfaceEnv.html#tcIfaceTyVar"><span class="hs-identifier hs-var">tcIfaceTyVar</span></a><span> </span><a href="#local-1628087217"><span class="hs-identifier hs-var">tvs2</span></a><span>
</span><a name="line-460"></a><span>                           </span><span class="hs-special">;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="#local-1628087218"><span class="hs-identifier hs-var">tvs1'</span></a><span class="hs-special">,</span><span> </span><a href="#local-1628087219"><span class="hs-identifier hs-var">tvs2'</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-461"></a><span>
</span><a name="line-462"></a><span class="hs-identifier">tc_iface_decl</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><a href="IfaceSyn.html#IfaceAxiom"><span class="hs-identifier hs-var">IfaceAxiom</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">ifName</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087230"><a href="#local-1628087230"><span class="hs-identifier">ax_occ</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">ifTyCon</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087231"><a href="#local-1628087231"><span class="hs-identifier">tc</span></a></a><span>
</span><a name="line-463"></a><span>                              </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">ifAxBranches</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087232"><a href="#local-1628087232"><span class="hs-identifier">branches</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">ifRole</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087233"><a href="#local-1628087233"><span class="hs-identifier">role</span></a></a><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><a name="line-464"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><a name="local-1628087234"><a href="#local-1628087234"><span class="hs-identifier">tc_name</span></a></a><span>     </span><span class="hs-glyph">&lt;-</span><span> </span><a href="IfaceEnv.html#lookupIfaceTop"><span class="hs-identifier hs-var">lookupIfaceTop</span></a><span> </span><a href="#local-1628087230"><span class="hs-identifier hs-var">ax_occ</span></a><span>
</span><a name="line-465"></a><span>       </span><span class="hs-special">;</span><span> </span><a name="local-1628087235"><a href="#local-1628087235"><span class="hs-identifier">tc_tycon</span></a></a><span>    </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tcIfaceTyCon"><span class="hs-identifier hs-var">tcIfaceTyCon</span></a><span> </span><a href="#local-1628087231"><span class="hs-identifier hs-var">tc</span></a><span>
</span><a name="line-466"></a><span>       </span><span class="hs-special">;</span><span> </span><a name="local-1628087236"><a href="#local-1628087236"><span class="hs-identifier">tc_branches</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tc_ax_branches"><span class="hs-identifier hs-var">tc_ax_branches</span></a><span> </span><a href="#local-1628087232"><span class="hs-identifier hs-var">branches</span></a><span>
</span><a name="line-467"></a><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><a name="local-1628087237"><a href="#local-1628087237"><span class="hs-identifier">axiom</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="CoAxiom.html#CoAxiom"><span class="hs-identifier hs-var">CoAxiom</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">co_ax_unique</span><span>   </span><span class="hs-glyph">=</span><span> </span><a href="Name.html#nameUnique"><span class="hs-identifier hs-var">nameUnique</span></a><span> </span><a href="#local-1628087234"><span class="hs-identifier hs-var">tc_name</span></a><span>
</span><a name="line-468"></a><span>                             </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">co_ax_name</span><span>     </span><span class="hs-glyph">=</span><span> </span><a href="#local-1628087234"><span class="hs-identifier hs-var">tc_name</span></a><span>
</span><a name="line-469"></a><span>                             </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">co_ax_tc</span><span>       </span><span class="hs-glyph">=</span><span> </span><a href="#local-1628087235"><span class="hs-identifier hs-var">tc_tycon</span></a><span>
</span><a name="line-470"></a><span>                             </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">co_ax_role</span><span>     </span><span class="hs-glyph">=</span><span> </span><a href="#local-1628087233"><span class="hs-identifier hs-var">role</span></a><span>
</span><a name="line-471"></a><span>                             </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">co_ax_branches</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="CoAxiom.html#manyBranches"><span class="hs-identifier hs-var">manyBranches</span></a><span> </span><a href="#local-1628087236"><span class="hs-identifier hs-var">tc_branches</span></a><span>
</span><a name="line-472"></a><span>                             </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">co_ax_implicit</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">False</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-473"></a><span>       </span><span class="hs-special">;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="TyCoRep.html#ACoAxiom"><span class="hs-identifier hs-var">ACoAxiom</span></a><span> </span><a href="#local-1628087237"><span class="hs-identifier hs-var">axiom</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-474"></a><span>
</span><a name="line-475"></a><span class="hs-identifier">tc_iface_decl</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><a href="IfaceSyn.html#IfacePatSyn"><span class="hs-identifier hs-var">IfacePatSyn</span></a><span class="hs-special">{</span><span> </span><span class="hs-identifier">ifName</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087238"><a href="#local-1628087238"><span class="hs-identifier">occ_name</span></a></a><span>
</span><a name="line-476"></a><span>                              </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">ifPatMatcher</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087239"><a href="#local-1628087239"><span class="hs-identifier">if_matcher</span></a></a><span>
</span><a name="line-477"></a><span>                              </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">ifPatBuilder</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087240"><a href="#local-1628087240"><span class="hs-identifier">if_builder</span></a></a><span>
</span><a name="line-478"></a><span>                              </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">ifPatIsInfix</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087241"><a href="#local-1628087241"><span class="hs-identifier">is_infix</span></a></a><span>
</span><a name="line-479"></a><span>                              </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">ifPatUnivTvs</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087242"><a href="#local-1628087242"><span class="hs-identifier">univ_tvs</span></a></a><span>
</span><a name="line-480"></a><span>                              </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">ifPatExTvs</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087243"><a href="#local-1628087243"><span class="hs-identifier">ex_tvs</span></a></a><span>
</span><a name="line-481"></a><span>                              </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">ifPatProvCtxt</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087244"><a href="#local-1628087244"><span class="hs-identifier">prov_ctxt</span></a></a><span>
</span><a name="line-482"></a><span>                              </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">ifPatReqCtxt</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087245"><a href="#local-1628087245"><span class="hs-identifier">req_ctxt</span></a></a><span>
</span><a name="line-483"></a><span>                              </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">ifPatArgs</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087246"><a href="#local-1628087246"><span class="hs-identifier">args</span></a></a><span>
</span><a name="line-484"></a><span>                              </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">ifPatTy</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087247"><a href="#local-1628087247"><span class="hs-identifier">pat_ty</span></a></a><span>
</span><a name="line-485"></a><span>                              </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">ifFieldLabels</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087248"><a href="#local-1628087248"><span class="hs-identifier">field_labels</span></a></a><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><a name="line-486"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><a name="local-1628087255"><a href="#local-1628087255"><span class="hs-identifier">name</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="IfaceEnv.html#lookupIfaceTop"><span class="hs-identifier hs-var">lookupIfaceTop</span></a><span> </span><a href="#local-1628087238"><span class="hs-identifier hs-var">occ_name</span></a><span>
</span><a name="line-487"></a><span>       </span><span class="hs-special">;</span><span> </span><a href="TcRnMonad.html#traceIf"><span class="hs-identifier hs-var">traceIf</span></a><span> </span><span class="hs-special">(</span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;tc_iface_decl&quot;</span><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1628087255"><span class="hs-identifier hs-var">name</span></a><span class="hs-special">)</span><span>
</span><a name="line-488"></a><span>       </span><span class="hs-special">;</span><span> </span><a name="local-1628087256"><a href="#local-1628087256"><span class="hs-identifier">matcher</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="#local-1628087250"><span class="hs-identifier hs-var">tc_pr</span></a><span> </span><a href="#local-1628087239"><span class="hs-identifier hs-var">if_matcher</span></a><span>
</span><a name="line-489"></a><span>       </span><span class="hs-special">;</span><span> </span><a name="local-1628087257"><a href="#local-1628087257"><span class="hs-identifier">builder</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="MonadUtils.html#fmapMaybeM"><span class="hs-identifier hs-var">fmapMaybeM</span></a><span> </span><a href="#local-1628087250"><span class="hs-identifier hs-var">tc_pr</span></a><span> </span><a href="#local-1628087240"><span class="hs-identifier hs-var">if_builder</span></a><span>
</span><a name="line-490"></a><span>       </span><span class="hs-special">;</span><span> </span><a href="TcIface.html#bindIfaceTvBndrs"><span class="hs-identifier hs-var">bindIfaceTvBndrs</span></a><span> </span><a href="#local-1628087242"><span class="hs-identifier hs-var">univ_tvs</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><span class="hs-glyph">\</span><a name="local-1628087258"><a href="#local-1628087258"><span class="hs-identifier">univ_tvs</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-491"></a><span>       </span><span class="hs-special">{</span><span> </span><a href="TcIface.html#bindIfaceTvBndrs"><span class="hs-identifier hs-var">bindIfaceTvBndrs</span></a><span> </span><a href="#local-1628087243"><span class="hs-identifier hs-var">ex_tvs</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><span class="hs-glyph">\</span><a name="local-1628087259"><a href="#local-1628087259"><span class="hs-identifier">ex_tvs</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-492"></a><span>       </span><span class="hs-special">{</span><span> </span><a name="local-1628087264"><a href="#local-1628087264"><span class="hs-identifier">patsyn</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcRnMonad.html#forkM"><span class="hs-identifier hs-var">forkM</span></a><span> </span><span class="hs-special">(</span><a href="#local-1628087249"><span class="hs-identifier hs-var">mk_doc</span></a><span> </span><a href="#local-1628087255"><span class="hs-identifier hs-var">name</span></a><span class="hs-special">)</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span>
</span><a name="line-493"></a><span>             </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><a name="local-1628087260"><a href="#local-1628087260"><span class="hs-identifier">prov_theta</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tcIfaceCtxt"><span class="hs-identifier hs-var">tcIfaceCtxt</span></a><span> </span><a href="#local-1628087244"><span class="hs-identifier hs-var">prov_ctxt</span></a><span>
</span><a name="line-494"></a><span>                </span><span class="hs-special">;</span><span> </span><a name="local-1628087261"><a href="#local-1628087261"><span class="hs-identifier">req_theta</span></a></a><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tcIfaceCtxt"><span class="hs-identifier hs-var">tcIfaceCtxt</span></a><span> </span><a href="#local-1628087245"><span class="hs-identifier hs-var">req_ctxt</span></a><span>
</span><a name="line-495"></a><span>                </span><span class="hs-special">;</span><span> </span><a name="local-1628087262"><a href="#local-1628087262"><span class="hs-identifier">pat_ty</span></a></a><span>     </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tcIfaceType"><span class="hs-identifier hs-var">tcIfaceType</span></a><span> </span><a href="#local-1628087247"><span class="hs-identifier hs-var">pat_ty</span></a><span>
</span><a name="line-496"></a><span>                </span><span class="hs-special">;</span><span> </span><a name="local-1628087263"><a href="#local-1628087263"><span class="hs-identifier">arg_tys</span></a></a><span>    </span><span class="hs-glyph">&lt;-</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a><span> </span><a href="TcIface.html#tcIfaceType"><span class="hs-identifier hs-var">tcIfaceType</span></a><span> </span><a href="#local-1628087246"><span class="hs-identifier hs-var">args</span></a><span>
</span><a name="line-497"></a><span>                </span><span class="hs-special">;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><a href="BuildTyCl.html#buildPatSyn"><span class="hs-identifier hs-var">buildPatSyn</span></a><span> </span><a href="#local-1628087255"><span class="hs-identifier hs-var">name</span></a><span> </span><a href="#local-1628087241"><span class="hs-identifier hs-var">is_infix</span></a><span> </span><a href="#local-1628087256"><span class="hs-identifier hs-var">matcher</span></a><span> </span><a href="#local-1628087257"><span class="hs-identifier hs-var">builder</span></a><span>
</span><a name="line-498"></a><span>                                       </span><span class="hs-special">(</span><a href="#local-1628087258"><span class="hs-identifier hs-var">univ_tvs</span></a><span class="hs-special">,</span><span> </span><a href="#local-1628087261"><span class="hs-identifier hs-var">req_theta</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><a href="#local-1628087259"><span class="hs-identifier hs-var">ex_tvs</span></a><span class="hs-special">,</span><span> </span><a href="#local-1628087260"><span class="hs-identifier hs-var">prov_theta</span></a><span class="hs-special">)</span><span>
</span><a name="line-499"></a><span>                                       </span><a href="#local-1628087263"><span class="hs-identifier hs-var">arg_tys</span></a><span> </span><a href="#local-1628087262"><span class="hs-identifier hs-var">pat_ty</span></a><span> </span><a href="#local-1628087248"><span class="hs-identifier hs-var">field_labels</span></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-500"></a><span>       </span><span class="hs-special">;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><a href="TyCoRep.html#AConLike"><span class="hs-identifier hs-var">AConLike</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a><span> </span><a href="ConLike.html#PatSynCon"><span class="hs-identifier hs-var">PatSynCon</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><a href="#local-1628087264"><span class="hs-identifier hs-var">patsyn</span></a><span> </span><span class="hs-special">}</span><span class="hs-special">}</span><span class="hs-special">}</span><span>
</span><a name="line-501"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-502"></a><span>     </span><a name="local-1628087249"><a href="#local-1628087249"><span class="hs-identifier">mk_doc</span></a></a><span> </span><a name="local-1628087251"><a href="#local-1628087251"><span class="hs-identifier">n</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;Pattern synonym&quot;</span><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1628087251"><span class="hs-identifier hs-var">n</span></a><span>
</span><a name="line-503"></a><span>     </span><span class="hs-identifier">tc_pr</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><a href="IfaceType.html#IfExtName"><span class="hs-identifier hs-type">IfExtName</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Bool</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><span class="hs-special">(</span><a href="Var.html#Id"><span class="hs-identifier hs-type">Id</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Bool</span><span class="hs-special">)</span><span>
</span><a name="line-504"></a><span>     </span><a name="local-1628087250"><a href="#local-1628087250"><span class="hs-identifier">tc_pr</span></a></a><span> </span><span class="hs-special">(</span><a name="local-1628087252"><a href="#local-1628087252"><span class="hs-identifier">nm</span></a></a><span class="hs-special">,</span><span> </span><a name="local-1628087253"><a href="#local-1628087253"><span class="hs-identifier">b</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><a name="local-1628087254"><a href="#local-1628087254"><span class="hs-identifier">id</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcRnMonad.html#forkM"><span class="hs-identifier hs-var">forkM</span></a><span> </span><span class="hs-special">(</span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1628087252"><span class="hs-identifier hs-var">nm</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><a href="TcIface.html#tcIfaceExtId"><span class="hs-identifier hs-var">tcIfaceExtId</span></a><span> </span><a href="#local-1628087252"><span class="hs-identifier hs-var">nm</span></a><span class="hs-special">)</span><span>
</span><a name="line-505"></a><span>                        </span><span class="hs-special">;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="#local-1628087254"><span class="hs-identifier hs-var">id</span></a><span class="hs-special">,</span><span> </span><a href="#local-1628087253"><span class="hs-identifier hs-var">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-506"></a><span>
</span><a name="line-507"></a><span class="hs-identifier">tc_ax_branches</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><a href="IfaceSyn.html#IfaceAxBranch"><span class="hs-identifier hs-type">IfaceAxBranch</span></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><span class="hs-special">[</span><a href="CoAxiom.html#CoAxBranch"><span class="hs-identifier hs-type">CoAxBranch</span></a><span class="hs-special">]</span><span>
</span><a name="line-508"></a><a name="tc_ax_branches"><a href="TcIface.html#tc_ax_branches"><span class="hs-identifier">tc_ax_branches</span></a></a><span> </span><a name="local-1628087265"><a href="#local-1628087265"><span class="hs-identifier">if_branches</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="MonadUtils.html#foldlM"><span class="hs-identifier hs-var">foldlM</span></a><span> </span><a href="TcIface.html#tc_ax_branch"><span class="hs-identifier hs-var">tc_ax_branch</span></a><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><a href="#local-1628087265"><span class="hs-identifier hs-var">if_branches</span></a><span>
</span><a name="line-509"></a><span>
</span><a name="line-510"></a><span class="hs-identifier">tc_ax_branch</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><a href="CoAxiom.html#CoAxBranch"><span class="hs-identifier hs-type">CoAxBranch</span></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="IfaceSyn.html#IfaceAxBranch"><span class="hs-identifier hs-type">IfaceAxBranch</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><span class="hs-special">[</span><a href="CoAxiom.html#CoAxBranch"><span class="hs-identifier hs-type">CoAxBranch</span></a><span class="hs-special">]</span><span>
</span><a name="line-511"></a><a name="tc_ax_branch"><a href="TcIface.html#tc_ax_branch"><span class="hs-identifier">tc_ax_branch</span></a></a><span> </span><a name="local-1628087266"><a href="#local-1628087266"><span class="hs-identifier">prev_branches</span></a></a><span>
</span><a name="line-512"></a><span>             </span><span class="hs-special">(</span><a href="IfaceSyn.html#IfaceAxBranch"><span class="hs-identifier hs-var">IfaceAxBranch</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">ifaxbTyVars</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087267"><a href="#local-1628087267"><span class="hs-identifier">tv_bndrs</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">ifaxbCoVars</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087268"><a href="#local-1628087268"><span class="hs-identifier">cv_bndrs</span></a></a><span>
</span><a name="line-513"></a><span>                            </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">ifaxbLHS</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087269"><a href="#local-1628087269"><span class="hs-identifier">lhs</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">ifaxbRHS</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087270"><a href="#local-1628087270"><span class="hs-identifier">rhs</span></a></a><span>
</span><a name="line-514"></a><span>                            </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">ifaxbRoles</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087271"><a href="#local-1628087271"><span class="hs-identifier">roles</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">ifaxbIncomps</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087272"><a href="#local-1628087272"><span class="hs-identifier">incomps</span></a></a><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><a name="line-515"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="TcIface.html#bindIfaceTyConBinders_AT"><span class="hs-identifier hs-var">bindIfaceTyConBinders_AT</span></a><span>
</span><a name="line-516"></a><span>      </span><span class="hs-special">(</span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><a name="local-1628087273"><a href="#local-1628087273"><span class="hs-identifier">b</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="IfaceType.html#IfaceNamed"><span class="hs-identifier hs-var">IfaceNamed</span></a><span> </span><span class="hs-special">(</span><a href="IfaceType.html#IfaceTv"><span class="hs-identifier hs-var">IfaceTv</span></a><span> </span><a href="#local-1628087273"><span class="hs-identifier hs-var">b</span></a><span> </span><a href="TyCoRep.html#Invisible"><span class="hs-identifier hs-var">Invisible</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><a href="#local-1628087267"><span class="hs-identifier hs-var">tv_bndrs</span></a><span class="hs-special">)</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><span class="hs-glyph">\</span><span> </span><a name="local-1628087274"><a href="#local-1628087274"><span class="hs-identifier">tvs</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-517"></a><span>         </span><span class="hs-comment">-- The _AT variant is needed here; see Note [CoAxBranch type variables] in CoAxiom</span><span>
</span><a name="line-518"></a><span>    </span><a href="TcIface.html#bindIfaceIds"><span class="hs-identifier hs-var">bindIfaceIds</span></a><span> </span><a href="#local-1628087268"><span class="hs-identifier hs-var">cv_bndrs</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><span class="hs-glyph">\</span><span> </span><a name="local-1628087275"><a href="#local-1628087275"><span class="hs-identifier">cvs</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-519"></a><span>    </span><span class="hs-special">{</span><span> </span><a name="local-1628087276"><a href="#local-1628087276"><span class="hs-identifier">tc_lhs</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tcIfaceTcArgs"><span class="hs-identifier hs-var">tcIfaceTcArgs</span></a><span> </span><a href="#local-1628087269"><span class="hs-identifier hs-var">lhs</span></a><span>
</span><a name="line-520"></a><span>    </span><span class="hs-special">;</span><span> </span><a name="local-1628087277"><a href="#local-1628087277"><span class="hs-identifier">tc_rhs</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tcIfaceType"><span class="hs-identifier hs-var">tcIfaceType</span></a><span> </span><a href="#local-1628087270"><span class="hs-identifier hs-var">rhs</span></a><span>
</span><a name="line-521"></a><span>    </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><a name="local-1628087278"><a href="#local-1628087278"><span class="hs-identifier">br</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="CoAxiom.html#CoAxBranch"><span class="hs-identifier hs-var">CoAxBranch</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">cab_loc</span><span>     </span><span class="hs-glyph">=</span><span> </span><a href="SrcLoc.html#noSrcSpan"><span class="hs-identifier hs-var">noSrcSpan</span></a><span>
</span><a name="line-522"></a><span>                          </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">cab_tvs</span><span>     </span><span class="hs-glyph">=</span><span> </span><a href="#local-1628087274"><span class="hs-identifier hs-var">tvs</span></a><span>
</span><a name="line-523"></a><span>                          </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">cab_cvs</span><span>     </span><span class="hs-glyph">=</span><span> </span><a href="#local-1628087275"><span class="hs-identifier hs-var">cvs</span></a><span>
</span><a name="line-524"></a><span>                          </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">cab_lhs</span><span>     </span><span class="hs-glyph">=</span><span> </span><a href="#local-1628087276"><span class="hs-identifier hs-var">tc_lhs</span></a><span>
</span><a name="line-525"></a><span>                          </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">cab_roles</span><span>   </span><span class="hs-glyph">=</span><span> </span><a href="#local-1628087271"><span class="hs-identifier hs-var">roles</span></a><span>
</span><a name="line-526"></a><span>                          </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">cab_rhs</span><span>     </span><span class="hs-glyph">=</span><span> </span><a href="#local-1628087277"><span class="hs-identifier hs-var">tc_rhs</span></a><span>
</span><a name="line-527"></a><span>                          </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">cab_incomps</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a><span> </span><span class="hs-special">(</span><a href="#local-1628087266"><span class="hs-identifier hs-var">prev_branches</span></a><span> </span><span class="hs-special">`</span><a href="ListSetOps.html#getNth"><span class="hs-identifier hs-var">getNth</span></a><span class="hs-special">`</span><span class="hs-special">)</span><span> </span><a href="#local-1628087272"><span class="hs-identifier hs-var">incomps</span></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-528"></a><span>    </span><span class="hs-special">;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="#local-1628087266"><span class="hs-identifier hs-var">prev_branches</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a><span> </span><span class="hs-special">[</span><a href="#local-1628087278"><span class="hs-identifier hs-var">br</span></a><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-529"></a><span>
</span><a name="line-530"></a><span class="hs-identifier">tcIfaceDataCons</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Name.html#Name"><span class="hs-identifier hs-type">Name</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TyCon.html#TyCon"><span class="hs-identifier hs-type">TyCon</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><a href="Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="IfaceSyn.html#IfaceConDecls"><span class="hs-identifier hs-type">IfaceConDecls</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><a href="TyCon.html#AlgTyConRhs"><span class="hs-identifier hs-type">AlgTyConRhs</span></a><span>
</span><a name="line-531"></a><a name="tcIfaceDataCons"><a href="TcIface.html#tcIfaceDataCons"><span class="hs-identifier">tcIfaceDataCons</span></a></a><span> </span><a name="local-1628087279"><a href="#local-1628087279"><span class="hs-identifier">tycon_name</span></a></a><span> </span><a name="local-1628087280"><a href="#local-1628087280"><span class="hs-identifier">tycon</span></a></a><span> </span><a name="local-1628087281"><a href="#local-1628087281"><span class="hs-identifier">tc_tyvars</span></a></a><span> </span><a name="local-1628087282"><a href="#local-1628087282"><span class="hs-identifier">if_cons</span></a></a><span>
</span><a name="line-532"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="#local-1628087282"><span class="hs-identifier hs-var">if_cons</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-533"></a><span>        </span><a href="IfaceSyn.html#IfAbstractTyCon"><span class="hs-identifier hs-var">IfAbstractTyCon</span></a><span> </span><a name="local-1628087320"><a href="#local-1628087320"><span class="hs-identifier">dis</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="TyCon.html#AbstractTyCon"><span class="hs-identifier hs-var">AbstractTyCon</span></a><span> </span><a href="#local-1628087320"><span class="hs-identifier hs-var">dis</span></a><span class="hs-special">)</span><span>
</span><a name="line-534"></a><span>        </span><a href="IfaceSyn.html#IfDataTyCon"><span class="hs-identifier hs-var">IfDataTyCon</span></a><span> </span><a name="local-1628087321"><a href="#local-1628087321"><span class="hs-identifier">cons</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><a name="local-1628087322"><a href="#local-1628087322"><span class="hs-identifier">field_lbls</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a><span> </span><span class="hs-special">(</span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Traversable.html#traverse"><span class="hs-identifier hs-var">traverse</span></a><span> </span><a href="IfaceEnv.html#lookupIfaceTop"><span class="hs-identifier hs-var">lookupIfaceTop</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><a href="IfaceSyn.html#ifaceConDeclFields"><span class="hs-identifier hs-var">ifaceConDeclFields</span></a><span> </span><a href="#local-1628087282"><span class="hs-identifier hs-var">if_cons</span></a><span class="hs-special">)</span><span>
</span><a name="line-535"></a><span>                                    </span><span class="hs-special">;</span><span> </span><a name="local-1628087323"><a href="#local-1628087323"><span class="hs-identifier">data_cons</span></a></a><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a><span> </span><span class="hs-special">(</span><a href="#local-1628087283"><span class="hs-identifier hs-var">tc_con_decl</span></a><span> </span><a href="#local-1628087322"><span class="hs-identifier hs-var">field_lbls</span></a><span class="hs-special">)</span><span> </span><a href="#local-1628087321"><span class="hs-identifier hs-var">cons</span></a><span>
</span><a name="line-536"></a><span>                                    </span><span class="hs-special">;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="BuildTyCl.html#mkDataTyConRhs"><span class="hs-identifier hs-var">mkDataTyConRhs</span></a><span> </span><a href="#local-1628087323"><span class="hs-identifier hs-var">data_cons</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-537"></a><span>        </span><a href="IfaceSyn.html#IfNewTyCon"><span class="hs-identifier hs-var">IfNewTyCon</span></a><span>  </span><a name="local-1628087324"><a href="#local-1628087324"><span class="hs-identifier">con</span></a></a><span>  </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><a name="local-1628087325"><a href="#local-1628087325"><span class="hs-identifier">field_lbls</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a><span> </span><span class="hs-special">(</span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Traversable.html#traverse"><span class="hs-identifier hs-var">traverse</span></a><span> </span><a href="IfaceEnv.html#lookupIfaceTop"><span class="hs-identifier hs-var">lookupIfaceTop</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><a href="IfaceSyn.html#ifaceConDeclFields"><span class="hs-identifier hs-var">ifaceConDeclFields</span></a><span> </span><a href="#local-1628087282"><span class="hs-identifier hs-var">if_cons</span></a><span class="hs-special">)</span><span>
</span><a name="line-538"></a><span>                                    </span><span class="hs-special">;</span><span> </span><a name="local-1628087326"><a href="#local-1628087326"><span class="hs-identifier">data_con</span></a></a><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><a href="#local-1628087283"><span class="hs-identifier hs-var">tc_con_decl</span></a><span> </span><a href="#local-1628087325"><span class="hs-identifier hs-var">field_lbls</span></a><span> </span><a href="#local-1628087324"><span class="hs-identifier hs-var">con</span></a><span>
</span><a name="line-539"></a><span>                                    </span><span class="hs-special">;</span><span> </span><a href="BuildTyCl.html#mkNewTyConRhs"><span class="hs-identifier hs-var">mkNewTyConRhs</span></a><span> </span><a href="#local-1628087279"><span class="hs-identifier hs-var">tycon_name</span></a><span> </span><a href="#local-1628087280"><span class="hs-identifier hs-var">tycon</span></a><span> </span><a href="#local-1628087326"><span class="hs-identifier hs-var">data_con</span></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-540"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-541"></a><span>    </span><a name="local-1628087283"><a href="#local-1628087283"><span class="hs-identifier">tc_con_decl</span></a></a><span> </span><a name="local-1628087287"><a href="#local-1628087287"><span class="hs-identifier">field_lbls</span></a></a><span> </span><span class="hs-special">(</span><a href="IfaceSyn.html#IfCon"><span class="hs-identifier hs-var">IfCon</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">ifConInfix</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087288"><a href="#local-1628087288"><span class="hs-identifier">is_infix</span></a></a><span class="hs-special">,</span><span>
</span><a name="line-542"></a><span>                         </span><span class="hs-identifier">ifConExTvs</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087289"><a href="#local-1628087289"><span class="hs-identifier">ex_tvs</span></a></a><span class="hs-special">,</span><span>
</span><a name="line-543"></a><span>                         </span><span class="hs-identifier">ifConOcc</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087290"><a href="#local-1628087290"><span class="hs-identifier">occ</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">ifConCtxt</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087291"><a href="#local-1628087291"><span class="hs-identifier">ctxt</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">ifConEqSpec</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087292"><a href="#local-1628087292"><span class="hs-identifier">spec</span></a></a><span class="hs-special">,</span><span>
</span><a name="line-544"></a><span>                         </span><span class="hs-identifier">ifConArgTys</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087293"><a href="#local-1628087293"><span class="hs-identifier">args</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">ifConFields</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087294"><a href="#local-1628087294"><span class="hs-identifier">my_lbls</span></a></a><span class="hs-special">,</span><span>
</span><a name="line-545"></a><span>                         </span><span class="hs-identifier">ifConStricts</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087295"><a href="#local-1628087295"><span class="hs-identifier">if_stricts</span></a></a><span class="hs-special">,</span><span>
</span><a name="line-546"></a><span>                         </span><span class="hs-identifier">ifConSrcStricts</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087296"><a href="#local-1628087296"><span class="hs-identifier">if_src_stricts</span></a></a><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><a name="line-547"></a><span>     </span><span class="hs-glyph">=</span><span> </span><span class="hs-comment">-- Universally-quantified tyvars are shared with</span><span>
</span><a name="line-548"></a><span>       </span><span class="hs-comment">-- parent TyCon, and are alrady in scope</span><span>
</span><a name="line-549"></a><span>       </span><a href="TcIface.html#bindIfaceTvBndrs"><span class="hs-identifier hs-var">bindIfaceTvBndrs</span></a><span> </span><a href="#local-1628087289"><span class="hs-identifier hs-var">ex_tvs</span></a><span>    </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><span class="hs-glyph">\</span><span> </span><a name="local-1628087297"><a href="#local-1628087297"><span class="hs-identifier">ex_tyvars</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-550"></a><span>        </span><span class="hs-special">{</span><span> </span><a href="TcRnMonad.html#traceIf"><span class="hs-identifier hs-var">traceIf</span></a><span> </span><span class="hs-special">(</span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;Start interface-file tc_con_decl&quot;</span><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1628087290"><span class="hs-identifier hs-var">occ</span></a><span class="hs-special">)</span><span>
</span><a name="line-551"></a><span>        </span><span class="hs-special">;</span><span> </span><a name="local-1628087298"><a href="#local-1628087298"><span class="hs-identifier">dc_name</span></a></a><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><a href="IfaceEnv.html#lookupIfaceTop"><span class="hs-identifier hs-var">lookupIfaceTop</span></a><span> </span><a href="#local-1628087290"><span class="hs-identifier hs-var">occ</span></a><span>
</span><a name="line-552"></a><span>
</span><a name="line-553"></a><span>        </span><span class="hs-comment">-- Read the context and argument types, but lazily for two reasons</span><span>
</span><a name="line-554"></a><span>        </span><span class="hs-comment">-- (a) to avoid looking tugging on a recursive use of</span><span>
</span><a name="line-555"></a><span>        </span><span class="hs-comment">--     the type itself, which is knot-tied</span><span>
</span><a name="line-556"></a><span>        </span><span class="hs-comment">-- (b) to avoid faulting in the component types unless</span><span>
</span><a name="line-557"></a><span>        </span><span class="hs-comment">--     they are really needed</span><span>
</span><a name="line-558"></a><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-glyph">~</span><span class="hs-special">(</span><a name="local-1628087303"><a href="#local-1628087303"><span class="hs-identifier">eq_spec</span></a></a><span class="hs-special">,</span><span> </span><a name="local-1628087304"><a href="#local-1628087304"><span class="hs-identifier">theta</span></a></a><span class="hs-special">,</span><span> </span><a name="local-1628087305"><a href="#local-1628087305"><span class="hs-identifier">arg_tys</span></a></a><span class="hs-special">,</span><span> </span><a name="local-1628087306"><a href="#local-1628087306"><span class="hs-identifier">stricts</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcRnMonad.html#forkM"><span class="hs-identifier hs-var">forkM</span></a><span> </span><span class="hs-special">(</span><a href="#local-1628087284"><span class="hs-identifier hs-var">mk_doc</span></a><span> </span><a href="#local-1628087298"><span class="hs-identifier hs-var">dc_name</span></a><span class="hs-special">)</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span>
</span><a name="line-559"></a><span>             </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><a name="local-1628087299"><a href="#local-1628087299"><span class="hs-identifier">eq_spec</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tcIfaceEqSpec"><span class="hs-identifier hs-var">tcIfaceEqSpec</span></a><span> </span><a href="#local-1628087292"><span class="hs-identifier hs-var">spec</span></a><span>
</span><a name="line-560"></a><span>                </span><span class="hs-special">;</span><span> </span><a name="local-1628087300"><a href="#local-1628087300"><span class="hs-identifier">theta</span></a></a><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tcIfaceCtxt"><span class="hs-identifier hs-var">tcIfaceCtxt</span></a><span> </span><a href="#local-1628087291"><span class="hs-identifier hs-var">ctxt</span></a><span>
</span><a name="line-561"></a><span>                </span><span class="hs-special">;</span><span> </span><a name="local-1628087301"><a href="#local-1628087301"><span class="hs-identifier">arg_tys</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a><span> </span><a href="TcIface.html#tcIfaceType"><span class="hs-identifier hs-var">tcIfaceType</span></a><span> </span><a href="#local-1628087293"><span class="hs-identifier hs-var">args</span></a><span>
</span><a name="line-562"></a><span>                </span><span class="hs-special">;</span><span> </span><a name="local-1628087302"><a href="#local-1628087302"><span class="hs-identifier">stricts</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a><span> </span><a href="#local-1628087285"><span class="hs-identifier hs-var">tc_strict</span></a><span> </span><a href="#local-1628087295"><span class="hs-identifier hs-var">if_stricts</span></a><span>
</span><a name="line-563"></a><span>                        </span><span class="hs-comment">-- The IfBang field can mention</span><span>
</span><a name="line-564"></a><span>                        </span><span class="hs-comment">-- the type itself; hence inside forkM</span><span>
</span><a name="line-565"></a><span>                </span><span class="hs-special">;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="#local-1628087299"><span class="hs-identifier hs-var">eq_spec</span></a><span class="hs-special">,</span><span> </span><a href="#local-1628087300"><span class="hs-identifier hs-var">theta</span></a><span class="hs-special">,</span><span> </span><a href="#local-1628087301"><span class="hs-identifier hs-var">arg_tys</span></a><span class="hs-special">,</span><span> </span><a href="#local-1628087302"><span class="hs-identifier hs-var">stricts</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-566"></a><span>
</span><a name="line-567"></a><span>        </span><span class="hs-comment">-- Look up the field labels for this constructor; note that</span><span>
</span><a name="line-568"></a><span>        </span><span class="hs-comment">-- they should be in the same order as my_lbls!</span><span>
</span><a name="line-569"></a><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><a name="local-1628087307"><a href="#local-1628087307"><span class="hs-identifier">lbl_names</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a><span> </span><a href="#local-1628087308"><span class="hs-identifier hs-var">find_lbl</span></a><span> </span><a href="#local-1628087294"><span class="hs-identifier hs-var">my_lbls</span></a><span>
</span><a name="line-570"></a><span>              </span><a name="local-1628087308"><a href="#local-1628087308"><span class="hs-identifier">find_lbl</span></a></a><span> </span><a name="local-1628087309"><a href="#local-1628087309"><span class="hs-identifier">x</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Foldable.html#find"><span class="hs-identifier hs-var">find</span></a><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><a name="local-1628087310"><a href="#local-1628087310"><span class="hs-identifier">fl</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Name.html#nameOccName"><span class="hs-identifier hs-var">nameOccName</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier">flSelector</span><span> </span><a href="#local-1628087310"><span class="hs-identifier hs-var">fl</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">==</span><span> </span><a href="#local-1628087309"><span class="hs-identifier hs-var">x</span></a><span class="hs-special">)</span><span> </span><a href="#local-1628087287"><span class="hs-identifier hs-var">field_lbls</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-571"></a><span>                             </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Just"><span class="hs-identifier hs-var">Just</span></a><span> </span><a name="local-1628087311"><a href="#local-1628087311"><span class="hs-identifier">fl</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-1628087311"><span class="hs-identifier hs-var">fl</span></a><span>
</span><a name="line-572"></a><span>                             </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Err.html#error"><span class="hs-identifier hs-var">error</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><span class="hs-string">&quot;find_lbl missing &quot;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a><span> </span><a href="OccName.html#occNameString"><span class="hs-identifier hs-var">occNameString</span></a><span> </span><a href="#local-1628087309"><span class="hs-identifier hs-var">x</span></a><span>
</span><a name="line-573"></a><span>
</span><a name="line-574"></a><span>        </span><span class="hs-comment">-- Remember, tycon is the representation tycon</span><span>
</span><a name="line-575"></a><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><a name="local-1628087312"><a href="#local-1628087312"><span class="hs-identifier">orig_res_ty</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Type.html#mkFamilyTyConApp"><span class="hs-identifier hs-var">mkFamilyTyConApp</span></a><span> </span><a href="#local-1628087280"><span class="hs-identifier hs-var">tycon</span></a><span>
</span><a name="line-576"></a><span>                                </span><span class="hs-special">(</span><a href="TyCoRep.html#substTyVars"><span class="hs-identifier hs-var">substTyVars</span></a><span> </span><span class="hs-special">(</span><a href="TyCoRep.html#mkTvSubstPrs"><span class="hs-identifier hs-var">mkTvSubstPrs</span></a><span> </span><span class="hs-special">(</span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a><span> </span><a href="DataCon.html#eqSpecPair"><span class="hs-identifier hs-var">eqSpecPair</span></a><span> </span><a href="#local-1628087303"><span class="hs-identifier hs-var">eq_spec</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-577"></a><span>                                             </span><a href="#local-1628087281"><span class="hs-identifier hs-var">tc_tyvars</span></a><span class="hs-special">)</span><span>
</span><a name="line-578"></a><span>
</span><a name="line-579"></a><span>        </span><span class="hs-special">;</span><span> </span><a name="local-1628087313"><a href="#local-1628087313"><span class="hs-identifier">prom_rep_name</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="BuildTyCl.html#newTyConRepName"><span class="hs-identifier hs-var">newTyConRepName</span></a><span> </span><a href="#local-1628087298"><span class="hs-identifier hs-var">dc_name</span></a><span>
</span><a name="line-580"></a><span>
</span><a name="line-581"></a><span>        </span><span class="hs-special">;</span><span> </span><a name="local-1628087314"><a href="#local-1628087314"><span class="hs-identifier">con</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="BuildTyCl.html#buildDataCon"><span class="hs-identifier hs-var">buildDataCon</span></a><span> </span><span class="hs-special">(</span><a href="Outputable.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a><span> </span><span class="hs-string">&quot;tcIfaceDataCons: FamInstEnvs&quot;</span><span> </span><span class="hs-special">(</span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1628087298"><span class="hs-identifier hs-var">dc_name</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-582"></a><span>                       </span><a href="#local-1628087298"><span class="hs-identifier hs-var">dc_name</span></a><span> </span><a href="#local-1628087288"><span class="hs-identifier hs-var">is_infix</span></a><span> </span><a href="#local-1628087313"><span class="hs-identifier hs-var">prom_rep_name</span></a><span>
</span><a name="line-583"></a><span>                       </span><span class="hs-special">(</span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a><span> </span><a href="#local-1628087286"><span class="hs-identifier hs-var">src_strict</span></a><span> </span><a href="#local-1628087296"><span class="hs-identifier hs-var">if_src_stricts</span></a><span class="hs-special">)</span><span>
</span><a name="line-584"></a><span>                       </span><span class="hs-special">(</span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Just"><span class="hs-identifier hs-var">Just</span></a><span> </span><a href="#local-1628087306"><span class="hs-identifier hs-var">stricts</span></a><span class="hs-special">)</span><span>
</span><a name="line-585"></a><span>                       </span><span class="hs-comment">-- Pass the HsImplBangs (i.e. final</span><span>
</span><a name="line-586"></a><span>                       </span><span class="hs-comment">-- decisions) to buildDataCon; it'll use</span><span>
</span><a name="line-587"></a><span>                       </span><span class="hs-comment">-- these to guide the construction of a</span><span>
</span><a name="line-588"></a><span>                       </span><span class="hs-comment">-- worker.</span><span>
</span><a name="line-589"></a><span>                       </span><span class="hs-comment">-- See Note [Bangs on imported data constructors] in MkId</span><span>
</span><a name="line-590"></a><span>                       </span><a href="#local-1628087307"><span class="hs-identifier hs-var">lbl_names</span></a><span>
</span><a name="line-591"></a><span>                       </span><a href="#local-1628087281"><span class="hs-identifier hs-var">tc_tyvars</span></a><span> </span><a href="#local-1628087297"><span class="hs-identifier hs-var">ex_tyvars</span></a><span>
</span><a name="line-592"></a><span>                       </span><a href="#local-1628087303"><span class="hs-identifier hs-var">eq_spec</span></a><span> </span><a href="#local-1628087304"><span class="hs-identifier hs-var">theta</span></a><span>
</span><a name="line-593"></a><span>                       </span><a href="#local-1628087305"><span class="hs-identifier hs-var">arg_tys</span></a><span> </span><a href="#local-1628087312"><span class="hs-identifier hs-var">orig_res_ty</span></a><span> </span><a href="#local-1628087280"><span class="hs-identifier hs-var">tycon</span></a><span>
</span><a name="line-594"></a><span>        </span><span class="hs-special">;</span><span> </span><a href="TcRnMonad.html#traceIf"><span class="hs-identifier hs-var">traceIf</span></a><span> </span><span class="hs-special">(</span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;Done interface-file tc_con_decl&quot;</span><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1628087298"><span class="hs-identifier hs-var">dc_name</span></a><span class="hs-special">)</span><span>
</span><a name="line-595"></a><span>        </span><span class="hs-special">;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><a href="#local-1628087314"><span class="hs-identifier hs-var">con</span></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-596"></a><span>    </span><a name="local-1628087284"><a href="#local-1628087284"><span class="hs-identifier">mk_doc</span></a></a><span> </span><a name="local-1628087315"><a href="#local-1628087315"><span class="hs-identifier">con_name</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;Constructor&quot;</span><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1628087315"><span class="hs-identifier hs-var">con_name</span></a><span>
</span><a name="line-597"></a><span>
</span><a name="line-598"></a><span>    </span><span class="hs-identifier">tc_strict</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="IfaceSyn.html#IfaceBang"><span class="hs-identifier hs-type">IfaceBang</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><a href="DataCon.html#HsImplBang"><span class="hs-identifier hs-type">HsImplBang</span></a><span>
</span><a name="line-599"></a><span>    </span><a name="local-1628087285"><a href="#local-1628087285"><span class="hs-identifier">tc_strict</span></a></a><span> </span><a href="IfaceSyn.html#IfNoBang"><span class="hs-identifier hs-var">IfNoBang</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="DataCon.html#HsLazy"><span class="hs-identifier hs-var">HsLazy</span></a><span class="hs-special">)</span><span>
</span><a name="line-600"></a><span>    </span><span class="hs-identifier">tc_strict</span><span> </span><a href="IfaceSyn.html#IfStrict"><span class="hs-identifier hs-var">IfStrict</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="DataCon.html#HsStrict"><span class="hs-identifier hs-var">HsStrict</span></a><span class="hs-special">)</span><span>
</span><a name="line-601"></a><span>    </span><span class="hs-identifier">tc_strict</span><span> </span><a href="IfaceSyn.html#IfUnpack"><span class="hs-identifier hs-var">IfUnpack</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="DataCon.html#HsUnpack"><span class="hs-identifier hs-var">HsUnpack</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a><span class="hs-special">)</span><span>
</span><a name="line-602"></a><span>    </span><span class="hs-identifier">tc_strict</span><span> </span><span class="hs-special">(</span><a href="IfaceSyn.html#IfUnpackCo"><span class="hs-identifier hs-var">IfUnpackCo</span></a><span> </span><a name="local-1628087316"><a href="#local-1628087316"><span class="hs-identifier">if_co</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><a name="local-1628087317"><a href="#local-1628087317"><span class="hs-identifier">co</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tcIfaceCo"><span class="hs-identifier hs-var">tcIfaceCo</span></a><span> </span><a href="#local-1628087316"><span class="hs-identifier hs-var">if_co</span></a><span>
</span><a name="line-603"></a><span>                                      </span><span class="hs-special">;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="DataCon.html#HsUnpack"><span class="hs-identifier hs-var">HsUnpack</span></a><span> </span><span class="hs-special">(</span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Just"><span class="hs-identifier hs-var">Just</span></a><span> </span><a href="#local-1628087317"><span class="hs-identifier hs-var">co</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-604"></a><span>
</span><a name="line-605"></a><span>    </span><span class="hs-identifier">src_strict</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="IfaceSyn.html#IfaceSrcBang"><span class="hs-identifier hs-type">IfaceSrcBang</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="DataCon.html#HsSrcBang"><span class="hs-identifier hs-type">HsSrcBang</span></a><span>
</span><a name="line-606"></a><span>    </span><a name="local-1628087286"><a href="#local-1628087286"><span class="hs-identifier">src_strict</span></a></a><span> </span><span class="hs-special">(</span><a href="IfaceSyn.html#IfSrcBang"><span class="hs-identifier hs-var">IfSrcBang</span></a><span> </span><a name="local-1628087318"><a href="#local-1628087318"><span class="hs-identifier">unpk</span></a></a><span> </span><a name="local-1628087319"><a href="#local-1628087319"><span class="hs-identifier">bang</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="DataCon.html#HsSrcBang"><span class="hs-identifier hs-var">HsSrcBang</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a><span> </span><a href="#local-1628087318"><span class="hs-identifier hs-var">unpk</span></a><span> </span><a href="#local-1628087319"><span class="hs-identifier hs-var">bang</span></a><span>
</span><a name="line-607"></a><span>
</span><a name="line-608"></a><span class="hs-identifier">tcIfaceEqSpec</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="IfaceSyn.html#IfaceEqSpec"><span class="hs-identifier hs-type">IfaceEqSpec</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><span class="hs-special">[</span><a href="DataCon.html#EqSpec"><span class="hs-identifier hs-type">EqSpec</span></a><span class="hs-special">]</span><span>
</span><a name="line-609"></a><a name="tcIfaceEqSpec"><a href="TcIface.html#tcIfaceEqSpec"><span class="hs-identifier">tcIfaceEqSpec</span></a></a><span> </span><a name="local-1628087327"><a href="#local-1628087327"><span class="hs-identifier">spec</span></a></a><span>
</span><a name="line-610"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a><span> </span><a href="#local-1628087328"><span class="hs-identifier hs-var">do_item</span></a><span> </span><a href="#local-1628087327"><span class="hs-identifier hs-var">spec</span></a><span>
</span><a name="line-611"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-612"></a><span>    </span><a name="local-1628087328"><a href="#local-1628087328"><span class="hs-identifier">do_item</span></a></a><span> </span><span class="hs-special">(</span><a name="local-1628087329"><a href="#local-1628087329"><span class="hs-identifier">occ</span></a></a><span class="hs-special">,</span><span> </span><a name="local-1628087330"><a href="#local-1628087330"><span class="hs-identifier">if_ty</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><a name="local-1628087331"><a href="#local-1628087331"><span class="hs-identifier">tv</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="IfaceEnv.html#tcIfaceTyVar"><span class="hs-identifier hs-var">tcIfaceTyVar</span></a><span> </span><a href="#local-1628087329"><span class="hs-identifier hs-var">occ</span></a><span>
</span><a name="line-613"></a><span>                              </span><span class="hs-special">;</span><span> </span><a name="local-1628087332"><a href="#local-1628087332"><span class="hs-identifier">ty</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tcIfaceType"><span class="hs-identifier hs-var">tcIfaceType</span></a><span> </span><a href="#local-1628087330"><span class="hs-identifier hs-var">if_ty</span></a><span>
</span><a name="line-614"></a><span>                              </span><span class="hs-special">;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="DataCon.html#mkEqSpec"><span class="hs-identifier hs-var">mkEqSpec</span></a><span> </span><a href="#local-1628087331"><span class="hs-identifier hs-var">tv</span></a><span> </span><a href="#local-1628087332"><span class="hs-identifier hs-var">ty</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-615"></a><span>
</span><a name="line-616"></a><span class="hs-comment">{-
Note [Synonym kind loop]
~~~~~~~~~~~~~~~~~~~~~~~~
Notice that we eagerly grab the *kind* from the interface file, but
build a forkM thunk for the *rhs* (and family stuff).  To see why,
consider this (Trac #2412)

M.hs:       module M where { import X; data T = MkT S }
X.hs:       module X where { import {-# SOURCE #-} M; type S = T }
M.hs-boot:  module M where { data T }

When kind-checking M.hs we need S's kind.  But we do not want to
find S's kind from (typeKind S-rhs), because we don't want to look at
S-rhs yet!  Since S is imported from X.hi, S gets just one chance to
be defined, and we must not do that until we've finished with M.T.

Solution: record S's kind in the interface file; now we can safely
look at it.

************************************************************************
*                                                                      *
                Instances
*                                                                      *
************************************************************************
-}</span><span>
</span><a name="line-641"></a><span>
</span><a name="line-642"></a><span class="hs-identifier">tcIfaceInst</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="IfaceSyn.html#IfaceClsInst"><span class="hs-identifier hs-type">IfaceClsInst</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><a href="InstEnv.html#ClsInst"><span class="hs-identifier hs-type">ClsInst</span></a><span>
</span><a name="line-643"></a><a name="tcIfaceInst"><a href="TcIface.html#tcIfaceInst"><span class="hs-identifier">tcIfaceInst</span></a></a><span> </span><span class="hs-special">(</span><a href="IfaceSyn.html#IfaceClsInst"><span class="hs-identifier hs-var">IfaceClsInst</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">ifDFun</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087333"><a href="#local-1628087333"><span class="hs-identifier">dfun_occ</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">ifOFlag</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087334"><a href="#local-1628087334"><span class="hs-identifier">oflag</span></a></a><span>
</span><a name="line-644"></a><span>                          </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">ifInstCls</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087335"><a href="#local-1628087335"><span class="hs-identifier">cls</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">ifInstTys</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087336"><a href="#local-1628087336"><span class="hs-identifier">mb_tcs</span></a></a><span>
</span><a name="line-645"></a><span>                          </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">ifInstOrph</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087337"><a href="#local-1628087337"><span class="hs-identifier">orph</span></a></a><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><a name="line-646"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><a name="local-1628087338"><a href="#local-1628087338"><span class="hs-identifier">dfun</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcRnMonad.html#forkM"><span class="hs-identifier hs-var">forkM</span></a><span> </span><span class="hs-special">(</span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;Dict fun&quot;</span><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1628087333"><span class="hs-identifier hs-var">dfun_occ</span></a><span class="hs-special">)</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span>
</span><a name="line-647"></a><span>                 </span><a href="TcIface.html#tcIfaceExtId"><span class="hs-identifier hs-var">tcIfaceExtId</span></a><span> </span><a href="#local-1628087333"><span class="hs-identifier hs-var">dfun_occ</span></a><span>
</span><a name="line-648"></a><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><a name="local-1628087339"><a href="#local-1628087339"><span class="hs-identifier">mb_tcs'</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a><span> </span><span class="hs-special">(</span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a><span> </span><span class="hs-identifier">ifaceTyConName</span><span class="hs-special">)</span><span> </span><a href="#local-1628087336"><span class="hs-identifier hs-var">mb_tcs</span></a><span>
</span><a name="line-649"></a><span>       </span><span class="hs-special">;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="InstEnv.html#mkImportedInstance"><span class="hs-identifier hs-var">mkImportedInstance</span></a><span> </span><a href="#local-1628087335"><span class="hs-identifier hs-var">cls</span></a><span> </span><a href="#local-1628087339"><span class="hs-identifier hs-var">mb_tcs'</span></a><span> </span><a href="#local-1628087338"><span class="hs-identifier hs-var">dfun</span></a><span> </span><a href="#local-1628087334"><span class="hs-identifier hs-var">oflag</span></a><span> </span><a href="#local-1628087337"><span class="hs-identifier hs-var">orph</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-650"></a><span>
</span><a name="line-651"></a><span class="hs-identifier">tcIfaceFamInst</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="IfaceSyn.html#IfaceFamInst"><span class="hs-identifier hs-type">IfaceFamInst</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><a href="FamInstEnv.html#FamInst"><span class="hs-identifier hs-type">FamInst</span></a><span>
</span><a name="line-652"></a><a name="tcIfaceFamInst"><a href="TcIface.html#tcIfaceFamInst"><span class="hs-identifier">tcIfaceFamInst</span></a></a><span> </span><span class="hs-special">(</span><a href="IfaceSyn.html#IfaceFamInst"><span class="hs-identifier hs-var">IfaceFamInst</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">ifFamInstFam</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087340"><a href="#local-1628087340"><span class="hs-identifier">fam</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">ifFamInstTys</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087341"><a href="#local-1628087341"><span class="hs-identifier">mb_tcs</span></a></a><span>
</span><a name="line-653"></a><span>                             </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">ifFamInstAxiom</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087342"><a href="#local-1628087342"><span class="hs-identifier">axiom_name</span></a></a><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">)</span><span>
</span><a name="line-654"></a><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><a name="local-1628087343"><a href="#local-1628087343"><span class="hs-identifier">axiom'</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcRnMonad.html#forkM"><span class="hs-identifier hs-var">forkM</span></a><span> </span><span class="hs-special">(</span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;Axiom&quot;</span><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1628087342"><span class="hs-identifier hs-var">axiom_name</span></a><span class="hs-special">)</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span>
</span><a name="line-655"></a><span>                     </span><a href="TcIface.html#tcIfaceCoAxiom"><span class="hs-identifier hs-var">tcIfaceCoAxiom</span></a><span> </span><a href="#local-1628087342"><span class="hs-identifier hs-var">axiom_name</span></a><span>
</span><a name="line-656"></a><span>             </span><span class="hs-comment">-- will panic if branched, but that's OK</span><span>
</span><a name="line-657"></a><span>         </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><a name="local-1628087344"><a href="#local-1628087344"><span class="hs-identifier">axiom''</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="CoAxiom.html#toUnbranchedAxiom"><span class="hs-identifier hs-var">toUnbranchedAxiom</span></a><span> </span><a href="#local-1628087343"><span class="hs-identifier hs-var">axiom'</span></a><span>
</span><a name="line-658"></a><span>               </span><a name="local-1628087345"><a href="#local-1628087345"><span class="hs-identifier">mb_tcs'</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a><span> </span><span class="hs-special">(</span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a><span> </span><span class="hs-identifier">ifaceTyConName</span><span class="hs-special">)</span><span> </span><a href="#local-1628087341"><span class="hs-identifier hs-var">mb_tcs</span></a><span>
</span><a name="line-659"></a><span>         </span><span class="hs-special">;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="FamInstEnv.html#mkImportedFamInst"><span class="hs-identifier hs-var">mkImportedFamInst</span></a><span> </span><a href="#local-1628087340"><span class="hs-identifier hs-var">fam</span></a><span> </span><a href="#local-1628087345"><span class="hs-identifier hs-var">mb_tcs'</span></a><span> </span><a href="#local-1628087344"><span class="hs-identifier hs-var">axiom''</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-660"></a><span>
</span><a name="line-661"></a><span class="hs-comment">{-
************************************************************************
*                                                                      *
                Rules
*                                                                      *
************************************************************************

We move a IfaceRule from eps_rules to eps_rule_base when all its LHS free vars
are in the type environment.  However, remember that typechecking a Rule may
(as a side effect) augment the type envt, and so we may need to iterate the process.
-}</span><span>
</span><a name="line-672"></a><span>
</span><a name="line-673"></a><span class="hs-identifier">tcIfaceRules</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>            </span><span class="hs-comment">-- True &lt;=&gt; ignore rules</span><span>
</span><a name="line-674"></a><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><a href="IfaceSyn.html#IfaceRule"><span class="hs-identifier hs-type">IfaceRule</span></a><span class="hs-special">]</span><span>
</span><a name="line-675"></a><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><span class="hs-special">[</span><a href="CoreSyn.html#CoreRule"><span class="hs-identifier hs-type">CoreRule</span></a><span class="hs-special">]</span><span>
</span><a name="line-676"></a><a name="tcIfaceRules"><a href="TcIface.html#tcIfaceRules"><span class="hs-identifier">tcIfaceRules</span></a></a><span> </span><a name="local-1628087346"><a href="#local-1628087346"><span class="hs-identifier">ignore_prags</span></a></a><span> </span><a name="local-1628087347"><a href="#local-1628087347"><span class="hs-identifier">if_rules</span></a></a><span>
</span><a name="line-677"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a href="#local-1628087346"><span class="hs-identifier hs-var">ignore_prags</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><a name="line-678"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a><span>    </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a><span> </span><a href="TcIface.html#tcIfaceRule"><span class="hs-identifier hs-var">tcIfaceRule</span></a><span> </span><a href="#local-1628087347"><span class="hs-identifier hs-var">if_rules</span></a><span>
</span><a name="line-679"></a><span>
</span><a name="line-680"></a><span class="hs-identifier">tcIfaceRule</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="IfaceSyn.html#IfaceRule"><span class="hs-identifier hs-type">IfaceRule</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><a href="CoreSyn.html#CoreRule"><span class="hs-identifier hs-type">CoreRule</span></a><span>
</span><a name="line-681"></a><a name="tcIfaceRule"><a href="TcIface.html#tcIfaceRule"><span class="hs-identifier">tcIfaceRule</span></a></a><span> </span><span class="hs-special">(</span><a href="IfaceSyn.html#IfaceRule"><span class="hs-identifier hs-var">IfaceRule</span></a><span> </span><span class="hs-special">{</span><span class="hs-identifier">ifRuleName</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087348"><a href="#local-1628087348"><span class="hs-identifier">name</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">ifActivation</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087349"><a href="#local-1628087349"><span class="hs-identifier">act</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">ifRuleBndrs</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087350"><a href="#local-1628087350"><span class="hs-identifier">bndrs</span></a></a><span class="hs-special">,</span><span>
</span><a name="line-682"></a><span>                        </span><span class="hs-identifier">ifRuleHead</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087351"><a href="#local-1628087351"><span class="hs-identifier">fn</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">ifRuleArgs</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087352"><a href="#local-1628087352"><span class="hs-identifier">args</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">ifRuleRhs</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087353"><a href="#local-1628087353"><span class="hs-identifier">rhs</span></a></a><span class="hs-special">,</span><span>
</span><a name="line-683"></a><span>                        </span><span class="hs-identifier">ifRuleAuto</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087354"><a href="#local-1628087354"><span class="hs-identifier">auto</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">ifRuleOrph</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087355"><a href="#local-1628087355"><span class="hs-identifier">orph</span></a></a><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><a name="line-684"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-glyph">~</span><span class="hs-special">(</span><a name="local-1628087365"><a href="#local-1628087365"><span class="hs-identifier">bndrs'</span></a></a><span class="hs-special">,</span><span> </span><a name="local-1628087366"><a href="#local-1628087366"><span class="hs-identifier">args'</span></a></a><span class="hs-special">,</span><span> </span><a name="local-1628087367"><a href="#local-1628087367"><span class="hs-identifier">rhs'</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><a name="line-685"></a><span>                </span><span class="hs-comment">-- Typecheck the payload lazily, in the hope it'll never be looked at</span><span>
</span><a name="line-686"></a><span>                </span><a href="TcRnMonad.html#forkM"><span class="hs-identifier hs-var">forkM</span></a><span> </span><span class="hs-special">(</span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;Rule&quot;</span><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="BasicTypes.html#pprRuleName"><span class="hs-identifier hs-var">pprRuleName</span></a><span> </span><a href="#local-1628087348"><span class="hs-identifier hs-var">name</span></a><span class="hs-special">)</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span>
</span><a name="line-687"></a><span>                </span><a href="TcIface.html#bindIfaceBndrs"><span class="hs-identifier hs-var">bindIfaceBndrs</span></a><span> </span><a href="#local-1628087350"><span class="hs-identifier hs-var">bndrs</span></a><span>                      </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><span class="hs-glyph">\</span><span> </span><a name="local-1628087362"><a href="#local-1628087362"><span class="hs-identifier">bndrs'</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-688"></a><span>                </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><a name="local-1628087363"><a href="#local-1628087363"><span class="hs-identifier">args'</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a><span> </span><a href="TcIface.html#tcIfaceExpr"><span class="hs-identifier hs-var">tcIfaceExpr</span></a><span> </span><a href="#local-1628087352"><span class="hs-identifier hs-var">args</span></a><span>
</span><a name="line-689"></a><span>                   </span><span class="hs-special">;</span><span> </span><a name="local-1628087364"><a href="#local-1628087364"><span class="hs-identifier">rhs'</span></a></a><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tcIfaceExpr"><span class="hs-identifier hs-var">tcIfaceExpr</span></a><span> </span><a href="#local-1628087353"><span class="hs-identifier hs-var">rhs</span></a><span>
</span><a name="line-690"></a><span>                   </span><span class="hs-special">;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="#local-1628087362"><span class="hs-identifier hs-var">bndrs'</span></a><span class="hs-special">,</span><span> </span><a href="#local-1628087363"><span class="hs-identifier hs-var">args'</span></a><span class="hs-special">,</span><span> </span><a href="#local-1628087364"><span class="hs-identifier hs-var">rhs'</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-691"></a><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><a name="local-1628087368"><a href="#local-1628087368"><span class="hs-identifier">mb_tcs</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a><span> </span><a href="#local-1628087356"><span class="hs-identifier hs-var">ifTopFreeName</span></a><span> </span><a href="#local-1628087352"><span class="hs-identifier hs-var">args</span></a><span>
</span><a name="line-692"></a><span>        </span><span class="hs-special">;</span><span> </span><a name="local-1628087369"><a href="#local-1628087369"><span class="hs-identifier">this_mod</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcRnMonad.html#getIfModule"><span class="hs-identifier hs-var">getIfModule</span></a><span>
</span><a name="line-693"></a><span>        </span><span class="hs-special">;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="CoreSyn.html#Rule"><span class="hs-identifier hs-var">Rule</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">ru_name</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1628087348"><span class="hs-identifier hs-var">name</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">ru_fn</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1628087351"><span class="hs-identifier hs-var">fn</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">ru_act</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1628087349"><span class="hs-identifier hs-var">act</span></a><span class="hs-special">,</span><span>
</span><a name="line-694"></a><span>                          </span><span class="hs-identifier">ru_bndrs</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1628087365"><span class="hs-identifier hs-var">bndrs'</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">ru_args</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1628087366"><span class="hs-identifier hs-var">args'</span></a><span class="hs-special">,</span><span>
</span><a name="line-695"></a><span>                          </span><span class="hs-identifier">ru_rhs</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="OccurAnal.html#occurAnalyseExpr"><span class="hs-identifier hs-var">occurAnalyseExpr</span></a><span> </span><a href="#local-1628087367"><span class="hs-identifier hs-var">rhs'</span></a><span class="hs-special">,</span><span>
</span><a name="line-696"></a><span>                          </span><span class="hs-identifier">ru_rough</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1628087368"><span class="hs-identifier hs-var">mb_tcs</span></a><span class="hs-special">,</span><span>
</span><a name="line-697"></a><span>                          </span><span class="hs-identifier">ru_origin</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1628087369"><span class="hs-identifier hs-var">this_mod</span></a><span class="hs-special">,</span><span>
</span><a name="line-698"></a><span>                          </span><span class="hs-identifier">ru_orphan</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1628087355"><span class="hs-identifier hs-var">orph</span></a><span class="hs-special">,</span><span>
</span><a name="line-699"></a><span>                          </span><span class="hs-identifier">ru_auto</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1628087354"><span class="hs-identifier hs-var">auto</span></a><span class="hs-special">,</span><span>
</span><a name="line-700"></a><span>                          </span><span class="hs-identifier">ru_local</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">False</span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-comment">-- An imported RULE is never for a local Id</span><span>
</span><a name="line-701"></a><span>                                                </span><span class="hs-comment">-- or, even if it is (module loop, perhaps)</span><span>
</span><a name="line-702"></a><span>                                                </span><span class="hs-comment">-- we'll just leave it in the non-local set</span><span>
</span><a name="line-703"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-704"></a><span>        </span><span class="hs-comment">-- This function *must* mirror exactly what Rules.roughTopNames does</span><span>
</span><a name="line-705"></a><span>        </span><span class="hs-comment">-- We could have stored the ru_rough field in the iface file</span><span>
</span><a name="line-706"></a><span>        </span><span class="hs-comment">-- but that would be redundant, I think.</span><span>
</span><a name="line-707"></a><span>        </span><span class="hs-comment">-- The only wrinkle is that we must not be deceived by</span><span>
</span><a name="line-708"></a><span>        </span><span class="hs-comment">-- type synonyms at the top of a type arg.  Since</span><span>
</span><a name="line-709"></a><span>        </span><span class="hs-comment">-- we can't tell at this point, we are careful not</span><span>
</span><a name="line-710"></a><span>        </span><span class="hs-comment">-- to write them out in coreRuleToIfaceRule</span><span>
</span><a name="line-711"></a><span>    </span><span class="hs-identifier">ifTopFreeName</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="IfaceSyn.html#IfaceExpr"><span class="hs-identifier hs-type">IfaceExpr</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a><span> </span><a href="Name.html#Name"><span class="hs-identifier hs-type">Name</span></a><span>
</span><a name="line-712"></a><span>    </span><a name="local-1628087356"><a href="#local-1628087356"><span class="hs-identifier">ifTopFreeName</span></a></a><span> </span><span class="hs-special">(</span><a href="IfaceSyn.html#IfaceType"><span class="hs-identifier hs-var">IfaceType</span></a><span> </span><span class="hs-special">(</span><a href="IfaceType.html#IfaceTyConApp"><span class="hs-identifier hs-var">IfaceTyConApp</span></a><span> </span><a name="local-1628087357"><a href="#local-1628087357"><span class="hs-identifier">tc</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Just"><span class="hs-identifier hs-var">Just</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier">ifaceTyConName</span><span> </span><a href="#local-1628087357"><span class="hs-identifier hs-var">tc</span></a><span class="hs-special">)</span><span>
</span><a name="line-713"></a><span>    </span><span class="hs-identifier">ifTopFreeName</span><span> </span><span class="hs-special">(</span><a href="IfaceSyn.html#IfaceType"><span class="hs-identifier hs-var">IfaceType</span></a><span> </span><span class="hs-special">(</span><a href="IfaceType.html#IfaceTupleTy"><span class="hs-identifier hs-var">IfaceTupleTy</span></a><span> </span><a name="local-1628087358"><a href="#local-1628087358"><span class="hs-identifier">s</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-1628087359"><a href="#local-1628087359"><span class="hs-identifier">ts</span></a></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Just"><span class="hs-identifier hs-var">Just</span></a><span> </span><span class="hs-special">(</span><a href="TysWiredIn.html#tupleTyConName"><span class="hs-identifier hs-var">tupleTyConName</span></a><span> </span><a href="#local-1628087358"><span class="hs-identifier hs-var">s</span></a><span> </span><span class="hs-special">(</span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Foldable.html#length"><span class="hs-identifier hs-var">length</span></a><span> </span><span class="hs-special">(</span><a href="IfaceType.html#tcArgsIfaceTypes"><span class="hs-identifier hs-var">tcArgsIfaceTypes</span></a><span> </span><a href="#local-1628087359"><span class="hs-identifier hs-var">ts</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-714"></a><span>    </span><span class="hs-identifier">ifTopFreeName</span><span> </span><span class="hs-special">(</span><a href="IfaceSyn.html#IfaceApp"><span class="hs-identifier hs-var">IfaceApp</span></a><span> </span><a name="local-1628087360"><a href="#local-1628087360"><span class="hs-identifier">f</span></a></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span>                    </span><span class="hs-glyph">=</span><span> </span><a href="#local-1628087356"><span class="hs-identifier hs-var">ifTopFreeName</span></a><span> </span><a href="#local-1628087360"><span class="hs-identifier hs-var">f</span></a><span>
</span><a name="line-715"></a><span>    </span><span class="hs-identifier">ifTopFreeName</span><span> </span><span class="hs-special">(</span><a href="IfaceSyn.html#IfaceExt"><span class="hs-identifier hs-var">IfaceExt</span></a><span> </span><a name="local-1628087361"><a href="#local-1628087361"><span class="hs-identifier">n</span></a></a><span class="hs-special">)</span><span>                      </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Just"><span class="hs-identifier hs-var">Just</span></a><span> </span><a href="#local-1628087361"><span class="hs-identifier hs-var">n</span></a><span>
</span><a name="line-716"></a><span>    </span><span class="hs-identifier">ifTopFreeName</span><span> </span><span class="hs-identifier">_</span><span>                                 </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a><span>
</span><a name="line-717"></a><span>
</span><a name="line-718"></a><span class="hs-comment">{-
************************************************************************
*                                                                      *
                Annotations
*                                                                      *
************************************************************************
-}</span><span>
</span><a name="line-725"></a><span>
</span><a name="line-726"></a><span class="hs-identifier">tcIfaceAnnotations</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><a href="IfaceSyn.html#IfaceAnnotation"><span class="hs-identifier hs-type">IfaceAnnotation</span></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><span class="hs-special">[</span><a href="Annotations.html#Annotation"><span class="hs-identifier hs-type">Annotation</span></a><span class="hs-special">]</span><span>
</span><a name="line-727"></a><a name="tcIfaceAnnotations"><a href="TcIface.html#tcIfaceAnnotations"><span class="hs-identifier">tcIfaceAnnotations</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a><span> </span><a href="TcIface.html#tcIfaceAnnotation"><span class="hs-identifier hs-var">tcIfaceAnnotation</span></a><span>
</span><a name="line-728"></a><span>
</span><a name="line-729"></a><span class="hs-identifier">tcIfaceAnnotation</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="IfaceSyn.html#IfaceAnnotation"><span class="hs-identifier hs-type">IfaceAnnotation</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><a href="Annotations.html#Annotation"><span class="hs-identifier hs-type">Annotation</span></a><span>
</span><a name="line-730"></a><a name="tcIfaceAnnotation"><a href="TcIface.html#tcIfaceAnnotation"><span class="hs-identifier">tcIfaceAnnotation</span></a></a><span> </span><span class="hs-special">(</span><a href="IfaceSyn.html#IfaceAnnotation"><span class="hs-identifier hs-var">IfaceAnnotation</span></a><span> </span><a name="local-1628087370"><a href="#local-1628087370"><span class="hs-identifier">target</span></a></a><span> </span><a name="local-1628087371"><a href="#local-1628087371"><span class="hs-identifier">serialized</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-731"></a><span>    </span><a name="local-1628087372"><a href="#local-1628087372"><span class="hs-identifier">target'</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tcIfaceAnnTarget"><span class="hs-identifier hs-var">tcIfaceAnnTarget</span></a><span> </span><a href="#local-1628087370"><span class="hs-identifier hs-var">target</span></a><span>
</span><a name="line-732"></a><span>    </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><a href="Annotations.html#Annotation"><span class="hs-identifier hs-var">Annotation</span></a><span> </span><span class="hs-special">{</span><span>
</span><a name="line-733"></a><span>        </span><span class="hs-identifier">ann_target</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1628087372"><span class="hs-identifier hs-var">target'</span></a><span class="hs-special">,</span><span>
</span><a name="line-734"></a><span>        </span><span class="hs-identifier">ann_value</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1628087371"><span class="hs-identifier hs-var">serialized</span></a><span>
</span><a name="line-735"></a><span>    </span><span class="hs-special">}</span><span>
</span><a name="line-736"></a><span>
</span><a name="line-737"></a><span class="hs-identifier">tcIfaceAnnTarget</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="IfaceSyn.html#IfaceAnnTarget"><span class="hs-identifier hs-type">IfaceAnnTarget</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><span class="hs-special">(</span><a href="Annotations.html#AnnTarget"><span class="hs-identifier hs-type">AnnTarget</span></a><span> </span><a href="Name.html#Name"><span class="hs-identifier hs-type">Name</span></a><span class="hs-special">)</span><span>
</span><a name="line-738"></a><a name="tcIfaceAnnTarget"><a href="TcIface.html#tcIfaceAnnTarget"><span class="hs-identifier">tcIfaceAnnTarget</span></a></a><span> </span><span class="hs-special">(</span><a href="Annotations.html#NamedTarget"><span class="hs-identifier hs-var">NamedTarget</span></a><span> </span><a name="local-1628087373"><a href="#local-1628087373"><span class="hs-identifier">occ</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-739"></a><span>    </span><a name="local-1628087374"><a href="#local-1628087374"><span class="hs-identifier">name</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="IfaceEnv.html#lookupIfaceTop"><span class="hs-identifier hs-var">lookupIfaceTop</span></a><span> </span><a href="#local-1628087373"><span class="hs-identifier hs-var">occ</span></a><span>
</span><a name="line-740"></a><span>    </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><a href="Annotations.html#NamedTarget"><span class="hs-identifier hs-var">NamedTarget</span></a><span> </span><a href="#local-1628087374"><span class="hs-identifier hs-var">name</span></a><span>
</span><a name="line-741"></a><span class="hs-identifier">tcIfaceAnnTarget</span><span> </span><span class="hs-special">(</span><a href="Annotations.html#ModuleTarget"><span class="hs-identifier hs-var">ModuleTarget</span></a><span> </span><a name="local-1628087375"><a href="#local-1628087375"><span class="hs-identifier">mod</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-742"></a><span>    </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><a href="Annotations.html#ModuleTarget"><span class="hs-identifier hs-var">ModuleTarget</span></a><span> </span><a href="#local-1628087375"><span class="hs-identifier hs-var">mod</span></a><span>
</span><a name="line-743"></a><span>
</span><a name="line-744"></a><span class="hs-comment">{-
************************************************************************
*                                                                      *
                Vectorisation information
*                                                                      *
************************************************************************
-}</span><span>
</span><a name="line-751"></a><span>
</span><a name="line-752"></a><span class="hs-comment">-- We need access to the type environment as we need to look up information about type constructors</span><span>
</span><a name="line-753"></a><span class="hs-comment">-- (i.e., their data constructors and whether they are class type constructors).  If a vectorised</span><span>
</span><a name="line-754"></a><span class="hs-comment">-- type constructor or class is defined in the same module as where it is vectorised, we cannot</span><span>
</span><a name="line-755"></a><span class="hs-comment">-- look that information up from the type constructor that we obtained via a 'forkM'ed</span><span>
</span><a name="line-756"></a><span class="hs-comment">-- 'tcIfaceTyCon' without recursively loading the interface that we are already type checking again</span><span>
</span><a name="line-757"></a><span class="hs-comment">-- and again and again...</span><span>
</span><a name="line-758"></a><span class="hs-comment">--</span><span>
</span><a name="line-759"></a><span class="hs-identifier">tcIfaceVectInfo</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Module.html#Module"><span class="hs-identifier hs-type">Module</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="HscTypes.html#TypeEnv"><span class="hs-identifier hs-type">TypeEnv</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="HscTypes.html#IfaceVectInfo"><span class="hs-identifier hs-type">IfaceVectInfo</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><a href="HscTypes.html#VectInfo"><span class="hs-identifier hs-type">VectInfo</span></a><span>
</span><a name="line-760"></a><a name="tcIfaceVectInfo"><a href="TcIface.html#tcIfaceVectInfo"><span class="hs-identifier">tcIfaceVectInfo</span></a></a><span> </span><a name="local-1628087376"><a href="#local-1628087376"><span class="hs-identifier">mod</span></a></a><span> </span><a name="local-1628087377"><a href="#local-1628087377"><span class="hs-identifier">typeEnv</span></a></a><span> </span><span class="hs-special">(</span><a href="HscTypes.html#IfaceVectInfo"><span class="hs-identifier hs-var">IfaceVectInfo</span></a><span>
</span><a name="line-761"></a><span>                             </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">ifaceVectInfoVar</span><span>            </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087378"><a href="#local-1628087378"><span class="hs-identifier">vars</span></a></a><span>
</span><a name="line-762"></a><span>                             </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">ifaceVectInfoTyCon</span><span>          </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087379"><a href="#local-1628087379"><span class="hs-identifier">tycons</span></a></a><span>
</span><a name="line-763"></a><span>                             </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">ifaceVectInfoTyConReuse</span><span>     </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087380"><a href="#local-1628087380"><span class="hs-identifier">tyconsReuse</span></a></a><span>
</span><a name="line-764"></a><span>                             </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">ifaceVectInfoParallelVars</span><span>   </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087381"><a href="#local-1628087381"><span class="hs-identifier">parallelVars</span></a></a><span>
</span><a name="line-765"></a><span>                             </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">ifaceVectInfoParallelTyCons</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1628087382"><a href="#local-1628087382"><span class="hs-identifier">parallelTyCons</span></a></a><span>
</span><a name="line-766"></a><span>                             </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><a name="line-767"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-keyword">let</span><span> </span><a name="local-1628087418"><a href="#local-1628087418"><span class="hs-identifier">parallelTyConsSet</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="NameSet.html#mkNameSet"><span class="hs-identifier hs-var">mkNameSet</span></a><span> </span><a href="#local-1628087382"><span class="hs-identifier hs-var">parallelTyCons</span></a><span>
</span><a name="line-768"></a><span>       </span><span class="hs-special">;</span><span> </span><a name="local-1628087419"><a href="#local-1628087419"><span class="hs-identifier">vVars</span></a></a><span>         </span><span class="hs-glyph">&lt;-</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a><span> </span><a href="#local-1628087383"><span class="hs-identifier hs-var">vectVarMapping</span></a><span>                  </span><a href="#local-1628087378"><span class="hs-identifier hs-var">vars</span></a><span>
</span><a name="line-769"></a><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><a name="local-1628087420"><a href="#local-1628087420"><span class="hs-identifier">varsSet</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="VarSet.html#mkVarSet"><span class="hs-identifier hs-var">mkVarSet</span></a><span> </span><span class="hs-special">(</span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Tuple.html#fst"><span class="hs-identifier hs-var">fst</span></a><span> </span><a href="#local-1628087419"><span class="hs-identifier hs-var">vVars</span></a><span class="hs-special">)</span><span>
</span><a name="line-770"></a><span>       </span><span class="hs-special">;</span><span> </span><a name="local-1628087421"><a href="#local-1628087421"><span class="hs-identifier">tyConRes1</span></a></a><span>     </span><span class="hs-glyph">&lt;-</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a><span> </span><span class="hs-special">(</span><a href="#local-1628087385"><span class="hs-identifier hs-var">vectTyConVectMapping</span></a><span> </span><a href="#local-1628087420"><span class="hs-identifier hs-var">varsSet</span></a><span class="hs-special">)</span><span>  </span><a href="#local-1628087379"><span class="hs-identifier hs-var">tycons</span></a><span>
</span><a name="line-771"></a><span>       </span><span class="hs-special">;</span><span> </span><a name="local-1628087422"><a href="#local-1628087422"><span class="hs-identifier">tyConRes2</span></a></a><span>     </span><span class="hs-glyph">&lt;-</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a><span> </span><span class="hs-special">(</span><a href="#local-1628087386"><span class="hs-identifier hs-var">vectTyConReuseMapping</span></a><span> </span><a href="#local-1628087420"><span class="hs-identifier hs-var">varsSet</span></a><span class="hs-special">)</span><span> </span><a href="#local-1628087380"><span class="hs-identifier hs-var">tyconsReuse</span></a><span>
</span><a name="line-772"></a><span>       </span><span class="hs-special">;</span><span> </span><a name="local-1628087423"><a href="#local-1628087423"><span class="hs-identifier">vParallelVars</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a><span> </span><a href="#local-1628087384"><span class="hs-identifier hs-var">vectVar</span></a><span>                         </span><a href="#local-1628087381"><span class="hs-identifier hs-var">parallelVars</span></a><span>
</span><a name="line-773"></a><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><a name="local-1628087424"><a href="#local-1628087424"><span class="hs-identifier">vTyCons</span></a></a><span class="hs-special">,</span><span> </span><a name="local-1628087425"><a href="#local-1628087425"><span class="hs-identifier">vDataCons</span></a></a><span class="hs-special">,</span><span> </span><a name="local-1628087426"><a href="#local-1628087426"><span class="hs-identifier">vScSels</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.List.html#unzip3"><span class="hs-identifier hs-var">unzip3</span></a><span> </span><span class="hs-special">(</span><a href="#local-1628087421"><span class="hs-identifier hs-var">tyConRes1</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a><span> </span><a href="#local-1628087422"><span class="hs-identifier hs-var">tyConRes2</span></a><span class="hs-special">)</span><span>
</span><a name="line-774"></a><span>       </span><span class="hs-special">;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><a href="HscTypes.html#VectInfo"><span class="hs-identifier hs-var">VectInfo</span></a><span>
</span><a name="line-775"></a><span>                  </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">vectInfoVar</span><span>            </span><span class="hs-glyph">=</span><span> </span><a href="VarEnv.html#mkVarEnv"><span class="hs-identifier hs-var">mkVarEnv</span></a><span>  </span><a href="#local-1628087419"><span class="hs-identifier hs-var">vVars</span></a><span> </span><span class="hs-special">`</span><a href="VarEnv.html#extendVarEnvList"><span class="hs-identifier hs-var">extendVarEnvList</span></a><span class="hs-special">`</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Foldable.html#concat"><span class="hs-identifier hs-var">concat</span></a><span> </span><a href="#local-1628087426"><span class="hs-identifier hs-var">vScSels</span></a><span>
</span><a name="line-776"></a><span>                  </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">vectInfoTyCon</span><span>          </span><span class="hs-glyph">=</span><span> </span><a href="NameEnv.html#mkNameEnv"><span class="hs-identifier hs-var">mkNameEnv</span></a><span> </span><a href="#local-1628087424"><span class="hs-identifier hs-var">vTyCons</span></a><span>
</span><a name="line-777"></a><span>                  </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">vectInfoDataCon</span><span>        </span><span class="hs-glyph">=</span><span> </span><a href="NameEnv.html#mkNameEnv"><span class="hs-identifier hs-var">mkNameEnv</span></a><span> </span><span class="hs-special">(</span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Foldable.html#concat"><span class="hs-identifier hs-var">concat</span></a><span> </span><a href="#local-1628087425"><span class="hs-identifier hs-var">vDataCons</span></a><span class="hs-special">)</span><span>
</span><a name="line-778"></a><span>                  </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">vectInfoParallelVars</span><span>   </span><span class="hs-glyph">=</span><span> </span><a href="VarSet.html#mkVarSet"><span class="hs-identifier hs-var">mkVarSet</span></a><span>  </span><a href="#local-1628087423"><span class="hs-identifier hs-var">vParallelVars</span></a><span>
</span><a name="line-779"></a><span>                  </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">vectInfoParallelTyCons</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1628087418"><span class="hs-identifier hs-var">parallelTyConsSet</span></a><span>
</span><a name="line-780"></a><span>                  </span><span class="hs-special">}</span><span>
</span><a name="line-781"></a><span>       </span><span class="hs-special">}</span><span>
</span><a name="line-782"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-783"></a><span>    </span><a name="local-1628087383"><a href="#local-1628087383"><span class="hs-identifier">vectVarMapping</span></a></a><span> </span><a name="local-1628087388"><a href="#local-1628087388"><span class="hs-identifier">name</span></a></a><span>
</span><a name="line-784"></a><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><a name="local-1628087389"><a href="#local-1628087389"><span class="hs-identifier">vName</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="IfaceEnv.html#lookupIfaceTop"><span class="hs-identifier hs-var">lookupIfaceTop</span></a><span> </span><span class="hs-special">(</span><a href="Name.html#mkLocalisedOccName"><span class="hs-identifier hs-var">mkLocalisedOccName</span></a><span> </span><a href="#local-1628087376"><span class="hs-identifier hs-var">mod</span></a><span> </span><a href="OccName.html#mkVectOcc"><span class="hs-identifier hs-var">mkVectOcc</span></a><span> </span><a href="#local-1628087388"><span class="hs-identifier hs-var">name</span></a><span class="hs-special">)</span><span>
</span><a name="line-785"></a><span>           </span><span class="hs-special">;</span><span> </span><a name="local-1628087390"><a href="#local-1628087390"><span class="hs-identifier">var</span></a></a><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcRnMonad.html#forkM"><span class="hs-identifier hs-var">forkM</span></a><span> </span><span class="hs-special">(</span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;vect var&quot;</span><span>  </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1628087388"><span class="hs-identifier hs-var">name</span></a><span class="hs-special">)</span><span>  </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span>
</span><a name="line-786"></a><span>                        </span><a href="TcIface.html#tcIfaceExtId"><span class="hs-identifier hs-var">tcIfaceExtId</span></a><span> </span><a href="#local-1628087388"><span class="hs-identifier hs-var">name</span></a><span>
</span><a name="line-787"></a><span>           </span><span class="hs-special">;</span><span> </span><a name="local-1628087391"><a href="#local-1628087391"><span class="hs-identifier">vVar</span></a></a><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcRnMonad.html#forkM"><span class="hs-identifier hs-var">forkM</span></a><span> </span><span class="hs-special">(</span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;vect vVar [mod =&quot;</span><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span>
</span><a name="line-788"></a><span>                             </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1628087376"><span class="hs-identifier hs-var">mod</span></a><span> </span><a href="Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;; nameModule =&quot;</span><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span>
</span><a name="line-789"></a><span>                             </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><span class="hs-special">(</span><a href="Name.html#nameModule"><span class="hs-identifier hs-var">nameModule</span></a><span> </span><a href="#local-1628087388"><span class="hs-identifier hs-var">name</span></a><span class="hs-special">)</span><span> </span><a href="Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;]&quot;</span><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1628087389"><span class="hs-identifier hs-var">vName</span></a><span class="hs-special">)</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span>
</span><a name="line-790"></a><span>                       </span><a href="TcIface.html#tcIfaceExtId"><span class="hs-identifier hs-var">tcIfaceExtId</span></a><span> </span><a href="#local-1628087389"><span class="hs-identifier hs-var">vName</span></a><span>
</span><a name="line-791"></a><span>           </span><span class="hs-special">;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="#local-1628087390"><span class="hs-identifier hs-var">var</span></a><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><a href="#local-1628087390"><span class="hs-identifier hs-var">var</span></a><span class="hs-special">,</span><span> </span><a href="#local-1628087391"><span class="hs-identifier hs-var">vVar</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-792"></a><span>           </span><span class="hs-special">}</span><span>
</span><a name="line-793"></a><span>      </span><span class="hs-comment">-- where</span><span>
</span><a name="line-794"></a><span>      </span><span class="hs-comment">--   lookupLocalOrExternalId name</span><span>
</span><a name="line-795"></a><span>      </span><span class="hs-comment">--     = do { let mb_id = lookupTypeEnv typeEnv name</span><span>
</span><a name="line-796"></a><span>      </span><span class="hs-comment">--          ; case mb_id of</span><span>
</span><a name="line-797"></a><span>      </span><span class="hs-comment">--                -- id is local</span><span>
</span><a name="line-798"></a><span>      </span><span class="hs-comment">--              Just (AnId id) -&gt; return id</span><span>
</span><a name="line-799"></a><span>      </span><span class="hs-comment">--                -- name is not an Id =&gt; internal inconsistency</span><span>
</span><a name="line-800"></a><span>      </span><span class="hs-comment">--              Just _         -&gt; notAnIdErr</span><span>
</span><a name="line-801"></a><span>      </span><span class="hs-comment">--                -- Id is external</span><span>
</span><a name="line-802"></a><span>      </span><span class="hs-comment">--              Nothing        -&gt; tcIfaceExtId name</span><span>
</span><a name="line-803"></a><span>      </span><span class="hs-comment">--          }</span><span>
</span><a name="line-804"></a><span>      </span><span class="hs-comment">--</span><span>
</span><a name="line-805"></a><span>      </span><span class="hs-comment">--   notAnIdErr = pprPanic &quot;TcIface.tcIfaceVectInfo: not an id&quot; (ppr name)</span><span>
</span><a name="line-806"></a><span>
</span><a name="line-807"></a><span>    </span><a name="local-1628087384"><a href="#local-1628087384"><span class="hs-identifier">vectVar</span></a></a><span> </span><a name="local-1628087392"><a href="#local-1628087392"><span class="hs-identifier">name</span></a></a><span>
</span><a name="line-808"></a><span>      </span><span class="hs-glyph">=</span><span> </span><a href="TcRnMonad.html#forkM"><span class="hs-identifier hs-var">forkM</span></a><span> </span><span class="hs-special">(</span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;vect scalar var&quot;</span><span>  </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1628087392"><span class="hs-identifier hs-var">name</span></a><span class="hs-special">)</span><span>  </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span>
</span><a name="line-809"></a><span>          </span><a href="TcIface.html#tcIfaceExtId"><span class="hs-identifier hs-var">tcIfaceExtId</span></a><span> </span><a href="#local-1628087392"><span class="hs-identifier hs-var">name</span></a><span>
</span><a name="line-810"></a><span>
</span><a name="line-811"></a><span>    </span><a name="local-1628087385"><a href="#local-1628087385"><span class="hs-identifier">vectTyConVectMapping</span></a></a><span> </span><a name="local-1628087393"><a href="#local-1628087393"><span class="hs-identifier">vars</span></a></a><span> </span><a name="local-1628087394"><a href="#local-1628087394"><span class="hs-identifier">name</span></a></a><span>
</span><a name="line-812"></a><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><a name="local-1628087395"><a href="#local-1628087395"><span class="hs-identifier">vName</span></a></a><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><a href="IfaceEnv.html#lookupIfaceTop"><span class="hs-identifier hs-var">lookupIfaceTop</span></a><span> </span><span class="hs-special">(</span><a href="Name.html#mkLocalisedOccName"><span class="hs-identifier hs-var">mkLocalisedOccName</span></a><span> </span><a href="#local-1628087376"><span class="hs-identifier hs-var">mod</span></a><span> </span><a href="OccName.html#mkVectTyConOcc"><span class="hs-identifier hs-var">mkVectTyConOcc</span></a><span> </span><a href="#local-1628087394"><span class="hs-identifier hs-var">name</span></a><span class="hs-special">)</span><span>
</span><a name="line-813"></a><span>           </span><span class="hs-special">;</span><span> </span><a href="#local-1628087387"><span class="hs-identifier hs-var">vectTyConMapping</span></a><span> </span><a href="#local-1628087393"><span class="hs-identifier hs-var">vars</span></a><span> </span><a href="#local-1628087394"><span class="hs-identifier hs-var">name</span></a><span> </span><a href="#local-1628087395"><span class="hs-identifier hs-var">vName</span></a><span>
</span><a name="line-814"></a><span>           </span><span class="hs-special">}</span><span>
</span><a name="line-815"></a><span>
</span><a name="line-816"></a><span>    </span><a name="local-1628087386"><a href="#local-1628087386"><span class="hs-identifier">vectTyConReuseMapping</span></a></a><span> </span><a name="local-1628087396"><a href="#local-1628087396"><span class="hs-identifier">vars</span></a></a><span> </span><a name="local-1628087397"><a href="#local-1628087397"><span class="hs-identifier">name</span></a></a><span>
</span><a name="line-817"></a><span>      </span><span class="hs-glyph">=</span><span> </span><a href="#local-1628087387"><span class="hs-identifier hs-var">vectTyConMapping</span></a><span> </span><a href="#local-1628087396"><span class="hs-identifier hs-var">vars</span></a><span> </span><a href="#local-1628087397"><span class="hs-identifier hs-var">name</span></a><span> </span><a href="#local-1628087397"><span class="hs-identifier hs-var">name</span></a><span>
</span><a name="line-818"></a><span>
</span><a name="line-819"></a><span>    </span><a name="local-1628087387"><a href="#local-1628087387"><span class="hs-identifier">vectTyConMapping</span></a></a><span> </span><a name="local-1628087398"><a href="#local-1628087398"><span class="hs-identifier">vars</span></a></a><span> </span><a name="local-1628087399"><a href="#local-1628087399"><span class="hs-identifier">name</span></a></a><span> </span><a name="local-1628087400"><a href="#local-1628087400"><span class="hs-identifier">vName</span></a></a><span>
</span><a name="line-820"></a><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><a name="local-1628087406"><a href="#local-1628087406"><span class="hs-identifier">tycon</span></a></a><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><a href="#local-1628087401"><span class="hs-identifier hs-var">lookupLocalOrExternalTyCon</span></a><span> </span><a href="#local-1628087399"><span class="hs-identifier hs-var">name</span></a><span>
</span><a name="line-821"></a><span>           </span><span class="hs-special">;</span><span> </span><a name="local-1628087407"><a href="#local-1628087407"><span class="hs-identifier">vTycon</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcRnMonad.html#forkM"><span class="hs-identifier hs-var">forkM</span></a><span> </span><span class="hs-special">(</span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;vTycon of&quot;</span><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1628087400"><span class="hs-identifier hs-var">vName</span></a><span class="hs-special">)</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span>
</span><a name="line-822"></a><span>                         </span><a href="#local-1628087401"><span class="hs-identifier hs-var">lookupLocalOrExternalTyCon</span></a><span> </span><a href="#local-1628087400"><span class="hs-identifier hs-var">vName</span></a><span>
</span><a name="line-823"></a><span>
</span><a name="line-824"></a><span>               </span><span class="hs-comment">-- Map the data constructors of the original type constructor to those of the</span><span>
</span><a name="line-825"></a><span>               </span><span class="hs-comment">-- vectorised type constructor /unless/ the type constructor was vectorised</span><span>
</span><a name="line-826"></a><span>               </span><span class="hs-comment">-- abstractly; if it was vectorised abstractly, the workers of its data constructors</span><span>
</span><a name="line-827"></a><span>               </span><span class="hs-comment">-- do not appear in the set of vectorised variables.</span><span>
</span><a name="line-828"></a><span>               </span><span class="hs-comment">--</span><span>
</span><a name="line-829"></a><span>               </span><span class="hs-comment">-- NB: This is lazy!  We don't pull at the type constructors before we actually use</span><span>
</span><a name="line-830"></a><span>               </span><span class="hs-comment">--     the data constructor mapping.</span><span>
</span><a name="line-831"></a><span>           </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><a name="local-1628087408"><a href="#local-1628087408"><span class="hs-identifier">isAbstract</span></a></a><span> </span><span class="hs-glyph">|</span><span> </span><a href="TyCon.html#isClassTyCon"><span class="hs-identifier hs-var">isClassTyCon</span></a><span> </span><a href="#local-1628087406"><span class="hs-identifier hs-var">tycon</span></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-832"></a><span>                            </span><span class="hs-glyph">|</span><span> </span><a name="local-1628087411"><a href="#local-1628087411"><span class="hs-identifier">datacon</span></a></a><span class="hs-glyph">:</span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TyCon.html#tyConDataCons"><span class="hs-identifier hs-var">tyConDataCons</span></a><span> </span><a href="#local-1628087406"><span class="hs-identifier hs-var">tycon</span></a><span>
</span><a name="line-833"></a><span>                                                 </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">not</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><a href="DataCon.html#dataConWrapId"><span class="hs-identifier hs-var">dataConWrapId</span></a><span> </span><a href="#local-1628087411"><span class="hs-identifier hs-var">datacon</span></a><span> </span><span class="hs-special">`</span><a href="VarSet.html#elemVarSet"><span class="hs-identifier hs-var">elemVarSet</span></a><span class="hs-special">`</span><span> </span><a href="#local-1628087398"><span class="hs-identifier hs-var">vars</span></a><span>
</span><a name="line-834"></a><span>                            </span><span class="hs-glyph">|</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a><span>          </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-835"></a><span>                 </span><a name="local-1628087409"><a href="#local-1628087409"><span class="hs-identifier">vDataCons</span></a></a><span>  </span><span class="hs-glyph">|</span><span> </span><a href="#local-1628087408"><span class="hs-identifier hs-var">isAbstract</span></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><a name="line-836"></a><span>                            </span><span class="hs-glyph">|</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><a href="DataCon.html#dataConName"><span class="hs-identifier hs-var">dataConName</span></a><span> </span><a href="#local-1628087412"><span class="hs-identifier hs-var">datacon</span></a><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><a href="#local-1628087412"><span class="hs-identifier hs-var">datacon</span></a><span class="hs-special">,</span><span> </span><a href="#local-1628087413"><span class="hs-identifier hs-var">vDatacon</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-837"></a><span>                                           </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><a name="local-1628087412"><a href="#local-1628087412"><span class="hs-identifier">datacon</span></a></a><span class="hs-special">,</span><span> </span><a name="local-1628087413"><a href="#local-1628087413"><span class="hs-identifier">vDatacon</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.List.html#zip"><span class="hs-identifier hs-var">zip</span></a><span> </span><span class="hs-special">(</span><a href="TyCon.html#tyConDataCons"><span class="hs-identifier hs-var">tyConDataCons</span></a><span> </span><a href="#local-1628087406"><span class="hs-identifier hs-var">tycon</span></a><span class="hs-special">)</span><span>
</span><a name="line-838"></a><span>                                                                        </span><span class="hs-special">(</span><a href="TyCon.html#tyConDataCons"><span class="hs-identifier hs-var">tyConDataCons</span></a><span> </span><a href="#local-1628087407"><span class="hs-identifier hs-var">vTycon</span></a><span class="hs-special">)</span><span>
</span><a name="line-839"></a><span>                                           </span><span class="hs-special">]</span><span>
</span><a name="line-840"></a><span>
</span><a name="line-841"></a><span>                   </span><span class="hs-comment">-- Map the (implicit) superclass and methods selectors as they don't occur in</span><span>
</span><a name="line-842"></a><span>                   </span><span class="hs-comment">-- the var map.</span><span>
</span><a name="line-843"></a><span>                 </span><a name="local-1628087410"><a href="#local-1628087410"><span class="hs-identifier">vScSels</span></a></a><span>    </span><span class="hs-glyph">|</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Just"><span class="hs-identifier hs-var">Just</span></a><span> </span><a name="local-1628087414"><a href="#local-1628087414"><span class="hs-identifier">cls</span></a></a><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TyCon.html#tyConClass_maybe"><span class="hs-identifier hs-var">tyConClass_maybe</span></a><span> </span><a href="#local-1628087406"><span class="hs-identifier hs-var">tycon</span></a><span>
</span><a name="line-844"></a><span>                            </span><span class="hs-special">,</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Just"><span class="hs-identifier hs-var">Just</span></a><span> </span><a name="local-1628087415"><a href="#local-1628087415"><span class="hs-identifier">vCls</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TyCon.html#tyConClass_maybe"><span class="hs-identifier hs-var">tyConClass_maybe</span></a><span> </span><a href="#local-1628087407"><span class="hs-identifier hs-var">vTycon</span></a><span>
</span><a name="line-845"></a><span>                            </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><a href="#local-1628087416"><span class="hs-identifier hs-var">sel</span></a><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><a href="#local-1628087416"><span class="hs-identifier hs-var">sel</span></a><span class="hs-special">,</span><span> </span><a href="#local-1628087417"><span class="hs-identifier hs-var">vSel</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-846"></a><span>                              </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><a name="local-1628087416"><a href="#local-1628087416"><span class="hs-identifier">sel</span></a></a><span class="hs-special">,</span><span> </span><a name="local-1628087417"><a href="#local-1628087417"><span class="hs-identifier">vSel</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.List.html#zip"><span class="hs-identifier hs-var">zip</span></a><span> </span><span class="hs-special">(</span><a href="Class.html#classAllSelIds"><span class="hs-identifier hs-var">classAllSelIds</span></a><span> </span><a href="#local-1628087414"><span class="hs-identifier hs-var">cls</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><a href="Class.html#classAllSelIds"><span class="hs-identifier hs-var">classAllSelIds</span></a><span> </span><a href="#local-1628087415"><span class="hs-identifier hs-var">vCls</span></a><span class="hs-special">)</span><span>
</span><a name="line-847"></a><span>                              </span><span class="hs-special">]</span><span>
</span><a name="line-848"></a><span>                            </span><span class="hs-glyph">|</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a><span>
</span><a name="line-849"></a><span>                            </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><a name="line-850"></a><span>
</span><a name="line-851"></a><span>           </span><span class="hs-special">;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><span> </span><span class="hs-special">(</span><a href="#local-1628087399"><span class="hs-identifier hs-var">name</span></a><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><a href="#local-1628087406"><span class="hs-identifier hs-var">tycon</span></a><span class="hs-special">,</span><span> </span><a href="#local-1628087407"><span class="hs-identifier hs-var">vTycon</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>          </span><span class="hs-comment">-- (T, T_v)</span><span>
</span><a name="line-852"></a><span>                    </span><span class="hs-special">,</span><span> </span><a href="#local-1628087409"><span class="hs-identifier hs-var">vDataCons</span></a><span>                        </span><span class="hs-comment">-- list of (Ci, Ci_v)</span><span>
</span><a name="line-853"></a><span>                    </span><span class="hs-special">,</span><span> </span><a href="#local-1628087410"><span class="hs-identifier hs-var">vScSels</span></a><span>                          </span><span class="hs-comment">-- list of (seli, seli_v)</span><span>
</span><a name="line-854"></a><span>                    </span><span class="hs-special">)</span><span>
</span><a name="line-855"></a><span>           </span><span class="hs-special">}</span><span>
</span><a name="line-856"></a><span>      </span><span class="hs-keyword">where</span><span>
</span><a name="line-857"></a><span>          </span><span class="hs-comment">-- we need a fully defined version of the type constructor to be able to extract</span><span>
</span><a name="line-858"></a><span>          </span><span class="hs-comment">-- its data constructors etc.</span><span>
</span><a name="line-859"></a><span>        </span><a name="local-1628087401"><a href="#local-1628087401"><span class="hs-identifier">lookupLocalOrExternalTyCon</span></a></a><span> </span><a name="local-1628087403"><a href="#local-1628087403"><span class="hs-identifier">name</span></a></a><span>
</span><a name="line-860"></a><span>          </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-keyword">let</span><span> </span><a name="local-1628087404"><a href="#local-1628087404"><span class="hs-identifier">mb_tycon</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="HscTypes.html#lookupTypeEnv"><span class="hs-identifier hs-var">lookupTypeEnv</span></a><span> </span><a href="#local-1628087377"><span class="hs-identifier hs-var">typeEnv</span></a><span> </span><a href="#local-1628087403"><span class="hs-identifier hs-var">name</span></a><span>
</span><a name="line-861"></a><span>               </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="#local-1628087404"><span class="hs-identifier hs-var">mb_tycon</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-862"></a><span>                     </span><span class="hs-comment">-- tycon is local</span><span>
</span><a name="line-863"></a><span>                   </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Just"><span class="hs-identifier hs-var">Just</span></a><span> </span><span class="hs-special">(</span><a href="TyCoRep.html#ATyCon"><span class="hs-identifier hs-var">ATyCon</span></a><span> </span><a name="local-1628087405"><a href="#local-1628087405"><span class="hs-identifier">tycon</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><a href="#local-1628087405"><span class="hs-identifier hs-var">tycon</span></a><span>
</span><a name="line-864"></a><span>                     </span><span class="hs-comment">-- name is not a tycon =&gt; internal inconsistency</span><span>
</span><a name="line-865"></a><span>                   </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Just"><span class="hs-identifier hs-var">Just</span></a><span> </span><span class="hs-identifier">_</span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-1628087402"><span class="hs-identifier hs-var">notATyConErr</span></a><span>
</span><a name="line-866"></a><span>                     </span><span class="hs-comment">-- tycon is external</span><span>
</span><a name="line-867"></a><span>                   </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcIface.html#tcIfaceTyConByName"><span class="hs-identifier hs-var">tcIfaceTyConByName</span></a><span> </span><a href="#local-1628087403"><span class="hs-identifier hs-var">name</span></a><span>
</span><a name="line-868"></a><span>               </span><span class="hs-special">}</span><span>
</span><a name="line-869"></a><span>
</span><a name="line-870"></a><span>        </span><a name="local-1628087402"><a href="#local-1628087402"><span class="hs-identifier">notATyConErr</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a><span> </span><span class="hs-string">&quot;TcIface.tcIfaceVectInfo: not a tycon&quot;</span><span> </span><span class="hs-special">(</span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1628087399"><span class="hs-identifier hs-var">name</span></a><span class="hs-special">)</span><span>
</span><a name="line-871"></a><span>
</span><a name="line-872"></a><span class="hs-comment">{-
************************************************************************
*                                                                      *
                        Types
*                                                                      *
************************************************************************
-}</span><span>
</span><a name="line-879"></a><span>
</span><a name="line-880"></a><span class="hs-identifier">tcIfaceType</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="IfaceType.html#IfaceType"><span class="hs-identifier hs-type">IfaceType</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><a href="TyCoRep.html#Type"><span class="hs-identifier hs-type">Type</span></a><span>
</span><a name="line-881"></a><a name="tcIfaceType"><a href="TcIface.html#tcIfaceType"><span class="hs-identifier">tcIfaceType</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1628087427"><span class="hs-identifier hs-var">go</span></a><span>
</span><a name="line-882"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-883"></a><span>    </span><a name="local-1628087427"><a href="#local-1628087427"><span class="hs-identifier">go</span></a></a><span> </span><span class="hs-special">(</span><a href="IfaceType.html#IfaceTyVar"><span class="hs-identifier hs-var">IfaceTyVar</span></a><span> </span><a name="local-1628087428"><a href="#local-1628087428"><span class="hs-identifier">n</span></a></a><span class="hs-special">)</span><span>         </span><span class="hs-glyph">=</span><span> </span><a href="TyCoRep.html#TyVarTy"><span class="hs-identifier hs-var">TyVarTy</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a><span> </span><a href="IfaceEnv.html#tcIfaceTyVar"><span class="hs-identifier hs-var">tcIfaceTyVar</span></a><span> </span><a href="#local-1628087428"><span class="hs-identifier hs-var">n</span></a><span>
</span><a name="line-884"></a><span>    </span><span class="hs-identifier">go</span><span> </span><span class="hs-special">(</span><a href="IfaceType.html#IfaceAppTy"><span class="hs-identifier hs-var">IfaceAppTy</span></a><span> </span><a name="local-1628087429"><a href="#local-1628087429"><span class="hs-identifier">t1</span></a></a><span> </span><a name="local-1628087430"><a href="#local-1628087430"><span class="hs-identifier">t2</span></a></a><span class="hs-special">)</span><span>     </span><span class="hs-glyph">=</span><span> </span><a href="TyCoRep.html#AppTy"><span class="hs-identifier hs-var">AppTy</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a><span> </span><a href="#local-1628087427"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-1628087429"><span class="hs-identifier hs-var">t1</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a><span> </span><a href="#local-1628087427"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-1628087430"><span class="hs-identifier hs-var">t2</span></a><span>
</span><a name="line-885"></a><span>    </span><span class="hs-identifier">go</span><span> </span><span class="hs-special">(</span><a href="IfaceType.html#IfaceLitTy"><span class="hs-identifier hs-var">IfaceLitTy</span></a><span> </span><a name="local-1628087431"><a href="#local-1628087431"><span class="hs-identifier">l</span></a></a><span class="hs-special">)</span><span>         </span><span class="hs-glyph">=</span><span> </span><a href="TyCoRep.html#LitTy"><span class="hs-identifier hs-var">LitTy</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a><span> </span><a href="TcIface.html#tcIfaceTyLit"><span class="hs-identifier hs-var">tcIfaceTyLit</span></a><span> </span><a href="#local-1628087431"><span class="hs-identifier hs-var">l</span></a><span>
</span><a name="line-886"></a><span>    </span><span class="hs-identifier">go</span><span> </span><span class="hs-special">(</span><a href="IfaceType.html#IfaceFunTy"><span class="hs-identifier hs-var">IfaceFunTy</span></a><span> </span><a name="local-1628087432"><a href="#local-1628087432"><span class="hs-identifier">t1</span></a></a><span> </span><a name="local-1628087433"><a href="#local-1628087433"><span class="hs-identifier">t2</span></a></a><span class="hs-special">)</span><span>     </span><span class="hs-glyph">=</span><span> </span><a href="TyCoRep.html#ForAllTy"><span class="hs-identifier hs-var">ForAllTy</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a><span> </span><span class="hs-special">(</span><a href="TyCoRep.html#Anon"><span class="hs-identifier hs-var">Anon</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a><span> </span><a href="#local-1628087427"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-1628087432"><span class="hs-identifier hs-var">t1</span></a><span class="hs-special">)</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a><span> </span><a href="#local-1628087427"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-1628087433"><span class="hs-identifier hs-var">t2</span></a><span>
</span><a name="line-887"></a><span>    </span><span class="hs-identifier">go</span><span> </span><span class="hs-special">(</span><a href="IfaceType.html#IfaceDFunTy"><span class="hs-identifier hs-var">IfaceDFunTy</span></a><span> </span><a name="local-1628087434"><a href="#local-1628087434"><span class="hs-identifier">t1</span></a></a><span> </span><a name="local-1628087435"><a href="#local-1628087435"><span class="hs-identifier">t2</span></a></a><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><a href="TyCoRep.html#ForAllTy"><span class="hs-identifier hs-var">ForAllTy</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a><span> </span><span class="hs-special">(</span><a href="TyCoRep.html#Anon"><span class="hs-identifier hs-var">Anon</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a><span> </span><a href="#local-1628087427"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-1628087434"><span class="hs-identifier hs-var">t1</span></a><span class="hs-special">)</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a><span> </span><a href="#local-1628087427"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-1628087435"><span class="hs-identifier hs-var">t2</span></a><span>
</span><a name="line-888"></a><span>    </span><span class="hs-identifier">go</span><span> </span><span class="hs-special">(</span><a href="IfaceType.html#IfaceTupleTy"><span class="hs-identifier hs-var">IfaceTupleTy</span></a><span> </span><a name="local-1628087436"><a href="#local-1628087436"><span class="hs-identifier">s</span></a></a><span> </span><a name="local-1628087437"><a href="#local-1628087437"><span class="hs-identifier">i</span></a></a><span> </span><a name="local-1628087438"><a href="#local-1628087438"><span class="hs-identifier">tks</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="TcIface.html#tcIfaceTupleTy"><span class="hs-identifier hs-var">tcIfaceTupleTy</span></a><span> </span><a href="#local-1628087436"><span class="hs-identifier hs-var">s</span></a><span> </span><a href="#local-1628087437"><span class="hs-identifier hs-var">i</span></a><span> </span><a href="#local-1628087438"><span class="hs-identifier hs-var">tks</span></a><span>
</span><a name="line-889"></a><span>    </span><span class="hs-identifier">go</span><span> </span><span class="hs-special">(</span><a href="IfaceType.html#IfaceTyConApp"><span class="hs-identifier hs-var">IfaceTyConApp</span></a><span> </span><a name="local-1628087439"><a href="#local-1628087439"><span class="hs-identifier">tc</span></a></a><span> </span><a name="local-1628087440"><a href="#local-1628087440"><span class="hs-identifier">tks</span></a></a><span class="hs-special">)</span><span>
</span><a name="line-890"></a><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><a name="local-1628087441"><a href="#local-1628087441"><span class="hs-identifier">tc'</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tcIfaceTyCon"><span class="hs-identifier hs-var">tcIfaceTyCon</span></a><span> </span><a href="#local-1628087439"><span class="hs-identifier hs-var">tc</span></a><span>
</span><a name="line-891"></a><span>           </span><span class="hs-special">;</span><span> </span><a name="local-1628087442"><a href="#local-1628087442"><span class="hs-identifier">tks'</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a><span> </span><a href="#local-1628087427"><span class="hs-identifier hs-var">go</span></a><span> </span><span class="hs-special">(</span><a href="IfaceType.html#tcArgsIfaceTypes"><span class="hs-identifier hs-var">tcArgsIfaceTypes</span></a><span> </span><a href="#local-1628087440"><span class="hs-identifier hs-var">tks</span></a><span class="hs-special">)</span><span>
</span><a name="line-892"></a><span>           </span><span class="hs-special">;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="Type.html#mkTyConApp"><span class="hs-identifier hs-var">mkTyConApp</span></a><span> </span><a href="#local-1628087441"><span class="hs-identifier hs-var">tc'</span></a><span> </span><a href="#local-1628087442"><span class="hs-identifier hs-var">tks'</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-893"></a><span>    </span><span class="hs-identifier">go</span><span> </span><span class="hs-special">(</span><a href="IfaceType.html#IfaceForAllTy"><span class="hs-identifier hs-var">IfaceForAllTy</span></a><span> </span><a name="local-1628087443"><a href="#local-1628087443"><span class="hs-identifier">bndr</span></a></a><span> </span><a name="local-1628087444"><a href="#local-1628087444"><span class="hs-identifier">t</span></a></a><span class="hs-special">)</span><span>
</span><a name="line-894"></a><span>      </span><span class="hs-glyph">=</span><span> </span><a href="TcIface.html#bindIfaceBndrTy"><span class="hs-identifier hs-var">bindIfaceBndrTy</span></a><span> </span><a href="#local-1628087443"><span class="hs-identifier hs-var">bndr</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><span class="hs-glyph">\</span><span> </span><a name="local-1628087445"><a href="#local-1628087445"><span class="hs-identifier">tv'</span></a></a><span> </span><a name="local-1628087446"><a href="#local-1628087446"><span class="hs-identifier">vis</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Type.html#mkNamedForAllTy"><span class="hs-identifier hs-var">mkNamedForAllTy</span></a><span> </span><a href="#local-1628087445"><span class="hs-identifier hs-var">tv'</span></a><span> </span><a href="#local-1628087446"><span class="hs-identifier hs-var">vis</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a><span> </span><a href="#local-1628087427"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-1628087444"><span class="hs-identifier hs-var">t</span></a><span>
</span><a name="line-895"></a><span>    </span><span class="hs-identifier">go</span><span> </span><span class="hs-special">(</span><a href="IfaceType.html#IfaceCastTy"><span class="hs-identifier hs-var">IfaceCastTy</span></a><span> </span><a name="local-1628087447"><a href="#local-1628087447"><span class="hs-identifier">ty</span></a></a><span> </span><a name="local-1628087448"><a href="#local-1628087448"><span class="hs-identifier">co</span></a></a><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><a href="TyCoRep.html#CastTy"><span class="hs-identifier hs-var">CastTy</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a><span> </span><a href="#local-1628087427"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-1628087447"><span class="hs-identifier hs-var">ty</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a><span> </span><a href="TcIface.html#tcIfaceCo"><span class="hs-identifier hs-var">tcIfaceCo</span></a><span> </span><a href="#local-1628087448"><span class="hs-identifier hs-var">co</span></a><span>
</span><a name="line-896"></a><span>    </span><span class="hs-identifier">go</span><span> </span><span class="hs-special">(</span><a href="IfaceType.html#IfaceCoercionTy"><span class="hs-identifier hs-var">IfaceCoercionTy</span></a><span> </span><a name="local-1628087449"><a href="#local-1628087449"><span class="hs-identifier">co</span></a></a><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><a href="TyCoRep.html#CoercionTy"><span class="hs-identifier hs-var">CoercionTy</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a><span> </span><a href="TcIface.html#tcIfaceCo"><span class="hs-identifier hs-var">tcIfaceCo</span></a><span> </span><a href="#local-1628087449"><span class="hs-identifier hs-var">co</span></a><span>
</span><a name="line-897"></a><span>
</span><a name="line-898"></a><span class="hs-identifier">tcIfaceTupleTy</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#TupleSort"><span class="hs-identifier hs-type">TupleSort</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="IfaceType.html#IfaceTyConInfo"><span class="hs-identifier hs-type">IfaceTyConInfo</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="IfaceType.html#IfaceTcArgs"><span class="hs-identifier hs-type">IfaceTcArgs</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><a href="TyCoRep.html#Type"><span class="hs-identifier hs-type">Type</span></a><span>
</span><a name="line-899"></a><a name="tcIfaceTupleTy"><a href="TcIface.html#tcIfaceTupleTy"><span class="hs-identifier">tcIfaceTupleTy</span></a></a><span> </span><a name="local-1628087450"><a href="#local-1628087450"><span class="hs-identifier">sort</span></a></a><span> </span><a name="local-1628087451"><a href="#local-1628087451"><span class="hs-identifier">info</span></a></a><span> </span><a name="local-1628087452"><a href="#local-1628087452"><span class="hs-identifier">args</span></a></a><span>
</span><a name="line-900"></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><a name="local-1628087453"><a href="#local-1628087453"><span class="hs-identifier">args'</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tcIfaceTcArgs"><span class="hs-identifier hs-var">tcIfaceTcArgs</span></a><span> </span><a href="#local-1628087452"><span class="hs-identifier hs-var">args</span></a><span>
</span><a name="line-901"></a><span>      </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><a name="local-1628087454"><a href="#local-1628087454"><span class="hs-identifier">arity</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Foldable.html#length"><span class="hs-identifier hs-var">length</span></a><span> </span><a href="#local-1628087453"><span class="hs-identifier hs-var">args'</span></a><span>
</span><a name="line-902"></a><span>      </span><span class="hs-special">;</span><span> </span><a name="local-1628087455"><a href="#local-1628087455"><span class="hs-identifier">base_tc</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tcTupleTyCon"><span class="hs-identifier hs-var">tcTupleTyCon</span></a><span> </span><span class="hs-identifier hs-var">True</span><span> </span><a href="#local-1628087450"><span class="hs-identifier hs-var">sort</span></a><span> </span><a href="#local-1628087454"><span class="hs-identifier hs-var">arity</span></a><span>
</span><a name="line-903"></a><span>      </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="#local-1628087451"><span class="hs-identifier hs-var">info</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-904"></a><span>          </span><a href="IfaceType.html#NoIfaceTyConInfo"><span class="hs-identifier hs-var">NoIfaceTyConInfo</span></a><span>
</span><a name="line-905"></a><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="Type.html#mkTyConApp"><span class="hs-identifier hs-var">mkTyConApp</span></a><span> </span><a href="#local-1628087455"><span class="hs-identifier hs-var">base_tc</span></a><span> </span><a href="#local-1628087453"><span class="hs-identifier hs-var">args'</span></a><span class="hs-special">)</span><span>
</span><a name="line-906"></a><span>
</span><a name="line-907"></a><span>          </span><a href="IfaceType.html#IfacePromotedDataCon"><span class="hs-identifier hs-var">IfacePromotedDataCon</span></a><span>
</span><a name="line-908"></a><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-keyword">let</span><span> </span><a name="local-1628087456"><a href="#local-1628087456"><span class="hs-identifier">tc</span></a></a><span>        </span><span class="hs-glyph">=</span><span> </span><a href="DataCon.html#promoteDataCon"><span class="hs-identifier hs-var">promoteDataCon</span></a><span> </span><span class="hs-special">(</span><a href="TyCon.html#tyConSingleDataCon"><span class="hs-identifier hs-var">tyConSingleDataCon</span></a><span> </span><a href="#local-1628087455"><span class="hs-identifier hs-var">base_tc</span></a><span class="hs-special">)</span><span>
</span><a name="line-909"></a><span>                        </span><a name="local-1628087457"><a href="#local-1628087457"><span class="hs-identifier">kind_args</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a><span> </span><a href="Type.html#typeKind"><span class="hs-identifier hs-var">typeKind</span></a><span> </span><a href="#local-1628087453"><span class="hs-identifier hs-var">args'</span></a><span>
</span><a name="line-910"></a><span>                  </span><span class="hs-special">;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="Type.html#mkTyConApp"><span class="hs-identifier hs-var">mkTyConApp</span></a><span> </span><a href="#local-1628087456"><span class="hs-identifier hs-var">tc</span></a><span> </span><span class="hs-special">(</span><a href="#local-1628087457"><span class="hs-identifier hs-var">kind_args</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a><span> </span><a href="#local-1628087453"><span class="hs-identifier hs-var">args'</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-911"></a><span>
</span><a name="line-912"></a><span class="hs-comment">-- See Note [Unboxed tuple RuntimeRep vars] in TyCon</span><span>
</span><a name="line-913"></a><span class="hs-identifier">tcTupleTyCon</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>    </span><span class="hs-comment">-- True &lt;=&gt; typechecking a *type* (vs. an expr)</span><span>
</span><a name="line-914"></a><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><a href="BasicTypes.html#TupleSort"><span class="hs-identifier hs-type">TupleSort</span></a><span>
</span><a name="line-915"></a><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><a href="BasicTypes.html#Arity"><span class="hs-identifier hs-type">Arity</span></a><span>   </span><span class="hs-comment">-- the number of args. *not* the tuple arity.</span><span>
</span><a name="line-916"></a><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><a href="TyCon.html#TyCon"><span class="hs-identifier hs-type">TyCon</span></a><span>
</span><a name="line-917"></a><a name="tcTupleTyCon"><a href="TcIface.html#tcTupleTyCon"><span class="hs-identifier">tcTupleTyCon</span></a></a><span> </span><a name="local-1628087458"><a href="#local-1628087458"><span class="hs-identifier">in_type</span></a></a><span> </span><a name="local-1628087459"><a href="#local-1628087459"><span class="hs-identifier">sort</span></a></a><span> </span><a name="local-1628087460"><a href="#local-1628087460"><span class="hs-identifier">arity</span></a></a><span>
</span><a name="line-918"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="#local-1628087459"><span class="hs-identifier hs-var">sort</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-919"></a><span>      </span><a href="BasicTypes.html#ConstraintTuple"><span class="hs-identifier hs-var">ConstraintTuple</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><a name="local-1628087461"><a href="#local-1628087461"><span class="hs-identifier">thing</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tcIfaceGlobal"><span class="hs-identifier hs-var">tcIfaceGlobal</span></a><span> </span><span class="hs-special">(</span><a href="TysWiredIn.html#cTupleTyConName"><span class="hs-identifier hs-var">cTupleTyConName</span></a><span> </span><a href="#local-1628087460"><span class="hs-identifier hs-var">arity</span></a><span class="hs-special">)</span><span>
</span><a name="line-920"></a><span>                            </span><span class="hs-special">;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="HscTypes.html#tyThingTyCon"><span class="hs-identifier hs-var">tyThingTyCon</span></a><span> </span><a href="#local-1628087461"><span class="hs-identifier hs-var">thing</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-921"></a><span>      </span><a href="BasicTypes.html#BoxedTuple"><span class="hs-identifier hs-var">BoxedTuple</span></a><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="TysWiredIn.html#tupleTyCon"><span class="hs-identifier hs-var">tupleTyCon</span></a><span> </span><a href="BasicTypes.html#Boxed"><span class="hs-identifier hs-var">Boxed</span></a><span>   </span><a href="#local-1628087460"><span class="hs-identifier hs-var">arity</span></a><span class="hs-special">)</span><span>
</span><a name="line-922"></a><span>      </span><a href="BasicTypes.html#UnboxedTuple"><span class="hs-identifier hs-var">UnboxedTuple</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="TysWiredIn.html#tupleTyCon"><span class="hs-identifier hs-var">tupleTyCon</span></a><span> </span><a href="BasicTypes.html#Unboxed"><span class="hs-identifier hs-var">Unboxed</span></a><span> </span><a href="#local-1628087462"><span class="hs-identifier hs-var">arity'</span></a><span class="hs-special">)</span><span>
</span><a name="line-923"></a><span>        </span><span class="hs-keyword">where</span><span> </span><a name="local-1628087462"><a href="#local-1628087462"><span class="hs-identifier">arity'</span></a></a><span> </span><span class="hs-glyph">|</span><span> </span><a href="#local-1628087458"><span class="hs-identifier hs-var">in_type</span></a><span>   </span><span class="hs-glyph">=</span><span> </span><a href="#local-1628087460"><span class="hs-identifier hs-var">arity</span></a><span> </span><span class="hs-special">`</span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Real.html#div"><span class="hs-identifier hs-var">div</span></a><span class="hs-special">`</span><span> </span><span class="hs-number">2</span><span>
</span><a name="line-924"></a><span>                     </span><span class="hs-glyph">|</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1628087460"><span class="hs-identifier hs-var">arity</span></a><span>
</span><a name="line-925"></a><span>                      </span><span class="hs-comment">-- in expressions, we only have term args</span><span>
</span><a name="line-926"></a><span>
</span><a name="line-927"></a><span class="hs-identifier">tcIfaceTcArgs</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="IfaceType.html#IfaceTcArgs"><span class="hs-identifier hs-type">IfaceTcArgs</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><span class="hs-special">[</span><a href="TyCoRep.html#Type"><span class="hs-identifier hs-type">Type</span></a><span class="hs-special">]</span><span>
</span><a name="line-928"></a><a name="tcIfaceTcArgs"><a href="TcIface.html#tcIfaceTcArgs"><span class="hs-identifier">tcIfaceTcArgs</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a><span> </span><a href="TcIface.html#tcIfaceType"><span class="hs-identifier hs-var">tcIfaceType</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a><span> </span><a href="IfaceType.html#tcArgsIfaceTypes"><span class="hs-identifier hs-var">tcArgsIfaceTypes</span></a><span>
</span><a name="line-929"></a><span>
</span><a name="line-930"></a><span class="hs-comment">-----------------------------------------</span><span>
</span><a name="line-931"></a><span class="hs-identifier">tcIfaceCtxt</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="IfaceType.html#IfaceContext"><span class="hs-identifier hs-type">IfaceContext</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><a href="TyCoRep.html#ThetaType"><span class="hs-identifier hs-type">ThetaType</span></a><span>
</span><a name="line-932"></a><a name="tcIfaceCtxt"><a href="TcIface.html#tcIfaceCtxt"><span class="hs-identifier">tcIfaceCtxt</span></a></a><span> </span><a name="local-1628087463"><a href="#local-1628087463"><span class="hs-identifier">sts</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a><span> </span><a href="TcIface.html#tcIfaceType"><span class="hs-identifier hs-var">tcIfaceType</span></a><span> </span><a href="#local-1628087463"><span class="hs-identifier hs-var">sts</span></a><span>
</span><a name="line-933"></a><span>
</span><a name="line-934"></a><span class="hs-comment">-----------------------------------------</span><span>
</span><a name="line-935"></a><span class="hs-identifier">tcIfaceTyLit</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="IfaceType.html#IfaceTyLit"><span class="hs-identifier hs-type">IfaceTyLit</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><a href="TyCoRep.html#TyLit"><span class="hs-identifier hs-type">TyLit</span></a><span>
</span><a name="line-936"></a><a name="tcIfaceTyLit"><a href="TcIface.html#tcIfaceTyLit"><span class="hs-identifier">tcIfaceTyLit</span></a></a><span> </span><span class="hs-special">(</span><a href="IfaceType.html#IfaceNumTyLit"><span class="hs-identifier hs-var">IfaceNumTyLit</span></a><span> </span><a name="local-1628087464"><a href="#local-1628087464"><span class="hs-identifier">n</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="TyCoRep.html#NumTyLit"><span class="hs-identifier hs-var">NumTyLit</span></a><span> </span><a href="#local-1628087464"><span class="hs-identifier hs-var">n</span></a><span class="hs-special">)</span><span>
</span><a name="line-937"></a><span class="hs-identifier">tcIfaceTyLit</span><span> </span><span class="hs-special">(</span><a href="IfaceType.html#IfaceStrTyLit"><span class="hs-identifier hs-var">IfaceStrTyLit</span></a><span> </span><a name="local-1628087465"><a href="#local-1628087465"><span class="hs-identifier">n</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="TyCoRep.html#StrTyLit"><span class="hs-identifier hs-var">StrTyLit</span></a><span> </span><a href="#local-1628087465"><span class="hs-identifier hs-var">n</span></a><span class="hs-special">)</span><span>
</span><a name="line-938"></a><span>
</span><a name="line-939"></a><span class="hs-comment">{-
%************************************************************************
%*                                                                      *
                        Coercions
*                                                                      *
************************************************************************
-}</span><span>
</span><a name="line-946"></a><span>
</span><a name="line-947"></a><span class="hs-identifier">tcIfaceCo</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="IfaceType.html#IfaceCoercion"><span class="hs-identifier hs-type">IfaceCoercion</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><a href="TyCoRep.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a><span>
</span><a name="line-948"></a><a name="tcIfaceCo"><a href="TcIface.html#tcIfaceCo"><span class="hs-identifier">tcIfaceCo</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1628087466"><span class="hs-identifier hs-var">go</span></a><span>
</span><a name="line-949"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-950"></a><span>    </span><a name="local-1628087466"><a href="#local-1628087466"><span class="hs-identifier">go</span></a></a><span> </span><span class="hs-special">(</span><a href="IfaceType.html#IfaceReflCo"><span class="hs-identifier hs-var">IfaceReflCo</span></a><span> </span><a name="local-1628087469"><a href="#local-1628087469"><span class="hs-identifier">r</span></a></a><span> </span><a name="local-1628087470"><a href="#local-1628087470"><span class="hs-identifier">t</span></a></a><span class="hs-special">)</span><span>         </span><span class="hs-glyph">=</span><span> </span><a href="TyCoRep.html#Refl"><span class="hs-identifier hs-var">Refl</span></a><span> </span><a href="#local-1628087469"><span class="hs-identifier hs-var">r</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a><span> </span><a href="TcIface.html#tcIfaceType"><span class="hs-identifier hs-var">tcIfaceType</span></a><span> </span><a href="#local-1628087470"><span class="hs-identifier hs-var">t</span></a><span>
</span><a name="line-951"></a><span>    </span><span class="hs-identifier">go</span><span> </span><span class="hs-special">(</span><a href="IfaceType.html#IfaceFunCo"><span class="hs-identifier hs-var">IfaceFunCo</span></a><span> </span><a name="local-1628087471"><a href="#local-1628087471"><span class="hs-identifier">r</span></a></a><span> </span><a name="local-1628087472"><a href="#local-1628087472"><span class="hs-identifier">c1</span></a></a><span> </span><a name="local-1628087473"><a href="#local-1628087473"><span class="hs-identifier">c2</span></a></a><span class="hs-special">)</span><span>      </span><span class="hs-glyph">=</span><span> </span><a href="Coercion.html#mkFunCo"><span class="hs-identifier hs-var">mkFunCo</span></a><span> </span><a href="#local-1628087471"><span class="hs-identifier hs-var">r</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a><span> </span><a href="#local-1628087466"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-1628087472"><span class="hs-identifier hs-var">c1</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a><span> </span><a href="#local-1628087466"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-1628087473"><span class="hs-identifier hs-var">c2</span></a><span>
</span><a name="line-952"></a><span>    </span><span class="hs-identifier">go</span><span> </span><span class="hs-special">(</span><a href="IfaceType.html#IfaceTyConAppCo"><span class="hs-identifier hs-var">IfaceTyConAppCo</span></a><span> </span><a name="local-1628087474"><a href="#local-1628087474"><span class="hs-identifier">r</span></a></a><span> </span><a name="local-1628087475"><a href="#local-1628087475"><span class="hs-identifier">tc</span></a></a><span> </span><a name="local-1628087476"><a href="#local-1628087476"><span class="hs-identifier">cs</span></a></a><span class="hs-special">)</span><span>
</span><a name="line-953"></a><span>      </span><span class="hs-glyph">=</span><span> </span><a href="TyCoRep.html#TyConAppCo"><span class="hs-identifier hs-var">TyConAppCo</span></a><span> </span><a href="#local-1628087474"><span class="hs-identifier hs-var">r</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a><span> </span><a href="TcIface.html#tcIfaceTyCon"><span class="hs-identifier hs-var">tcIfaceTyCon</span></a><span> </span><a href="#local-1628087475"><span class="hs-identifier hs-var">tc</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a><span> </span><a href="#local-1628087466"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-1628087476"><span class="hs-identifier hs-var">cs</span></a><span>
</span><a name="line-954"></a><span>    </span><span class="hs-identifier">go</span><span> </span><span class="hs-special">(</span><a href="IfaceType.html#IfaceAppCo"><span class="hs-identifier hs-var">IfaceAppCo</span></a><span> </span><a name="local-1628087477"><a href="#local-1628087477"><span class="hs-identifier">c1</span></a></a><span> </span><a name="local-1628087478"><a href="#local-1628087478"><span class="hs-identifier">c2</span></a></a><span class="hs-special">)</span><span>        </span><span class="hs-glyph">=</span><span> </span><a href="TyCoRep.html#AppCo"><span class="hs-identifier hs-var">AppCo</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a><span> </span><a href="#local-1628087466"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-1628087477"><span class="hs-identifier hs-var">c1</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a><span> </span><a href="#local-1628087466"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-1628087478"><span class="hs-identifier hs-var">c2</span></a><span>
</span><a name="line-955"></a><span>    </span><span class="hs-identifier">go</span><span> </span><span class="hs-special">(</span><a href="IfaceType.html#IfaceForAllCo"><span class="hs-identifier hs-var">IfaceForAllCo</span></a><span> </span><a name="local-1628087479"><a href="#local-1628087479"><span class="hs-identifier">tv</span></a></a><span> </span><a name="local-1628087480"><a href="#local-1628087480"><span class="hs-identifier">k</span></a></a><span> </span><a name="local-1628087481"><a href="#local-1628087481"><span class="hs-identifier">c</span></a></a><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><a name="local-1628087482"><a href="#local-1628087482"><span class="hs-identifier">k'</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="#local-1628087466"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-1628087480"><span class="hs-identifier hs-var">k</span></a><span>
</span><a name="line-956"></a><span>                                      </span><span class="hs-special">;</span><span> </span><a href="TcIface.html#bindIfaceTyVar"><span class="hs-identifier hs-var">bindIfaceTyVar</span></a><span> </span><a href="#local-1628087479"><span class="hs-identifier hs-var">tv</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><span class="hs-glyph">\</span><span> </span><a name="local-1628087483"><a href="#local-1628087483"><span class="hs-identifier">tv'</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-957"></a><span>                                        </span><a href="TyCoRep.html#ForAllCo"><span class="hs-identifier hs-var">ForAllCo</span></a><span> </span><a href="#local-1628087483"><span class="hs-identifier hs-var">tv'</span></a><span> </span><a href="#local-1628087482"><span class="hs-identifier hs-var">k'</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a><span> </span><a href="#local-1628087466"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-1628087481"><span class="hs-identifier hs-var">c</span></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-958"></a><span>    </span><span class="hs-identifier">go</span><span> </span><span class="hs-special">(</span><a href="IfaceType.html#IfaceCoVarCo"><span class="hs-identifier hs-var">IfaceCoVarCo</span></a><span> </span><a name="local-1628087484"><a href="#local-1628087484"><span class="hs-identifier">n</span></a></a><span class="hs-special">)</span><span>          </span><span class="hs-glyph">=</span><span> </span><a href="TyCoRep.html#CoVarCo"><span class="hs-identifier hs-var">CoVarCo</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a><span> </span><a href="#local-1628087467"><span class="hs-identifier hs-var">go_var</span></a><span> </span><a href="#local-1628087484"><span class="hs-identifier hs-var">n</span></a><span>
</span><a name="line-959"></a><span>    </span><span class="hs-identifier">go</span><span> </span><span class="hs-special">(</span><a href="IfaceType.html#IfaceAxiomInstCo"><span class="hs-identifier hs-var">IfaceAxiomInstCo</span></a><span> </span><a name="local-1628087485"><a href="#local-1628087485"><span class="hs-identifier">n</span></a></a><span> </span><a name="local-1628087486"><a href="#local-1628087486"><span class="hs-identifier">i</span></a></a><span> </span><a name="local-1628087487"><a href="#local-1628087487"><span class="hs-identifier">cs</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="TyCoRep.html#AxiomInstCo"><span class="hs-identifier hs-var">AxiomInstCo</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a><span> </span><a href="TcIface.html#tcIfaceCoAxiom"><span class="hs-identifier hs-var">tcIfaceCoAxiom</span></a><span> </span><a href="#local-1628087485"><span class="hs-identifier hs-var">n</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a><span> </span><a href="#local-1628087486"><span class="hs-identifier hs-var">i</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a><span> </span><a href="#local-1628087466"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-1628087487"><span class="hs-identifier hs-var">cs</span></a><span>
</span><a name="line-960"></a><span>    </span><span class="hs-identifier">go</span><span> </span><span class="hs-special">(</span><a href="IfaceType.html#IfaceUnivCo"><span class="hs-identifier hs-var">IfaceUnivCo</span></a><span> </span><a name="local-1628087488"><a href="#local-1628087488"><span class="hs-identifier">p</span></a></a><span> </span><a name="local-1628087489"><a href="#local-1628087489"><span class="hs-identifier">r</span></a></a><span> </span><a name="local-1628087490"><a href="#local-1628087490"><span class="hs-identifier">t1</span></a></a><span> </span><a name="local-1628087491"><a href="#local-1628087491"><span class="hs-identifier">t2</span></a></a><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><a href="TyCoRep.html#UnivCo"><span class="hs-identifier hs-var">UnivCo</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a><span> </span><a href="TcIface.html#tcIfaceUnivCoProv"><span class="hs-identifier hs-var">tcIfaceUnivCoProv</span></a><span> </span><a href="#local-1628087488"><span class="hs-identifier hs-var">p</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a><span> </span><a href="#local-1628087489"><span class="hs-identifier hs-var">r</span></a><span>
</span><a name="line-961"></a><span>                                          </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a><span> </span><a href="TcIface.html#tcIfaceType"><span class="hs-identifier hs-var">tcIfaceType</span></a><span> </span><a href="#local-1628087490"><span class="hs-identifier hs-var">t1</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a><span> </span><a href="TcIface.html#tcIfaceType"><span class="hs-identifier hs-var">tcIfaceType</span></a><span> </span><a href="#local-1628087491"><span class="hs-identifier hs-var">t2</span></a><span>
</span><a name="line-962"></a><span>    </span><span class="hs-identifier">go</span><span> </span><span class="hs-special">(</span><a href="IfaceType.html#IfaceSymCo"><span class="hs-identifier hs-var">IfaceSymCo</span></a><span> </span><a name="local-1628087492"><a href="#local-1628087492"><span class="hs-identifier">c</span></a></a><span class="hs-special">)</span><span>            </span><span class="hs-glyph">=</span><span> </span><a href="TyCoRep.html#SymCo"><span class="hs-identifier hs-var">SymCo</span></a><span>    </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a><span> </span><a href="#local-1628087466"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-1628087492"><span class="hs-identifier hs-var">c</span></a><span>
</span><a name="line-963"></a><span>    </span><span class="hs-identifier">go</span><span> </span><span class="hs-special">(</span><a href="IfaceType.html#IfaceTransCo"><span class="hs-identifier hs-var">IfaceTransCo</span></a><span> </span><a name="local-1628087493"><a href="#local-1628087493"><span class="hs-identifier">c1</span></a></a><span> </span><a name="local-1628087494"><a href="#local-1628087494"><span class="hs-identifier">c2</span></a></a><span class="hs-special">)</span><span>      </span><span class="hs-glyph">=</span><span> </span><a href="TyCoRep.html#TransCo"><span class="hs-identifier hs-var">TransCo</span></a><span>  </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a><span> </span><a href="#local-1628087466"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-1628087493"><span class="hs-identifier hs-var">c1</span></a><span>
</span><a name="line-964"></a><span>                                            </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a><span> </span><a href="#local-1628087466"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-1628087494"><span class="hs-identifier hs-var">c2</span></a><span>
</span><a name="line-965"></a><span>    </span><span class="hs-identifier">go</span><span> </span><span class="hs-special">(</span><a href="IfaceType.html#IfaceInstCo"><span class="hs-identifier hs-var">IfaceInstCo</span></a><span> </span><a name="local-1628087495"><a href="#local-1628087495"><span class="hs-identifier">c1</span></a></a><span> </span><a name="local-1628087496"><a href="#local-1628087496"><span class="hs-identifier">t2</span></a></a><span class="hs-special">)</span><span>       </span><span class="hs-glyph">=</span><span> </span><a href="TyCoRep.html#InstCo"><span class="hs-identifier hs-var">InstCo</span></a><span>   </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a><span> </span><a href="#local-1628087466"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-1628087495"><span class="hs-identifier hs-var">c1</span></a><span>
</span><a name="line-966"></a><span>                                            </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a><span> </span><a href="#local-1628087466"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-1628087496"><span class="hs-identifier hs-var">t2</span></a><span>
</span><a name="line-967"></a><span>    </span><span class="hs-identifier">go</span><span> </span><span class="hs-special">(</span><a href="IfaceType.html#IfaceNthCo"><span class="hs-identifier hs-var">IfaceNthCo</span></a><span> </span><a name="local-1628087497"><a href="#local-1628087497"><span class="hs-identifier">d</span></a></a><span> </span><a name="local-1628087498"><a href="#local-1628087498"><span class="hs-identifier">c</span></a></a><span class="hs-special">)</span><span>          </span><span class="hs-glyph">=</span><span> </span><a href="TyCoRep.html#NthCo"><span class="hs-identifier hs-var">NthCo</span></a><span> </span><a href="#local-1628087497"><span class="hs-identifier hs-var">d</span></a><span>  </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a><span> </span><a href="#local-1628087466"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-1628087498"><span class="hs-identifier hs-var">c</span></a><span>
</span><a name="line-968"></a><span>    </span><span class="hs-identifier">go</span><span> </span><span class="hs-special">(</span><a href="IfaceType.html#IfaceLRCo"><span class="hs-identifier hs-var">IfaceLRCo</span></a><span> </span><a name="local-1628087499"><a href="#local-1628087499"><span class="hs-identifier">lr</span></a></a><span> </span><a name="local-1628087500"><a href="#local-1628087500"><span class="hs-identifier">c</span></a></a><span class="hs-special">)</span><span>          </span><span class="hs-glyph">=</span><span> </span><a href="TyCoRep.html#LRCo"><span class="hs-identifier hs-var">LRCo</span></a><span> </span><a href="#local-1628087499"><span class="hs-identifier hs-var">lr</span></a><span>  </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a><span> </span><a href="#local-1628087466"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-1628087500"><span class="hs-identifier hs-var">c</span></a><span>
</span><a name="line-969"></a><span>    </span><span class="hs-identifier">go</span><span> </span><span class="hs-special">(</span><a href="IfaceType.html#IfaceCoherenceCo"><span class="hs-identifier hs-var">IfaceCoherenceCo</span></a><span> </span><a name="local-1628087501"><a href="#local-1628087501"><span class="hs-identifier">c1</span></a></a><span> </span><a name="local-1628087502"><a href="#local-1628087502"><span class="hs-identifier">c2</span></a></a><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><a href="TyCoRep.html#CoherenceCo"><span class="hs-identifier hs-var">CoherenceCo</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a><span> </span><a href="#local-1628087466"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-1628087501"><span class="hs-identifier hs-var">c1</span></a><span>
</span><a name="line-970"></a><span>                                               </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a><span> </span><a href="#local-1628087466"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-1628087502"><span class="hs-identifier hs-var">c2</span></a><span>
</span><a name="line-971"></a><span>    </span><span class="hs-identifier">go</span><span> </span><span class="hs-special">(</span><a href="IfaceType.html#IfaceKindCo"><span class="hs-identifier hs-var">IfaceKindCo</span></a><span> </span><a name="local-1628087503"><a href="#local-1628087503"><span class="hs-identifier">c</span></a></a><span class="hs-special">)</span><span>           </span><span class="hs-glyph">=</span><span> </span><a href="TyCoRep.html#KindCo"><span class="hs-identifier hs-var">KindCo</span></a><span>   </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a><span> </span><a href="#local-1628087466"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-1628087503"><span class="hs-identifier hs-var">c</span></a><span>
</span><a name="line-972"></a><span>    </span><span class="hs-identifier">go</span><span> </span><span class="hs-special">(</span><a href="IfaceType.html#IfaceSubCo"><span class="hs-identifier hs-var">IfaceSubCo</span></a><span> </span><a name="local-1628087504"><a href="#local-1628087504"><span class="hs-identifier">c</span></a></a><span class="hs-special">)</span><span>            </span><span class="hs-glyph">=</span><span> </span><a href="TyCoRep.html#SubCo"><span class="hs-identifier hs-var">SubCo</span></a><span>    </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a><span> </span><a href="#local-1628087466"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-1628087504"><span class="hs-identifier hs-var">c</span></a><span>
</span><a name="line-973"></a><span>    </span><span class="hs-identifier">go</span><span> </span><span class="hs-special">(</span><a href="IfaceType.html#IfaceAxiomRuleCo"><span class="hs-identifier hs-var">IfaceAxiomRuleCo</span></a><span> </span><a name="local-1628087505"><a href="#local-1628087505"><span class="hs-identifier">ax</span></a></a><span> </span><a name="local-1628087506"><a href="#local-1628087506"><span class="hs-identifier">cos</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="TyCoRep.html#AxiomRuleCo"><span class="hs-identifier hs-var">AxiomRuleCo</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a><span> </span><a href="#local-1628087468"><span class="hs-identifier hs-var">go_axiom_rule</span></a><span> </span><a href="#local-1628087505"><span class="hs-identifier hs-var">ax</span></a><span>
</span><a name="line-974"></a><span>                                               </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a><span> </span><a href="#local-1628087466"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-1628087506"><span class="hs-identifier hs-var">cos</span></a><span>
</span><a name="line-975"></a><span>
</span><a name="line-976"></a><span>    </span><span class="hs-identifier">go_var</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="FastString.html#FastString"><span class="hs-identifier hs-type">FastString</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><a href="Var.html#CoVar"><span class="hs-identifier hs-type">CoVar</span></a><span>
</span><a name="line-977"></a><span>    </span><a name="local-1628087467"><a href="#local-1628087467"><span class="hs-identifier">go_var</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="IfaceEnv.html#tcIfaceLclId"><span class="hs-identifier hs-var">tcIfaceLclId</span></a><span>
</span><a name="line-978"></a><span>
</span><a name="line-979"></a><span>    </span><span class="hs-identifier">go_axiom_rule</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="FastString.html#FastString"><span class="hs-identifier hs-type">FastString</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><a href="CoAxiom.html#CoAxiomRule"><span class="hs-identifier hs-type">CoAxiomRule</span></a><span>
</span><a name="line-980"></a><span>    </span><a name="local-1628087468"><a href="#local-1628087468"><span class="hs-identifier">go_axiom_rule</span></a></a><span> </span><a name="local-1628087507"><a href="#local-1628087507"><span class="hs-identifier">n</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-981"></a><span>      </span><span class="hs-keyword">case</span><span> </span><a href="../containers-0.5.7.1/src/%{MODULE/./-}.html#%{NAME}/Data.Map.Base.html#lookup"><span class="hs-identifier hs-var">Map</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">lookup</span></a><span> </span><a href="#local-1628087507"><span class="hs-identifier hs-var">n</span></a><span> </span><a href="TcTypeNats.html#typeNatCoAxiomRules"><span class="hs-identifier hs-var">typeNatCoAxiomRules</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-982"></a><span>        </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Just"><span class="hs-identifier hs-var">Just</span></a><span> </span><a name="local-1628087508"><a href="#local-1628087508"><span class="hs-identifier">ax</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><a href="#local-1628087508"><span class="hs-identifier hs-var">ax</span></a><span>
</span><a name="line-983"></a><span>        </span><span class="hs-identifier">_</span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Outputable.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a><span> </span><span class="hs-string">&quot;go_axiom_rule&quot;</span><span> </span><span class="hs-special">(</span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1628087507"><span class="hs-identifier hs-var">n</span></a><span class="hs-special">)</span><span>
</span><a name="line-984"></a><span>
</span><a name="line-985"></a><span class="hs-identifier">tcIfaceUnivCoProv</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="IfaceType.html#IfaceUnivCoProv"><span class="hs-identifier hs-type">IfaceUnivCoProv</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><a href="TyCoRep.html#UnivCoProvenance"><span class="hs-identifier hs-type">UnivCoProvenance</span></a><span>
</span><a name="line-986"></a><a name="tcIfaceUnivCoProv"><a href="TcIface.html#tcIfaceUnivCoProv"><span class="hs-identifier">tcIfaceUnivCoProv</span></a></a><span> </span><a href="IfaceType.html#IfaceUnsafeCoerceProv"><span class="hs-identifier hs-var">IfaceUnsafeCoerceProv</span></a><span>     </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><a href="TyCoRep.html#UnsafeCoerceProv"><span class="hs-identifier hs-var">UnsafeCoerceProv</span></a><span>
</span><a name="line-987"></a><span class="hs-identifier">tcIfaceUnivCoProv</span><span> </span><span class="hs-special">(</span><a href="IfaceType.html#IfacePhantomProv"><span class="hs-identifier hs-var">IfacePhantomProv</span></a><span> </span><a name="local-1628087509"><a href="#local-1628087509"><span class="hs-identifier">kco</span></a></a><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><a href="TyCoRep.html#PhantomProv"><span class="hs-identifier hs-var">PhantomProv</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a><span> </span><a href="TcIface.html#tcIfaceCo"><span class="hs-identifier hs-var">tcIfaceCo</span></a><span> </span><a href="#local-1628087509"><span class="hs-identifier hs-var">kco</span></a><span>
</span><a name="line-988"></a><span class="hs-identifier">tcIfaceUnivCoProv</span><span> </span><span class="hs-special">(</span><a href="IfaceType.html#IfaceProofIrrelProv"><span class="hs-identifier hs-var">IfaceProofIrrelProv</span></a><span> </span><a name="local-1628087510"><a href="#local-1628087510"><span class="hs-identifier">kco</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="TyCoRep.html#ProofIrrelProv"><span class="hs-identifier hs-var">ProofIrrelProv</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a><span> </span><a href="TcIface.html#tcIfaceCo"><span class="hs-identifier hs-var">tcIfaceCo</span></a><span> </span><a href="#local-1628087510"><span class="hs-identifier hs-var">kco</span></a><span>
</span><a name="line-989"></a><span class="hs-identifier">tcIfaceUnivCoProv</span><span> </span><span class="hs-special">(</span><a href="IfaceType.html#IfacePluginProv"><span class="hs-identifier hs-var">IfacePluginProv</span></a><span> </span><a name="local-1628087511"><a href="#local-1628087511"><span class="hs-identifier">str</span></a></a><span class="hs-special">)</span><span>     </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><a href="TyCoRep.html#PluginProv"><span class="hs-identifier hs-var">PluginProv</span></a><span> </span><a href="#local-1628087511"><span class="hs-identifier hs-var">str</span></a><span>
</span><a name="line-990"></a><span>
</span><a name="line-991"></a><span class="hs-comment">{-
************************************************************************
*                                                                      *
                        Core
*                                                                      *
************************************************************************
-}</span><span>
</span><a name="line-998"></a><span>
</span><a name="line-999"></a><span class="hs-identifier">tcIfaceExpr</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="IfaceSyn.html#IfaceExpr"><span class="hs-identifier hs-type">IfaceExpr</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><a href="CoreSyn.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a><span>
</span><a name="line-1000"></a><a name="tcIfaceExpr"><a href="TcIface.html#tcIfaceExpr"><span class="hs-identifier">tcIfaceExpr</span></a></a><span> </span><span class="hs-special">(</span><a href="IfaceSyn.html#IfaceType"><span class="hs-identifier hs-var">IfaceType</span></a><span> </span><a name="local-1628087512"><a href="#local-1628087512"><span class="hs-identifier">ty</span></a></a><span class="hs-special">)</span><span>
</span><a name="line-1001"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="CoreSyn.html#Type"><span class="hs-identifier hs-var">Type</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a><span> </span><a href="TcIface.html#tcIfaceType"><span class="hs-identifier hs-var">tcIfaceType</span></a><span> </span><a href="#local-1628087512"><span class="hs-identifier hs-var">ty</span></a><span>
</span><a name="line-1002"></a><span>
</span><a name="line-1003"></a><span class="hs-identifier">tcIfaceExpr</span><span> </span><span class="hs-special">(</span><a href="IfaceSyn.html#IfaceCo"><span class="hs-identifier hs-var">IfaceCo</span></a><span> </span><a name="local-1628087513"><a href="#local-1628087513"><span class="hs-identifier">co</span></a></a><span class="hs-special">)</span><span>
</span><a name="line-1004"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="CoreSyn.html#Coercion"><span class="hs-identifier hs-var">Coercion</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a><span> </span><a href="TcIface.html#tcIfaceCo"><span class="hs-identifier hs-var">tcIfaceCo</span></a><span> </span><a href="#local-1628087513"><span class="hs-identifier hs-var">co</span></a><span>
</span><a name="line-1005"></a><span>
</span><a name="line-1006"></a><span class="hs-identifier">tcIfaceExpr</span><span> </span><span class="hs-special">(</span><a href="IfaceSyn.html#IfaceCast"><span class="hs-identifier hs-var">IfaceCast</span></a><span> </span><a name="local-1628087514"><a href="#local-1628087514"><span class="hs-identifier">expr</span></a></a><span> </span><a name="local-1628087515"><a href="#local-1628087515"><span class="hs-identifier">co</span></a></a><span class="hs-special">)</span><span>
</span><a name="line-1007"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="CoreSyn.html#Cast"><span class="hs-identifier hs-var">Cast</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a><span> </span><a href="TcIface.html#tcIfaceExpr"><span class="hs-identifier hs-var">tcIfaceExpr</span></a><span> </span><a href="#local-1628087514"><span class="hs-identifier hs-var">expr</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a><span> </span><a href="TcIface.html#tcIfaceCo"><span class="hs-identifier hs-var">tcIfaceCo</span></a><span> </span><a href="#local-1628087515"><span class="hs-identifier hs-var">co</span></a><span>
</span><a name="line-1008"></a><span>
</span><a name="line-1009"></a><span class="hs-identifier">tcIfaceExpr</span><span> </span><span class="hs-special">(</span><a href="IfaceSyn.html#IfaceLcl"><span class="hs-identifier hs-var">IfaceLcl</span></a><span> </span><a name="local-1628087516"><a href="#local-1628087516"><span class="hs-identifier">name</span></a></a><span class="hs-special">)</span><span>
</span><a name="line-1010"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="CoreSyn.html#Var"><span class="hs-identifier hs-var">Var</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a><span> </span><a href="IfaceEnv.html#tcIfaceLclId"><span class="hs-identifier hs-var">tcIfaceLclId</span></a><span> </span><a href="#local-1628087516"><span class="hs-identifier hs-var">name</span></a><span>
</span><a name="line-1011"></a><span>
</span><a name="line-1012"></a><span class="hs-identifier">tcIfaceExpr</span><span> </span><span class="hs-special">(</span><a href="IfaceSyn.html#IfaceExt"><span class="hs-identifier hs-var">IfaceExt</span></a><span> </span><a name="local-1628087517"><a href="#local-1628087517"><span class="hs-identifier">gbl</span></a></a><span class="hs-special">)</span><span>
</span><a name="line-1013"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="CoreSyn.html#Var"><span class="hs-identifier hs-var">Var</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a><span> </span><a href="TcIface.html#tcIfaceExtId"><span class="hs-identifier hs-var">tcIfaceExtId</span></a><span> </span><a href="#local-1628087517"><span class="hs-identifier hs-var">gbl</span></a><span>
</span><a name="line-1014"></a><span>
</span><a name="line-1015"></a><span class="hs-identifier">tcIfaceExpr</span><span> </span><span class="hs-special">(</span><a href="IfaceSyn.html#IfaceLit"><span class="hs-identifier hs-var">IfaceLit</span></a><span> </span><a name="local-1628087518"><a href="#local-1628087518"><span class="hs-identifier">lit</span></a></a><span class="hs-special">)</span><span>
</span><a name="line-1016"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><a name="local-1628087519"><a href="#local-1628087519"><span class="hs-identifier">lit'</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tcIfaceLit"><span class="hs-identifier hs-var">tcIfaceLit</span></a><span> </span><a href="#local-1628087518"><span class="hs-identifier hs-var">lit</span></a><span>
</span><a name="line-1017"></a><span>       </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="CoreSyn.html#Lit"><span class="hs-identifier hs-var">Lit</span></a><span> </span><a href="#local-1628087519"><span class="hs-identifier hs-var">lit'</span></a><span class="hs-special">)</span><span>
</span><a name="line-1018"></a><span>
</span><a name="line-1019"></a><span class="hs-identifier">tcIfaceExpr</span><span> </span><span class="hs-special">(</span><a href="IfaceSyn.html#IfaceFCall"><span class="hs-identifier hs-var">IfaceFCall</span></a><span> </span><a name="local-1628087520"><a href="#local-1628087520"><span class="hs-identifier">cc</span></a></a><span> </span><a name="local-1628087521"><a href="#local-1628087521"><span class="hs-identifier">ty</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-1020"></a><span>    </span><a name="local-1628087522"><a href="#local-1628087522"><span class="hs-identifier">ty'</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tcIfaceType"><span class="hs-identifier hs-var">tcIfaceType</span></a><span> </span><a href="#local-1628087521"><span class="hs-identifier hs-var">ty</span></a><span>
</span><a name="line-1021"></a><span>    </span><a name="local-1628087523"><a href="#local-1628087523"><span class="hs-identifier">u</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcRnMonad.html#newUnique"><span class="hs-identifier hs-var">newUnique</span></a><span>
</span><a name="line-1022"></a><span>    </span><a name="local-1628087524"><a href="#local-1628087524"><span class="hs-identifier">dflags</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="DynFlags.html#getDynFlags"><span class="hs-identifier hs-var">getDynFlags</span></a><span>
</span><a name="line-1023"></a><span>    </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="CoreSyn.html#Var"><span class="hs-identifier hs-var">Var</span></a><span> </span><span class="hs-special">(</span><a href="MkId.html#mkFCallId"><span class="hs-identifier hs-var">mkFCallId</span></a><span> </span><a href="#local-1628087524"><span class="hs-identifier hs-var">dflags</span></a><span> </span><a href="#local-1628087523"><span class="hs-identifier hs-var">u</span></a><span> </span><a href="#local-1628087520"><span class="hs-identifier hs-var">cc</span></a><span> </span><a href="#local-1628087522"><span class="hs-identifier hs-var">ty'</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-1024"></a><span>
</span><a name="line-1025"></a><span class="hs-identifier">tcIfaceExpr</span><span> </span><span class="hs-special">(</span><a href="IfaceSyn.html#IfaceTuple"><span class="hs-identifier hs-var">IfaceTuple</span></a><span> </span><a name="local-1628087525"><a href="#local-1628087525"><span class="hs-identifier">sort</span></a></a><span> </span><a name="local-1628087526"><a href="#local-1628087526"><span class="hs-identifier">args</span></a></a><span class="hs-special">)</span><span>
</span><a name="line-1026"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><a name="local-1628087528"><a href="#local-1628087528"><span class="hs-identifier">args'</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a><span> </span><a href="TcIface.html#tcIfaceExpr"><span class="hs-identifier hs-var">tcIfaceExpr</span></a><span> </span><a href="#local-1628087526"><span class="hs-identifier hs-var">args</span></a><span>
</span><a name="line-1027"></a><span>       </span><span class="hs-special">;</span><span> </span><a name="local-1628087529"><a href="#local-1628087529"><span class="hs-identifier">tc</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tcTupleTyCon"><span class="hs-identifier hs-var">tcTupleTyCon</span></a><span> </span><span class="hs-identifier hs-var">False</span><span> </span><a href="#local-1628087525"><span class="hs-identifier hs-var">sort</span></a><span> </span><a href="#local-1628087527"><span class="hs-identifier hs-var">arity</span></a><span>
</span><a name="line-1028"></a><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><a name="local-1628087530"><a href="#local-1628087530"><span class="hs-identifier">con_tys</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a><span> </span><a href="CoreUtils.html#exprType"><span class="hs-identifier hs-var">exprType</span></a><span> </span><a href="#local-1628087528"><span class="hs-identifier hs-var">args'</span></a><span>
</span><a name="line-1029"></a><span>             </span><a name="local-1628087531"><a href="#local-1628087531"><span class="hs-identifier">some_con_args</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a><span> </span><a href="CoreSyn.html#Type"><span class="hs-identifier hs-var">Type</span></a><span> </span><a href="#local-1628087530"><span class="hs-identifier hs-var">con_tys</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a><span> </span><a href="#local-1628087528"><span class="hs-identifier hs-var">args'</span></a><span>
</span><a name="line-1030"></a><span>             </span><a name="local-1628087532"><a href="#local-1628087532"><span class="hs-identifier">con_args</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="#local-1628087525"><span class="hs-identifier hs-var">sort</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-1031"></a><span>               </span><a href="BasicTypes.html#UnboxedTuple"><span class="hs-identifier hs-var">UnboxedTuple</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a><span> </span><span class="hs-special">(</span><a href="CoreSyn.html#Type"><span class="hs-identifier hs-var">Type</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a><span> </span><a href="Type.html#getRuntimeRep"><span class="hs-identifier hs-var">getRuntimeRep</span></a><span> </span><span class="hs-string">&quot;tcIfaceExpr&quot;</span><span class="hs-special">)</span><span> </span><a href="#local-1628087530"><span class="hs-identifier hs-var">con_tys</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a><span> </span><a href="#local-1628087531"><span class="hs-identifier hs-var">some_con_args</span></a><span>
</span><a name="line-1032"></a><span>               </span><span class="hs-identifier">_</span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-1628087531"><span class="hs-identifier hs-var">some_con_args</span></a><span>
</span><a name="line-1033"></a><span>                        </span><span class="hs-comment">-- Put the missing type arguments back in</span><span>
</span><a name="line-1034"></a><span>             </span><a name="local-1628087533"><a href="#local-1628087533"><span class="hs-identifier">con_id</span></a></a><span>   </span><span class="hs-glyph">=</span><span> </span><a href="DataCon.html#dataConWorkId"><span class="hs-identifier hs-var">dataConWorkId</span></a><span> </span><span class="hs-special">(</span><a href="TyCon.html#tyConSingleDataCon"><span class="hs-identifier hs-var">tyConSingleDataCon</span></a><span> </span><a href="#local-1628087529"><span class="hs-identifier hs-var">tc</span></a><span class="hs-special">)</span><span>
</span><a name="line-1035"></a><span>       </span><span class="hs-special">;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="CoreSyn.html#mkApps"><span class="hs-identifier hs-var">mkApps</span></a><span> </span><span class="hs-special">(</span><a href="CoreSyn.html#Var"><span class="hs-identifier hs-var">Var</span></a><span> </span><a href="#local-1628087533"><span class="hs-identifier hs-var">con_id</span></a><span class="hs-special">)</span><span> </span><a href="#local-1628087532"><span class="hs-identifier hs-var">con_args</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-1036"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-1037"></a><span>    </span><a name="local-1628087527"><a href="#local-1628087527"><span class="hs-identifier">arity</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Foldable.html#length"><span class="hs-identifier hs-var">length</span></a><span> </span><a href="#local-1628087526"><span class="hs-identifier hs-var">args</span></a><span>
</span><a name="line-1038"></a><span>
</span><a name="line-1039"></a><span class="hs-identifier">tcIfaceExpr</span><span> </span><span class="hs-special">(</span><a href="IfaceSyn.html#IfaceLam"><span class="hs-identifier hs-var">IfaceLam</span></a><span> </span><span class="hs-special">(</span><a name="local-1628087534"><a href="#local-1628087534"><span class="hs-identifier">bndr</span></a></a><span class="hs-special">,</span><span> </span><a name="local-1628087535"><a href="#local-1628087535"><span class="hs-identifier">os</span></a></a><span class="hs-special">)</span><span> </span><a name="local-1628087536"><a href="#local-1628087536"><span class="hs-identifier">body</span></a></a><span class="hs-special">)</span><span>
</span><a name="line-1040"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="TcIface.html#bindIfaceBndr"><span class="hs-identifier hs-var">bindIfaceBndr</span></a><span> </span><a href="#local-1628087534"><span class="hs-identifier hs-var">bndr</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><span class="hs-glyph">\</span><a name="local-1628087540"><a href="#local-1628087540"><span class="hs-identifier">bndr'</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-1041"></a><span>    </span><a href="CoreSyn.html#Lam"><span class="hs-identifier hs-var">Lam</span></a><span> </span><span class="hs-special">(</span><a href="#local-1628087537"><span class="hs-identifier hs-var">tcIfaceOneShot</span></a><span> </span><a href="#local-1628087535"><span class="hs-identifier hs-var">os</span></a><span> </span><a href="#local-1628087540"><span class="hs-identifier hs-var">bndr'</span></a><span class="hs-special">)</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a><span> </span><a href="TcIface.html#tcIfaceExpr"><span class="hs-identifier hs-var">tcIfaceExpr</span></a><span> </span><a href="#local-1628087536"><span class="hs-identifier hs-var">body</span></a><span>
</span><a name="line-1042"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-1043"></a><span>    </span><a name="local-1628087537"><a href="#local-1628087537"><span class="hs-identifier">tcIfaceOneShot</span></a></a><span> </span><a href="IfaceType.html#IfaceOneShot"><span class="hs-identifier hs-var">IfaceOneShot</span></a><span> </span><a name="local-1628087538"><a href="#local-1628087538"><span class="hs-identifier">b</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Id.html#setOneShotLambda"><span class="hs-identifier hs-var">setOneShotLambda</span></a><span> </span><a href="#local-1628087538"><span class="hs-identifier hs-var">b</span></a><span>
</span><a name="line-1044"></a><span>    </span><span class="hs-identifier">tcIfaceOneShot</span><span> </span><span class="hs-identifier">_</span><span>            </span><a name="local-1628087539"><a href="#local-1628087539"><span class="hs-identifier">b</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1628087539"><span class="hs-identifier hs-var">b</span></a><span>
</span><a name="line-1045"></a><span>
</span><a name="line-1046"></a><span class="hs-identifier">tcIfaceExpr</span><span> </span><span class="hs-special">(</span><a href="IfaceSyn.html#IfaceApp"><span class="hs-identifier hs-var">IfaceApp</span></a><span> </span><a name="local-1628087541"><a href="#local-1628087541"><span class="hs-identifier">fun</span></a></a><span> </span><a name="local-1628087542"><a href="#local-1628087542"><span class="hs-identifier">arg</span></a></a><span class="hs-special">)</span><span>
</span><a name="line-1047"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="CoreSyn.html#App"><span class="hs-identifier hs-var">App</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a><span> </span><a href="TcIface.html#tcIfaceExpr"><span class="hs-identifier hs-var">tcIfaceExpr</span></a><span> </span><a href="#local-1628087541"><span class="hs-identifier hs-var">fun</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a><span> </span><a href="TcIface.html#tcIfaceExpr"><span class="hs-identifier hs-var">tcIfaceExpr</span></a><span> </span><a href="#local-1628087542"><span class="hs-identifier hs-var">arg</span></a><span>
</span><a name="line-1048"></a><span>
</span><a name="line-1049"></a><span class="hs-identifier">tcIfaceExpr</span><span> </span><span class="hs-special">(</span><a href="IfaceSyn.html#IfaceECase"><span class="hs-identifier hs-var">IfaceECase</span></a><span> </span><a name="local-1628087543"><a href="#local-1628087543"><span class="hs-identifier">scrut</span></a></a><span> </span><a name="local-1628087544"><a href="#local-1628087544"><span class="hs-identifier">ty</span></a></a><span class="hs-special">)</span><span>
</span><a name="line-1050"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><a name="local-1628087545"><a href="#local-1628087545"><span class="hs-identifier">scrut'</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tcIfaceExpr"><span class="hs-identifier hs-var">tcIfaceExpr</span></a><span> </span><a href="#local-1628087543"><span class="hs-identifier hs-var">scrut</span></a><span>
</span><a name="line-1051"></a><span>       </span><span class="hs-special">;</span><span> </span><a name="local-1628087546"><a href="#local-1628087546"><span class="hs-identifier">ty'</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tcIfaceType"><span class="hs-identifier hs-var">tcIfaceType</span></a><span> </span><a href="#local-1628087544"><span class="hs-identifier hs-var">ty</span></a><span>
</span><a name="line-1052"></a><span>       </span><span class="hs-special">;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="MkCore.html#castBottomExpr"><span class="hs-identifier hs-var">castBottomExpr</span></a><span> </span><a href="#local-1628087545"><span class="hs-identifier hs-var">scrut'</span></a><span> </span><a href="#local-1628087546"><span class="hs-identifier hs-var">ty'</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-1053"></a><span>
</span><a name="line-1054"></a><span class="hs-identifier">tcIfaceExpr</span><span> </span><span class="hs-special">(</span><a href="IfaceSyn.html#IfaceCase"><span class="hs-identifier hs-var">IfaceCase</span></a><span> </span><a name="local-1628087547"><a href="#local-1628087547"><span class="hs-identifier">scrut</span></a></a><span> </span><a name="local-1628087548"><a href="#local-1628087548"><span class="hs-identifier">case_bndr</span></a></a><span> </span><a name="local-1628087549"><a href="#local-1628087549"><span class="hs-identifier">alts</span></a></a><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-1055"></a><span>    </span><a name="local-1628087550"><a href="#local-1628087550"><span class="hs-identifier">scrut'</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tcIfaceExpr"><span class="hs-identifier hs-var">tcIfaceExpr</span></a><span> </span><a href="#local-1628087547"><span class="hs-identifier hs-var">scrut</span></a><span>
</span><a name="line-1056"></a><span>    </span><a name="local-1628087551"><a href="#local-1628087551"><span class="hs-identifier">case_bndr_name</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="IfaceEnv.html#newIfaceName"><span class="hs-identifier hs-var">newIfaceName</span></a><span> </span><span class="hs-special">(</span><a href="OccName.html#mkVarOccFS"><span class="hs-identifier hs-var">mkVarOccFS</span></a><span> </span><a href="#local-1628087548"><span class="hs-identifier hs-var">case_bndr</span></a><span class="hs-special">)</span><span>
</span><a name="line-1057"></a><span>    </span><span class="hs-keyword">let</span><span>
</span><a name="line-1058"></a><span>        </span><a name="local-1628087552"><a href="#local-1628087552"><span class="hs-identifier">scrut_ty</span></a></a><span>   </span><span class="hs-glyph">=</span><span> </span><a href="CoreUtils.html#exprType"><span class="hs-identifier hs-var">exprType</span></a><span> </span><a href="#local-1628087550"><span class="hs-identifier hs-var">scrut'</span></a><span>
</span><a name="line-1059"></a><span>        </span><a name="local-1628087553"><a href="#local-1628087553"><span class="hs-identifier">case_bndr'</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Id.html#mkLocalIdOrCoVar"><span class="hs-identifier hs-var">mkLocalIdOrCoVar</span></a><span> </span><a href="#local-1628087551"><span class="hs-identifier hs-var">case_bndr_name</span></a><span> </span><a href="#local-1628087552"><span class="hs-identifier hs-var">scrut_ty</span></a><span>
</span><a name="line-1060"></a><span>        </span><a name="local-1628087554"><a href="#local-1628087554"><span class="hs-identifier">tc_app</span></a></a><span>     </span><span class="hs-glyph">=</span><span> </span><a href="Type.html#splitTyConApp"><span class="hs-identifier hs-var">splitTyConApp</span></a><span> </span><a href="#local-1628087552"><span class="hs-identifier hs-var">scrut_ty</span></a><span>
</span><a name="line-1061"></a><span>                </span><span class="hs-comment">-- NB: Won't always succeed (polymorphic case)</span><span>
</span><a name="line-1062"></a><span>                </span><span class="hs-comment">--     but won't be demanded in those cases</span><span>
</span><a name="line-1063"></a><span>                </span><span class="hs-comment">-- NB: not tcSplitTyConApp; we are looking at Core here</span><span>
</span><a name="line-1064"></a><span>                </span><span class="hs-comment">--     look through non-rec newtypes to find the tycon that</span><span>
</span><a name="line-1065"></a><span>                </span><span class="hs-comment">--     corresponds to the datacon in this case alternative</span><span>
</span><a name="line-1066"></a><span>
</span><a name="line-1067"></a><span>    </span><a href="IfaceEnv.html#extendIfaceIdEnv"><span class="hs-identifier hs-var">extendIfaceIdEnv</span></a><span> </span><span class="hs-special">[</span><a href="#local-1628087553"><span class="hs-identifier hs-var">case_bndr'</span></a><span class="hs-special">]</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-1068"></a><span>     </span><a name="local-1628087555"><a href="#local-1628087555"><span class="hs-identifier">alts'</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a><span> </span><span class="hs-special">(</span><a href="TcIface.html#tcIfaceAlt"><span class="hs-identifier hs-var">tcIfaceAlt</span></a><span> </span><a href="#local-1628087550"><span class="hs-identifier hs-var">scrut'</span></a><span> </span><a href="#local-1628087554"><span class="hs-identifier hs-var">tc_app</span></a><span class="hs-special">)</span><span> </span><a href="#local-1628087549"><span class="hs-identifier hs-var">alts</span></a><span>
</span><a name="line-1069"></a><span>     </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="CoreSyn.html#Case"><span class="hs-identifier hs-var">Case</span></a><span> </span><a href="#local-1628087550"><span class="hs-identifier hs-var">scrut'</span></a><span> </span><a href="#local-1628087553"><span class="hs-identifier hs-var">case_bndr'</span></a><span> </span><span class="hs-special">(</span><a href="CoreUtils.html#coreAltsType"><span class="hs-identifier hs-var">coreAltsType</span></a><span> </span><a href="#local-1628087555"><span class="hs-identifier hs-var">alts'</span></a><span class="hs-special">)</span><span> </span><a href="#local-1628087555"><span class="hs-identifier hs-var">alts'</span></a><span class="hs-special">)</span><span>
</span><a name="line-1070"></a><span>
</span><a name="line-1071"></a><span class="hs-identifier">tcIfaceExpr</span><span> </span><span class="hs-special">(</span><a href="IfaceSyn.html#IfaceLet"><span class="hs-identifier hs-var">IfaceLet</span></a><span> </span><span class="hs-special">(</span><a href="IfaceSyn.html#IfaceNonRec"><span class="hs-identifier hs-var">IfaceNonRec</span></a><span> </span><span class="hs-special">(</span><a href="IfaceSyn.html#IfLetBndr"><span class="hs-identifier hs-var">IfLetBndr</span></a><span> </span><a name="local-1628087556"><a href="#local-1628087556"><span class="hs-identifier">fs</span></a></a><span> </span><a name="local-1628087557"><a href="#local-1628087557"><span class="hs-identifier">ty</span></a></a><span> </span><a name="local-1628087558"><a href="#local-1628087558"><span class="hs-identifier">info</span></a></a><span class="hs-special">)</span><span> </span><a name="local-1628087559"><a href="#local-1628087559"><span class="hs-identifier">rhs</span></a></a><span class="hs-special">)</span><span> </span><a name="local-1628087560"><a href="#local-1628087560"><span class="hs-identifier">body</span></a></a><span class="hs-special">)</span><span>
</span><a name="line-1072"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><a name="local-1628087561"><a href="#local-1628087561"><span class="hs-identifier">name</span></a></a><span>    </span><span class="hs-glyph">&lt;-</span><span> </span><a href="IfaceEnv.html#newIfaceName"><span class="hs-identifier hs-var">newIfaceName</span></a><span> </span><span class="hs-special">(</span><a href="OccName.html#mkVarOccFS"><span class="hs-identifier hs-var">mkVarOccFS</span></a><span> </span><a href="#local-1628087556"><span class="hs-identifier hs-var">fs</span></a><span class="hs-special">)</span><span>
</span><a name="line-1073"></a><span>        </span><span class="hs-special">;</span><span> </span><a name="local-1628087562"><a href="#local-1628087562"><span class="hs-identifier">ty'</span></a></a><span>     </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tcIfaceType"><span class="hs-identifier hs-var">tcIfaceType</span></a><span> </span><a href="#local-1628087557"><span class="hs-identifier hs-var">ty</span></a><span>
</span><a name="line-1074"></a><span>        </span><span class="hs-special">;</span><span> </span><a name="local-1628087563"><a href="#local-1628087563"><span class="hs-identifier">id_info</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tcIdInfo"><span class="hs-identifier hs-var">tcIdInfo</span></a><span> </span><span class="hs-identifier hs-var">False</span><span> </span><span class="hs-comment">{- Don't ignore prags; we are inside one! -}</span><span>
</span><a name="line-1075"></a><span>                              </span><a href="#local-1628087561"><span class="hs-identifier hs-var">name</span></a><span> </span><a href="#local-1628087562"><span class="hs-identifier hs-var">ty'</span></a><span> </span><a href="#local-1628087558"><span class="hs-identifier hs-var">info</span></a><span>
</span><a name="line-1076"></a><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><a name="local-1628087564"><a href="#local-1628087564"><span class="hs-identifier">id</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Id.html#mkLocalIdOrCoVarWithInfo"><span class="hs-identifier hs-var">mkLocalIdOrCoVarWithInfo</span></a><span> </span><a href="#local-1628087561"><span class="hs-identifier hs-var">name</span></a><span> </span><a href="#local-1628087562"><span class="hs-identifier hs-var">ty'</span></a><span> </span><a href="#local-1628087563"><span class="hs-identifier hs-var">id_info</span></a><span>
</span><a name="line-1077"></a><span>        </span><span class="hs-special">;</span><span> </span><a name="local-1628087565"><a href="#local-1628087565"><span class="hs-identifier">rhs'</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tcIfaceExpr"><span class="hs-identifier hs-var">tcIfaceExpr</span></a><span> </span><a href="#local-1628087559"><span class="hs-identifier hs-var">rhs</span></a><span>
</span><a name="line-1078"></a><span>        </span><span class="hs-special">;</span><span> </span><a name="local-1628087566"><a href="#local-1628087566"><span class="hs-identifier">body'</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="IfaceEnv.html#extendIfaceIdEnv"><span class="hs-identifier hs-var">extendIfaceIdEnv</span></a><span> </span><span class="hs-special">[</span><a href="#local-1628087564"><span class="hs-identifier hs-var">id</span></a><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><a href="TcIface.html#tcIfaceExpr"><span class="hs-identifier hs-var">tcIfaceExpr</span></a><span> </span><a href="#local-1628087560"><span class="hs-identifier hs-var">body</span></a><span class="hs-special">)</span><span>
</span><a name="line-1079"></a><span>        </span><span class="hs-special">;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="CoreSyn.html#Let"><span class="hs-identifier hs-var">Let</span></a><span> </span><span class="hs-special">(</span><a href="CoreSyn.html#NonRec"><span class="hs-identifier hs-var">NonRec</span></a><span> </span><a href="#local-1628087564"><span class="hs-identifier hs-var">id</span></a><span> </span><a href="#local-1628087565"><span class="hs-identifier hs-var">rhs'</span></a><span class="hs-special">)</span><span> </span><a href="#local-1628087566"><span class="hs-identifier hs-var">body'</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-1080"></a><span>
</span><a name="line-1081"></a><span class="hs-identifier">tcIfaceExpr</span><span> </span><span class="hs-special">(</span><a href="IfaceSyn.html#IfaceLet"><span class="hs-identifier hs-var">IfaceLet</span></a><span> </span><span class="hs-special">(</span><a href="IfaceSyn.html#IfaceRec"><span class="hs-identifier hs-var">IfaceRec</span></a><span> </span><a name="local-1628087567"><a href="#local-1628087567"><span class="hs-identifier">pairs</span></a></a><span class="hs-special">)</span><span> </span><a name="local-1628087568"><a href="#local-1628087568"><span class="hs-identifier">body</span></a></a><span class="hs-special">)</span><span>
</span><a name="line-1082"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><a name="local-1628087580"><a href="#local-1628087580"><span class="hs-identifier">ids</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a><span> </span><a href="#local-1628087569"><span class="hs-identifier hs-var">tc_rec_bndr</span></a><span> </span><span class="hs-special">(</span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Tuple.html#fst"><span class="hs-identifier hs-var">fst</span></a><span> </span><a href="#local-1628087567"><span class="hs-identifier hs-var">pairs</span></a><span class="hs-special">)</span><span>
</span><a name="line-1083"></a><span>       </span><span class="hs-special">;</span><span> </span><a href="IfaceEnv.html#extendIfaceIdEnv"><span class="hs-identifier hs-var">extendIfaceIdEnv</span></a><span> </span><a href="#local-1628087580"><span class="hs-identifier hs-var">ids</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-1084"></a><span>       </span><span class="hs-special">{</span><span> </span><a name="local-1628087581"><a href="#local-1628087581"><span class="hs-identifier">pairs'</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Control.Monad.html#zipWithM"><span class="hs-identifier hs-var">zipWithM</span></a><span> </span><a href="#local-1628087570"><span class="hs-identifier hs-var">tc_pair</span></a><span> </span><a href="#local-1628087567"><span class="hs-identifier hs-var">pairs</span></a><span> </span><a href="#local-1628087580"><span class="hs-identifier hs-var">ids</span></a><span>
</span><a name="line-1085"></a><span>       </span><span class="hs-special">;</span><span> </span><a name="local-1628087582"><a href="#local-1628087582"><span class="hs-identifier">body'</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tcIfaceExpr"><span class="hs-identifier hs-var">tcIfaceExpr</span></a><span> </span><a href="#local-1628087568"><span class="hs-identifier hs-var">body</span></a><span>
</span><a name="line-1086"></a><span>       </span><span class="hs-special">;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="CoreSyn.html#Let"><span class="hs-identifier hs-var">Let</span></a><span> </span><span class="hs-special">(</span><a href="CoreSyn.html#Rec"><span class="hs-identifier hs-var">Rec</span></a><span> </span><a href="#local-1628087581"><span class="hs-identifier hs-var">pairs'</span></a><span class="hs-special">)</span><span> </span><a href="#local-1628087582"><span class="hs-identifier hs-var">body'</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-1087"></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-1088"></a><span>   </span><a name="local-1628087569"><a href="#local-1628087569"><span class="hs-identifier">tc_rec_bndr</span></a></a><span> </span><span class="hs-special">(</span><a href="IfaceSyn.html#IfLetBndr"><span class="hs-identifier hs-var">IfLetBndr</span></a><span> </span><a name="local-1628087571"><a href="#local-1628087571"><span class="hs-identifier">fs</span></a></a><span> </span><a name="local-1628087572"><a href="#local-1628087572"><span class="hs-identifier">ty</span></a></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span>
</span><a name="line-1089"></a><span>     </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><a name="local-1628087573"><a href="#local-1628087573"><span class="hs-identifier">name</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="IfaceEnv.html#newIfaceName"><span class="hs-identifier hs-var">newIfaceName</span></a><span> </span><span class="hs-special">(</span><a href="OccName.html#mkVarOccFS"><span class="hs-identifier hs-var">mkVarOccFS</span></a><span> </span><a href="#local-1628087571"><span class="hs-identifier hs-var">fs</span></a><span class="hs-special">)</span><span>
</span><a name="line-1090"></a><span>          </span><span class="hs-special">;</span><span> </span><a name="local-1628087574"><a href="#local-1628087574"><span class="hs-identifier">ty'</span></a></a><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tcIfaceType"><span class="hs-identifier hs-var">tcIfaceType</span></a><span> </span><a href="#local-1628087572"><span class="hs-identifier hs-var">ty</span></a><span>
</span><a name="line-1091"></a><span>          </span><span class="hs-special">;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="Id.html#mkLocalIdOrCoVar"><span class="hs-identifier hs-var">mkLocalIdOrCoVar</span></a><span> </span><a href="#local-1628087573"><span class="hs-identifier hs-var">name</span></a><span> </span><a href="#local-1628087574"><span class="hs-identifier hs-var">ty'</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-1092"></a><span>   </span><a name="local-1628087570"><a href="#local-1628087570"><span class="hs-identifier">tc_pair</span></a></a><span> </span><span class="hs-special">(</span><a href="IfaceSyn.html#IfLetBndr"><span class="hs-identifier hs-var">IfLetBndr</span></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-1628087575"><a href="#local-1628087575"><span class="hs-identifier">info</span></a></a><span class="hs-special">,</span><span> </span><a name="local-1628087576"><a href="#local-1628087576"><span class="hs-identifier">rhs</span></a></a><span class="hs-special">)</span><span> </span><a name="local-1628087577"><a href="#local-1628087577"><span class="hs-identifier">id</span></a></a><span>
</span><a name="line-1093"></a><span>     </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><a name="local-1628087578"><a href="#local-1628087578"><span class="hs-identifier">rhs'</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tcIfaceExpr"><span class="hs-identifier hs-var">tcIfaceExpr</span></a><span> </span><a href="#local-1628087576"><span class="hs-identifier hs-var">rhs</span></a><span>
</span><a name="line-1094"></a><span>          </span><span class="hs-special">;</span><span> </span><a name="local-1628087579"><a href="#local-1628087579"><span class="hs-identifier">id_info</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tcIdInfo"><span class="hs-identifier hs-var">tcIdInfo</span></a><span> </span><span class="hs-identifier hs-var">False</span><span> </span><span class="hs-comment">{- Don't ignore prags; we are inside one! -}</span><span>
</span><a name="line-1095"></a><span>                                </span><span class="hs-special">(</span><a href="Id.html#idName"><span class="hs-identifier hs-var">idName</span></a><span> </span><a href="#local-1628087577"><span class="hs-identifier hs-var">id</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><a href="Id.html#idType"><span class="hs-identifier hs-var">idType</span></a><span> </span><a href="#local-1628087577"><span class="hs-identifier hs-var">id</span></a><span class="hs-special">)</span><span> </span><a href="#local-1628087575"><span class="hs-identifier hs-var">info</span></a><span>
</span><a name="line-1096"></a><span>          </span><span class="hs-special">;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="Id.html#setIdInfo"><span class="hs-identifier hs-var">setIdInfo</span></a><span> </span><a href="#local-1628087577"><span class="hs-identifier hs-var">id</span></a><span> </span><a href="#local-1628087579"><span class="hs-identifier hs-var">id_info</span></a><span class="hs-special">,</span><span> </span><a href="#local-1628087578"><span class="hs-identifier hs-var">rhs'</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-1097"></a><span>
</span><a name="line-1098"></a><span class="hs-identifier">tcIfaceExpr</span><span> </span><span class="hs-special">(</span><a href="IfaceSyn.html#IfaceTick"><span class="hs-identifier hs-var">IfaceTick</span></a><span> </span><a name="local-1628087583"><a href="#local-1628087583"><span class="hs-identifier">tickish</span></a></a><span> </span><a name="local-1628087584"><a href="#local-1628087584"><span class="hs-identifier">expr</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-1099"></a><span>    </span><a name="local-1628087585"><a href="#local-1628087585"><span class="hs-identifier">expr'</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tcIfaceExpr"><span class="hs-identifier hs-var">tcIfaceExpr</span></a><span> </span><a href="#local-1628087584"><span class="hs-identifier hs-var">expr</span></a><span>
</span><a name="line-1100"></a><span>    </span><span class="hs-comment">-- If debug flag is not set: Ignore source notes</span><span>
</span><a name="line-1101"></a><span>    </span><a name="local-1628087586"><a href="#local-1628087586"><span class="hs-identifier">dbgLvl</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a><span> </span><span class="hs-identifier">debugLevel</span><span> </span><a href="DynFlags.html#getDynFlags"><span class="hs-identifier hs-var">getDynFlags</span></a><span>
</span><a name="line-1102"></a><span>    </span><span class="hs-keyword">case</span><span> </span><a href="#local-1628087583"><span class="hs-identifier hs-var">tickish</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-1103"></a><span>      </span><a href="IfaceSyn.html#IfaceSource"><span class="hs-identifier hs-var">IfaceSource</span></a><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">|</span><span> </span><a href="#local-1628087586"><span class="hs-identifier hs-var">dbgLvl</span></a><span> </span><span class="hs-operator hs-var">&gt;</span><span> </span><span class="hs-number">0</span><span>
</span><a name="line-1104"></a><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><a href="#local-1628087585"><span class="hs-identifier hs-var">expr'</span></a><span>
</span><a name="line-1105"></a><span>      </span><a name="local-1628087587"><a href="#local-1628087587"><span class="hs-identifier">_otherwise</span></a></a><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-1106"></a><span>        </span><a name="local-1628087588"><a href="#local-1628087588"><span class="hs-identifier">tickish'</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tcIfaceTickish"><span class="hs-identifier hs-var">tcIfaceTickish</span></a><span> </span><a href="#local-1628087583"><span class="hs-identifier hs-var">tickish</span></a><span>
</span><a name="line-1107"></a><span>        </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="CoreSyn.html#Tick"><span class="hs-identifier hs-var">Tick</span></a><span> </span><a href="#local-1628087588"><span class="hs-identifier hs-var">tickish'</span></a><span> </span><a href="#local-1628087585"><span class="hs-identifier hs-var">expr'</span></a><span class="hs-special">)</span><span>
</span><a name="line-1108"></a><span>
</span><a name="line-1109"></a><span class="hs-comment">-------------------------</span><span>
</span><a name="line-1110"></a><span class="hs-identifier">tcIfaceTickish</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="IfaceSyn.html#IfaceTickish"><span class="hs-identifier hs-type">IfaceTickish</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfM"><span class="hs-identifier hs-type">IfM</span></a><span> </span><a href="#local-1628087072"><span class="hs-identifier hs-type">lcl</span></a><span> </span><span class="hs-special">(</span><a href="CoreSyn.html#Tickish"><span class="hs-identifier hs-type">Tickish</span></a><span> </span><a href="Var.html#Id"><span class="hs-identifier hs-type">Id</span></a><span class="hs-special">)</span><span>
</span><a name="line-1111"></a><a name="tcIfaceTickish"><a href="TcIface.html#tcIfaceTickish"><span class="hs-identifier">tcIfaceTickish</span></a></a><span> </span><span class="hs-special">(</span><a href="IfaceSyn.html#IfaceHpcTick"><span class="hs-identifier hs-var">IfaceHpcTick</span></a><span> </span><a name="local-1628087589"><a href="#local-1628087589"><span class="hs-identifier">modl</span></a></a><span> </span><a name="local-1628087590"><a href="#local-1628087590"><span class="hs-identifier">ix</span></a></a><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="CoreSyn.html#HpcTick"><span class="hs-identifier hs-var">HpcTick</span></a><span> </span><a href="#local-1628087589"><span class="hs-identifier hs-var">modl</span></a><span> </span><a href="#local-1628087590"><span class="hs-identifier hs-var">ix</span></a><span class="hs-special">)</span><span>
</span><a name="line-1112"></a><span class="hs-identifier">tcIfaceTickish</span><span> </span><span class="hs-special">(</span><a href="IfaceSyn.html#IfaceSCC"><span class="hs-identifier hs-var">IfaceSCC</span></a><span>  </span><a name="local-1628087591"><a href="#local-1628087591"><span class="hs-identifier">cc</span></a></a><span> </span><a name="local-1628087592"><a href="#local-1628087592"><span class="hs-identifier">tick</span></a></a><span> </span><a name="local-1628087593"><a href="#local-1628087593"><span class="hs-identifier">push</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="CoreSyn.html#ProfNote"><span class="hs-identifier hs-var">ProfNote</span></a><span> </span><a href="#local-1628087591"><span class="hs-identifier hs-var">cc</span></a><span> </span><a href="#local-1628087592"><span class="hs-identifier hs-var">tick</span></a><span> </span><a href="#local-1628087593"><span class="hs-identifier hs-var">push</span></a><span class="hs-special">)</span><span>
</span><a name="line-1113"></a><span class="hs-identifier">tcIfaceTickish</span><span> </span><span class="hs-special">(</span><a href="IfaceSyn.html#IfaceSource"><span class="hs-identifier hs-var">IfaceSource</span></a><span> </span><a name="local-1628087594"><a href="#local-1628087594"><span class="hs-identifier">src</span></a></a><span> </span><a name="local-1628087595"><a href="#local-1628087595"><span class="hs-identifier">name</span></a></a><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="CoreSyn.html#SourceNote"><span class="hs-identifier hs-var">SourceNote</span></a><span> </span><a href="#local-1628087594"><span class="hs-identifier hs-var">src</span></a><span> </span><a href="#local-1628087595"><span class="hs-identifier hs-var">name</span></a><span class="hs-special">)</span><span>
</span><a name="line-1114"></a><span>
</span><a name="line-1115"></a><span class="hs-comment">-------------------------</span><span>
</span><a name="line-1116"></a><span class="hs-identifier">tcIfaceLit</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Literal.html#Literal"><span class="hs-identifier hs-type">Literal</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><a href="Literal.html#Literal"><span class="hs-identifier hs-type">Literal</span></a><span>
</span><a name="line-1117"></a><span class="hs-comment">-- Integer literals deserialise to (LitInteger i &lt;error thunk&gt;)</span><span>
</span><a name="line-1118"></a><span class="hs-comment">-- so tcIfaceLit just fills in the type.</span><span>
</span><a name="line-1119"></a><span class="hs-comment">-- See Note [Integer literals] in Literal</span><span>
</span><a name="line-1120"></a><a name="tcIfaceLit"><a href="TcIface.html#tcIfaceLit"><span class="hs-identifier">tcIfaceLit</span></a></a><span> </span><span class="hs-special">(</span><a href="Literal.html#LitInteger"><span class="hs-identifier hs-var">LitInteger</span></a><span> </span><a name="local-1628087596"><a href="#local-1628087596"><span class="hs-identifier">i</span></a></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span>
</span><a name="line-1121"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><a name="local-1628087597"><a href="#local-1628087597"><span class="hs-identifier">t</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tcIfaceTyConByName"><span class="hs-identifier hs-var">tcIfaceTyConByName</span></a><span> </span><a href="PrelNames.html#integerTyConName"><span class="hs-identifier hs-var">integerTyConName</span></a><span>
</span><a name="line-1122"></a><span>       </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="Literal.html#mkLitInteger"><span class="hs-identifier hs-var">mkLitInteger</span></a><span> </span><a href="#local-1628087596"><span class="hs-identifier hs-var">i</span></a><span> </span><span class="hs-special">(</span><a href="TyCoRep.html#mkTyConTy"><span class="hs-identifier hs-var">mkTyConTy</span></a><span> </span><a href="#local-1628087597"><span class="hs-identifier hs-var">t</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-1123"></a><span class="hs-identifier">tcIfaceLit</span><span> </span><a name="local-1628087598"><a href="#local-1628087598"><span class="hs-identifier">lit</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><a href="#local-1628087598"><span class="hs-identifier hs-var">lit</span></a><span>
</span><a name="line-1124"></a><span>
</span><a name="line-1125"></a><span class="hs-comment">-------------------------</span><span>
</span><a name="line-1126"></a><span class="hs-identifier">tcIfaceAlt</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="CoreSyn.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><a href="TyCon.html#TyCon"><span class="hs-identifier hs-type">TyCon</span></a><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><a href="TyCoRep.html#Type"><span class="hs-identifier hs-type">Type</span></a><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><a name="line-1127"></a><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><a href="IfaceSyn.html#IfaceConAlt"><span class="hs-identifier hs-type">IfaceConAlt</span></a><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><a href="FastString.html#FastString"><span class="hs-identifier hs-type">FastString</span></a><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><a href="IfaceSyn.html#IfaceExpr"><span class="hs-identifier hs-type">IfaceExpr</span></a><span class="hs-special">)</span><span>
</span><a name="line-1128"></a><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><span class="hs-special">(</span><a href="CoreSyn.html#AltCon"><span class="hs-identifier hs-type">AltCon</span></a><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><a href="Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><a href="CoreSyn.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a><span class="hs-special">)</span><span>
</span><a name="line-1129"></a><a name="tcIfaceAlt"><a href="TcIface.html#tcIfaceAlt"><span class="hs-identifier">tcIfaceAlt</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><a href="IfaceSyn.html#IfaceDefault"><span class="hs-identifier hs-var">IfaceDefault</span></a><span class="hs-special">,</span><span> </span><a name="local-1628087599"><a href="#local-1628087599"><span class="hs-identifier">names</span></a></a><span class="hs-special">,</span><span> </span><a name="local-1628087600"><a href="#local-1628087600"><span class="hs-identifier">rhs</span></a></a><span class="hs-special">)</span><span>
</span><a name="line-1130"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">ASSERT</span><span class="hs-special">(</span><span> </span><a href="Util.html#debugIsOn"><span class="hs-identifier hs-var">null</span></a><span> </span><span class="hs-identifier">names</span><span> </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-1131"></a><span>    </span><a name="local-1628087601"><a href="#local-1628087601"><span class="hs-identifier">rhs'</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tcIfaceExpr"><span class="hs-identifier hs-var">tcIfaceExpr</span></a><span> </span><a href="#local-1628087600"><span class="hs-identifier hs-var">rhs</span></a><span>
</span><a name="line-1132"></a><span>    </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="CoreSyn.html#DEFAULT"><span class="hs-identifier hs-var">DEFAULT</span></a><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><a href="#local-1628087601"><span class="hs-identifier hs-var">rhs'</span></a><span class="hs-special">)</span><span>
</span><a name="line-1133"></a><span>
</span><a name="line-1134"></a><span class="hs-identifier">tcIfaceAlt</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><a href="IfaceSyn.html#IfaceLitAlt"><span class="hs-identifier hs-var">IfaceLitAlt</span></a><span> </span><a name="local-1628087602"><a href="#local-1628087602"><span class="hs-identifier">lit</span></a></a><span class="hs-special">,</span><span> </span><a name="local-1628087603"><a href="#local-1628087603"><span class="hs-identifier">names</span></a></a><span class="hs-special">,</span><span> </span><a name="local-1628087604"><a href="#local-1628087604"><span class="hs-identifier">rhs</span></a></a><span class="hs-special">)</span><span>
</span><a name="line-1135"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">ASSERT</span><span class="hs-special">(</span><span> </span><a href="Util.html#debugIsOn"><span class="hs-identifier hs-var">null</span></a><span> </span><span class="hs-identifier">names</span><span> </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-1136"></a><span>    </span><a name="local-1628087605"><a href="#local-1628087605"><span class="hs-identifier">lit'</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tcIfaceLit"><span class="hs-identifier hs-var">tcIfaceLit</span></a><span> </span><a href="#local-1628087602"><span class="hs-identifier hs-var">lit</span></a><span>
</span><a name="line-1137"></a><span>    </span><a name="local-1628087606"><a href="#local-1628087606"><span class="hs-identifier">rhs'</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tcIfaceExpr"><span class="hs-identifier hs-var">tcIfaceExpr</span></a><span> </span><a href="#local-1628087604"><span class="hs-identifier hs-var">rhs</span></a><span>
</span><a name="line-1138"></a><span>    </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="CoreSyn.html#LitAlt"><span class="hs-identifier hs-var">LitAlt</span></a><span> </span><a href="#local-1628087605"><span class="hs-identifier hs-var">lit'</span></a><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><a href="#local-1628087606"><span class="hs-identifier hs-var">rhs'</span></a><span class="hs-special">)</span><span>
</span><a name="line-1139"></a><span>
</span><a name="line-1140"></a><span class="hs-comment">-- A case alternative is made quite a bit more complicated</span><span>
</span><a name="line-1141"></a><span class="hs-comment">-- by the fact that we omit type annotations because we can</span><span>
</span><a name="line-1142"></a><span class="hs-comment">-- work them out.  True enough, but its not that easy!</span><span>
</span><a name="line-1143"></a><span class="hs-identifier">tcIfaceAlt</span><span> </span><a name="local-1628087607"><a href="#local-1628087607"><span class="hs-identifier">scrut</span></a></a><span> </span><span class="hs-special">(</span><a name="local-1628087608"><a href="#local-1628087608"><span class="hs-identifier">tycon</span></a></a><span class="hs-special">,</span><span> </span><a name="local-1628087609"><a href="#local-1628087609"><span class="hs-identifier">inst_tys</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><a href="IfaceSyn.html#IfaceDataAlt"><span class="hs-identifier hs-var">IfaceDataAlt</span></a><span> </span><a name="local-1628087610"><a href="#local-1628087610"><span class="hs-identifier">data_occ</span></a></a><span class="hs-special">,</span><span> </span><a name="local-1628087611"><a href="#local-1628087611"><span class="hs-identifier">arg_strs</span></a></a><span class="hs-special">,</span><span> </span><a name="local-1628087612"><a href="#local-1628087612"><span class="hs-identifier">rhs</span></a></a><span class="hs-special">)</span><span>
</span><a name="line-1144"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><a name="local-1628087613"><a href="#local-1628087613"><span class="hs-identifier">con</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tcIfaceDataCon"><span class="hs-identifier hs-var">tcIfaceDataCon</span></a><span> </span><a href="#local-1628087610"><span class="hs-identifier hs-var">data_occ</span></a><span>
</span><a name="line-1145"></a><span>        </span><span class="hs-special">;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#when"><span class="hs-identifier hs-var">when</span></a><span> </span><span class="hs-special">(</span><a href="Util.html#debugIsOn"><span class="hs-identifier hs-var">debugIsOn</span></a><span> </span><span class="hs-operator hs-var">&amp;&amp;</span><span> </span><span class="hs-identifier hs-var">not</span><span> </span><span class="hs-special">(</span><a href="#local-1628087613"><span class="hs-identifier hs-var">con</span></a><span> </span><span class="hs-special">`</span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Foldable.html#elem"><span class="hs-identifier hs-var">elem</span></a><span class="hs-special">`</span><span> </span><a href="TyCon.html#tyConDataCons"><span class="hs-identifier hs-var">tyConDataCons</span></a><span> </span><a href="#local-1628087608"><span class="hs-identifier hs-var">tycon</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-1146"></a><span>               </span><span class="hs-special">(</span><a href="TcRnMonad.html#failIfM"><span class="hs-identifier hs-var">failIfM</span></a><span> </span><span class="hs-special">(</span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1628087607"><span class="hs-identifier hs-var">scrut</span></a><span> </span><a href="Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1628087613"><span class="hs-identifier hs-var">con</span></a><span> </span><a href="Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1628087608"><span class="hs-identifier hs-var">tycon</span></a><span> </span><a href="Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><span class="hs-special">(</span><a href="TyCon.html#tyConDataCons"><span class="hs-identifier hs-var">tyConDataCons</span></a><span> </span><a href="#local-1628087608"><span class="hs-identifier hs-var">tycon</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-1147"></a><span>        </span><span class="hs-special">;</span><span> </span><a href="TcIface.html#tcIfaceDataAlt"><span class="hs-identifier hs-var">tcIfaceDataAlt</span></a><span> </span><a href="#local-1628087613"><span class="hs-identifier hs-var">con</span></a><span> </span><a href="#local-1628087609"><span class="hs-identifier hs-var">inst_tys</span></a><span> </span><a href="#local-1628087611"><span class="hs-identifier hs-var">arg_strs</span></a><span> </span><a href="#local-1628087612"><span class="hs-identifier hs-var">rhs</span></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-1148"></a><span>
</span><a name="line-1149"></a><span class="hs-identifier">tcIfaceDataAlt</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><a href="TyCoRep.html#Type"><span class="hs-identifier hs-type">Type</span></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><a href="FastString.html#FastString"><span class="hs-identifier hs-type">FastString</span></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="IfaceSyn.html#IfaceExpr"><span class="hs-identifier hs-type">IfaceExpr</span></a><span>
</span><a name="line-1150"></a><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><span class="hs-special">(</span><a href="CoreSyn.html#AltCon"><span class="hs-identifier hs-type">AltCon</span></a><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><a href="Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><a href="CoreSyn.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a><span class="hs-special">)</span><span>
</span><a name="line-1151"></a><a name="tcIfaceDataAlt"><a href="TcIface.html#tcIfaceDataAlt"><span class="hs-identifier">tcIfaceDataAlt</span></a></a><span> </span><a name="local-1628087614"><a href="#local-1628087614"><span class="hs-identifier">con</span></a></a><span> </span><a name="local-1628087615"><a href="#local-1628087615"><span class="hs-identifier">inst_tys</span></a></a><span> </span><a name="local-1628087616"><a href="#local-1628087616"><span class="hs-identifier">arg_strs</span></a></a><span> </span><a name="local-1628087617"><a href="#local-1628087617"><span class="hs-identifier">rhs</span></a></a><span>
</span><a name="line-1152"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><a name="local-1628087618"><a href="#local-1628087618"><span class="hs-identifier">us</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcRnMonad.html#newUniqueSupply"><span class="hs-identifier hs-var">newUniqueSupply</span></a><span>
</span><a name="line-1153"></a><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><a name="local-1628087619"><a href="#local-1628087619"><span class="hs-identifier">uniqs</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="UniqSupply.html#uniqsFromSupply"><span class="hs-identifier hs-var">uniqsFromSupply</span></a><span> </span><a href="#local-1628087618"><span class="hs-identifier hs-var">us</span></a><span>
</span><a name="line-1154"></a><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><a name="local-1628087620"><a href="#local-1628087620"><span class="hs-identifier">ex_tvs</span></a></a><span class="hs-special">,</span><span> </span><a name="local-1628087621"><a href="#local-1628087621"><span class="hs-identifier">arg_ids</span></a></a><span class="hs-special">)</span><span>
</span><a name="line-1155"></a><span>                      </span><span class="hs-glyph">=</span><span> </span><a href="CoreUtils.html#dataConRepFSInstPat"><span class="hs-identifier hs-var">dataConRepFSInstPat</span></a><span> </span><a href="#local-1628087616"><span class="hs-identifier hs-var">arg_strs</span></a><span> </span><a href="#local-1628087619"><span class="hs-identifier hs-var">uniqs</span></a><span> </span><a href="#local-1628087614"><span class="hs-identifier hs-var">con</span></a><span> </span><a href="#local-1628087615"><span class="hs-identifier hs-var">inst_tys</span></a><span>
</span><a name="line-1156"></a><span>
</span><a name="line-1157"></a><span>        </span><span class="hs-special">;</span><span> </span><a name="local-1628087622"><a href="#local-1628087622"><span class="hs-identifier">rhs'</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="IfaceEnv.html#extendIfaceEnvs"><span class="hs-identifier hs-var">extendIfaceEnvs</span></a><span>  </span><a href="#local-1628087620"><span class="hs-identifier hs-var">ex_tvs</span></a><span>       </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span>
</span><a name="line-1158"></a><span>                  </span><a href="IfaceEnv.html#extendIfaceIdEnv"><span class="hs-identifier hs-var">extendIfaceIdEnv</span></a><span> </span><a href="#local-1628087621"><span class="hs-identifier hs-var">arg_ids</span></a><span>      </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span>
</span><a name="line-1159"></a><span>                  </span><a href="TcIface.html#tcIfaceExpr"><span class="hs-identifier hs-var">tcIfaceExpr</span></a><span> </span><a href="#local-1628087617"><span class="hs-identifier hs-var">rhs</span></a><span>
</span><a name="line-1160"></a><span>        </span><span class="hs-special">;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="CoreSyn.html#DataAlt"><span class="hs-identifier hs-var">DataAlt</span></a><span> </span><a href="#local-1628087614"><span class="hs-identifier hs-var">con</span></a><span class="hs-special">,</span><span> </span><a href="#local-1628087620"><span class="hs-identifier hs-var">ex_tvs</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a><span> </span><a href="#local-1628087621"><span class="hs-identifier hs-var">arg_ids</span></a><span class="hs-special">,</span><span> </span><a href="#local-1628087622"><span class="hs-identifier hs-var">rhs'</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-1161"></a><span>
</span><a name="line-1162"></a><span class="hs-comment">{-
************************************************************************
*                                                                      *
                IdInfo
*                                                                      *
************************************************************************
-}</span><span>
</span><a name="line-1169"></a><span>
</span><a name="line-1170"></a><span class="hs-identifier">tcIdDetails</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="TyCoRep.html#Type"><span class="hs-identifier hs-type">Type</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="IfaceSyn.html#IfaceIdDetails"><span class="hs-identifier hs-type">IfaceIdDetails</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><a href="IdInfo.html#IdDetails"><span class="hs-identifier hs-type">IdDetails</span></a><span>
</span><a name="line-1171"></a><a name="tcIdDetails"><a href="TcIface.html#tcIdDetails"><span class="hs-identifier">tcIdDetails</span></a></a><span> </span><span class="hs-identifier">_</span><span>  </span><a href="IfaceSyn.html#IfVanillaId"><span class="hs-identifier hs-var">IfVanillaId</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><a href="IdInfo.html#VanillaId"><span class="hs-identifier hs-var">VanillaId</span></a><span>
</span><a name="line-1172"></a><span class="hs-identifier">tcIdDetails</span><span> </span><a name="local-1628087623"><a href="#local-1628087623"><span class="hs-identifier">ty</span></a></a><span> </span><a href="IfaceSyn.html#IfDFunId"><span class="hs-identifier hs-var">IfDFunId</span></a><span>
</span><a name="line-1173"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="IdInfo.html#DFunId"><span class="hs-identifier hs-var">DFunId</span></a><span> </span><span class="hs-special">(</span><a href="TyCon.html#isNewTyCon"><span class="hs-identifier hs-var">isNewTyCon</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier">classTyCon</span><span> </span><a href="#local-1628087624"><span class="hs-identifier hs-var">cls</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-1174"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-1175"></a><span>    </span><span class="hs-special">(</span><span class="hs-identifier">_</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">,</span><span> </span><a name="local-1628087624"><a href="#local-1628087624"><span class="hs-identifier">cls</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="TcType.html#tcSplitDFunTy"><span class="hs-identifier hs-var">tcSplitDFunTy</span></a><span> </span><a href="#local-1628087623"><span class="hs-identifier hs-var">ty</span></a><span>
</span><a name="line-1176"></a><span>
</span><a name="line-1177"></a><span class="hs-identifier">tcIdDetails</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><a href="IfaceSyn.html#IfRecSelId"><span class="hs-identifier hs-var">IfRecSelId</span></a><span> </span><a name="local-1628087625"><a href="#local-1628087625"><span class="hs-identifier">tc</span></a></a><span> </span><a name="local-1628087626"><a href="#local-1628087626"><span class="hs-identifier">naughty</span></a></a><span class="hs-special">)</span><span>
</span><a name="line-1178"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><a name="local-1628087629"><a href="#local-1628087629"><span class="hs-identifier">tc'</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Either.html#either"><span class="hs-identifier hs-var">either</span></a><span> </span><span class="hs-special">(</span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a><span> </span><a href="IdInfo.html#RecSelData"><span class="hs-identifier hs-var">RecSelData</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a><span> </span><a href="TcIface.html#tcIfaceTyCon"><span class="hs-identifier hs-var">tcIfaceTyCon</span></a><span class="hs-special">)</span><span>
</span><a name="line-1179"></a><span>                       </span><span class="hs-special">(</span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a><span> </span><span class="hs-special">(</span><a href="IdInfo.html#RecSelPatSyn"><span class="hs-identifier hs-var">RecSelPatSyn</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a><span> </span><a href="#local-1628087627"><span class="hs-identifier hs-var">tyThingPatSyn</span></a><span class="hs-special">)</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a><span> </span><a href="TcIface.html#tcIfaceDecl"><span class="hs-identifier hs-var">tcIfaceDecl</span></a><span> </span><span class="hs-identifier hs-var">False</span><span class="hs-special">)</span><span>
</span><a name="line-1180"></a><span>                       </span><a href="#local-1628087625"><span class="hs-identifier hs-var">tc</span></a><span>
</span><a name="line-1181"></a><span>       </span><span class="hs-special">;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="IdInfo.html#RecSelId"><span class="hs-identifier hs-var">RecSelId</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">sel_tycon</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1628087629"><span class="hs-identifier hs-var">tc'</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">sel_naughty</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1628087626"><span class="hs-identifier hs-var">naughty</span></a><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-1182"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-1183"></a><span>    </span><a name="local-1628087627"><a href="#local-1628087627"><span class="hs-identifier">tyThingPatSyn</span></a></a><span> </span><span class="hs-special">(</span><a href="TyCoRep.html#AConLike"><span class="hs-identifier hs-var">AConLike</span></a><span> </span><span class="hs-special">(</span><a href="ConLike.html#PatSynCon"><span class="hs-identifier hs-var">PatSynCon</span></a><span> </span><a name="local-1628087628"><a href="#local-1628087628"><span class="hs-identifier">ps</span></a></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1628087628"><span class="hs-identifier hs-var">ps</span></a><span>
</span><a name="line-1184"></a><span>    </span><span class="hs-identifier">tyThingPatSyn</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Panic.html#panic"><span class="hs-identifier hs-var">panic</span></a><span> </span><span class="hs-string">&quot;tcIdDetails: expecting patsyn&quot;</span><span>
</span><a name="line-1185"></a><span>
</span><a name="line-1186"></a><span class="hs-identifier">tcIdInfo</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Bool</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Name.html#Name"><span class="hs-identifier hs-type">Name</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TyCoRep.html#Type"><span class="hs-identifier hs-type">Type</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="IfaceSyn.html#IfaceIdInfo"><span class="hs-identifier hs-type">IfaceIdInfo</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><a href="IdInfo.html#IdInfo"><span class="hs-identifier hs-type">IdInfo</span></a><span>
</span><a name="line-1187"></a><a name="tcIdInfo"><a href="TcIface.html#tcIdInfo"><span class="hs-identifier">tcIdInfo</span></a></a><span> </span><a name="local-1628087630"><a href="#local-1628087630"><span class="hs-identifier">ignore_prags</span></a></a><span> </span><a name="local-1628087631"><a href="#local-1628087631"><span class="hs-identifier">name</span></a></a><span> </span><a name="local-1628087632"><a href="#local-1628087632"><span class="hs-identifier">ty</span></a></a><span> </span><a name="local-1628087633"><a href="#local-1628087633"><span class="hs-identifier">info</span></a></a><span>
</span><a name="line-1188"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a href="#local-1628087630"><span class="hs-identifier hs-var">ignore_prags</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><a href="IdInfo.html#vanillaIdInfo"><span class="hs-identifier hs-var">vanillaIdInfo</span></a><span>
</span><a name="line-1189"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="#local-1628087633"><span class="hs-identifier hs-var">info</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-1190"></a><span>                        </span><a href="IfaceSyn.html#NoInfo"><span class="hs-identifier hs-var">NoInfo</span></a><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><a href="IdInfo.html#vanillaIdInfo"><span class="hs-identifier hs-var">vanillaIdInfo</span></a><span>
</span><a name="line-1191"></a><span>                        </span><a href="IfaceSyn.html#HasInfo"><span class="hs-identifier hs-var">HasInfo</span></a><span> </span><a name="local-1628087648"><a href="#local-1628087648"><span class="hs-identifier">info</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="MonadUtils.html#foldlM"><span class="hs-identifier hs-var">foldlM</span></a><span> </span><a href="#local-1628087635"><span class="hs-identifier hs-var">tcPrag</span></a><span> </span><a href="#local-1628087634"><span class="hs-identifier hs-var">init_info</span></a><span> </span><a href="#local-1628087648"><span class="hs-identifier hs-var">info</span></a><span>
</span><a name="line-1192"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-1193"></a><span>    </span><span class="hs-comment">-- Set the CgInfo to something sensible but uninformative before</span><span>
</span><a name="line-1194"></a><span>    </span><span class="hs-comment">-- we start; default assumption is that it has CAFs</span><span>
</span><a name="line-1195"></a><span>    </span><a name="local-1628087634"><a href="#local-1628087634"><span class="hs-identifier">init_info</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="IdInfo.html#vanillaIdInfo"><span class="hs-identifier hs-var">vanillaIdInfo</span></a><span>
</span><a name="line-1196"></a><span>
</span><a name="line-1197"></a><span>    </span><span class="hs-identifier">tcPrag</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="IdInfo.html#IdInfo"><span class="hs-identifier hs-type">IdInfo</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="IfaceSyn.html#IfaceInfoItem"><span class="hs-identifier hs-type">IfaceInfoItem</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><a href="IdInfo.html#IdInfo"><span class="hs-identifier hs-type">IdInfo</span></a><span>
</span><a name="line-1198"></a><span>    </span><a name="local-1628087635"><a href="#local-1628087635"><span class="hs-identifier">tcPrag</span></a></a><span> </span><a name="local-1628087636"><a href="#local-1628087636"><span class="hs-identifier">info</span></a></a><span> </span><a href="IfaceSyn.html#HsNoCafRefs"><span class="hs-identifier hs-var">HsNoCafRefs</span></a><span>        </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="#local-1628087636"><span class="hs-identifier hs-var">info</span></a><span> </span><span class="hs-special">`</span><a href="IdInfo.html#setCafInfo"><span class="hs-identifier hs-var">setCafInfo</span></a><span class="hs-special">`</span><span>   </span><a href="IdInfo.html#NoCafRefs"><span class="hs-identifier hs-var">NoCafRefs</span></a><span class="hs-special">)</span><span>
</span><a name="line-1199"></a><span>    </span><span class="hs-identifier">tcPrag</span><span> </span><a name="local-1628087637"><a href="#local-1628087637"><span class="hs-identifier">info</span></a></a><span> </span><span class="hs-special">(</span><a href="IfaceSyn.html#HsArity"><span class="hs-identifier hs-var">HsArity</span></a><span> </span><a name="local-1628087638"><a href="#local-1628087638"><span class="hs-identifier">arity</span></a></a><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="#local-1628087637"><span class="hs-identifier hs-var">info</span></a><span> </span><span class="hs-special">`</span><a href="IdInfo.html#setArityInfo"><span class="hs-identifier hs-var">setArityInfo</span></a><span class="hs-special">`</span><span> </span><a href="#local-1628087638"><span class="hs-identifier hs-var">arity</span></a><span class="hs-special">)</span><span>
</span><a name="line-1200"></a><span>    </span><span class="hs-identifier">tcPrag</span><span> </span><a name="local-1628087639"><a href="#local-1628087639"><span class="hs-identifier">info</span></a></a><span> </span><span class="hs-special">(</span><a href="IfaceSyn.html#HsStrictness"><span class="hs-identifier hs-var">HsStrictness</span></a><span> </span><a name="local-1628087640"><a href="#local-1628087640"><span class="hs-identifier">str</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="#local-1628087639"><span class="hs-identifier hs-var">info</span></a><span> </span><span class="hs-special">`</span><a href="IdInfo.html#setStrictnessInfo"><span class="hs-identifier hs-var">setStrictnessInfo</span></a><span class="hs-special">`</span><span> </span><a href="#local-1628087640"><span class="hs-identifier hs-var">str</span></a><span class="hs-special">)</span><span>
</span><a name="line-1201"></a><span>    </span><span class="hs-identifier">tcPrag</span><span> </span><a name="local-1628087641"><a href="#local-1628087641"><span class="hs-identifier">info</span></a></a><span> </span><span class="hs-special">(</span><a href="IfaceSyn.html#HsInline"><span class="hs-identifier hs-var">HsInline</span></a><span> </span><a name="local-1628087642"><a href="#local-1628087642"><span class="hs-identifier">prag</span></a></a><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="#local-1628087641"><span class="hs-identifier hs-var">info</span></a><span> </span><span class="hs-special">`</span><a href="IdInfo.html#setInlinePragInfo"><span class="hs-identifier hs-var">setInlinePragInfo</span></a><span class="hs-special">`</span><span> </span><a href="#local-1628087642"><span class="hs-identifier hs-var">prag</span></a><span class="hs-special">)</span><span>
</span><a name="line-1202"></a><span>
</span><a name="line-1203"></a><span>        </span><span class="hs-comment">-- The next two are lazy, so they don't transitively suck stuff in</span><span>
</span><a name="line-1204"></a><span>    </span><span class="hs-identifier">tcPrag</span><span> </span><a name="local-1628087643"><a href="#local-1628087643"><span class="hs-identifier">info</span></a></a><span> </span><span class="hs-special">(</span><a href="IfaceSyn.html#HsUnfold"><span class="hs-identifier hs-var">HsUnfold</span></a><span> </span><a name="local-1628087644"><a href="#local-1628087644"><span class="hs-identifier">lb</span></a></a><span> </span><a name="local-1628087645"><a href="#local-1628087645"><span class="hs-identifier">if_unf</span></a></a><span class="hs-special">)</span><span>
</span><a name="line-1205"></a><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><a name="local-1628087646"><a href="#local-1628087646"><span class="hs-identifier">unf</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tcUnfolding"><span class="hs-identifier hs-var">tcUnfolding</span></a><span> </span><a href="#local-1628087631"><span class="hs-identifier hs-var">name</span></a><span> </span><a href="#local-1628087632"><span class="hs-identifier hs-var">ty</span></a><span> </span><a href="#local-1628087643"><span class="hs-identifier hs-var">info</span></a><span> </span><a href="#local-1628087645"><span class="hs-identifier hs-var">if_unf</span></a><span>
</span><a name="line-1206"></a><span>           </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><a name="local-1628087647"><a href="#local-1628087647"><span class="hs-identifier">info1</span></a></a><span> </span><span class="hs-glyph">|</span><span> </span><a href="#local-1628087644"><span class="hs-identifier hs-var">lb</span></a><span>        </span><span class="hs-glyph">=</span><span> </span><a href="#local-1628087643"><span class="hs-identifier hs-var">info</span></a><span> </span><span class="hs-special">`</span><a href="IdInfo.html#setOccInfo"><span class="hs-identifier hs-var">setOccInfo</span></a><span class="hs-special">`</span><span> </span><a href="BasicTypes.html#strongLoopBreaker"><span class="hs-identifier hs-var">strongLoopBreaker</span></a><span>
</span><a name="line-1207"></a><span>                       </span><span class="hs-glyph">|</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1628087643"><span class="hs-identifier hs-var">info</span></a><span>
</span><a name="line-1208"></a><span>           </span><span class="hs-special">;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="#local-1628087647"><span class="hs-identifier hs-var">info1</span></a><span> </span><span class="hs-special">`</span><a href="IdInfo.html#setUnfoldingInfoLazily"><span class="hs-identifier hs-var">setUnfoldingInfoLazily</span></a><span class="hs-special">`</span><span> </span><a href="#local-1628087646"><span class="hs-identifier hs-var">unf</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-1209"></a><span>
</span><a name="line-1210"></a><span class="hs-identifier">tcUnfolding</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Name.html#Name"><span class="hs-identifier hs-type">Name</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TyCoRep.html#Type"><span class="hs-identifier hs-type">Type</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="IdInfo.html#IdInfo"><span class="hs-identifier hs-type">IdInfo</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="IfaceSyn.html#IfaceUnfolding"><span class="hs-identifier hs-type">IfaceUnfolding</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><a href="CoreSyn.html#Unfolding"><span class="hs-identifier hs-type">Unfolding</span></a><span>
</span><a name="line-1211"></a><a name="tcUnfolding"><a href="TcIface.html#tcUnfolding"><span class="hs-identifier">tcUnfolding</span></a></a><span> </span><a name="local-1628087649"><a href="#local-1628087649"><span class="hs-identifier">name</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-1628087650"><a href="#local-1628087650"><span class="hs-identifier">info</span></a></a><span> </span><span class="hs-special">(</span><a href="IfaceSyn.html#IfCoreUnfold"><span class="hs-identifier hs-var">IfCoreUnfold</span></a><span> </span><a name="local-1628087651"><a href="#local-1628087651"><span class="hs-identifier">stable</span></a></a><span> </span><a name="local-1628087652"><a href="#local-1628087652"><span class="hs-identifier">if_expr</span></a></a><span class="hs-special">)</span><span>
</span><a name="line-1212"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><a name="local-1628087654"><a href="#local-1628087654"><span class="hs-identifier">dflags</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="DynFlags.html#getDynFlags"><span class="hs-identifier hs-var">getDynFlags</span></a><span>
</span><a name="line-1213"></a><span>        </span><span class="hs-special">;</span><span> </span><a name="local-1628087655"><a href="#local-1628087655"><span class="hs-identifier">mb_expr</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tcPragExpr"><span class="hs-identifier hs-var">tcPragExpr</span></a><span> </span><a href="#local-1628087649"><span class="hs-identifier hs-var">name</span></a><span> </span><a href="#local-1628087652"><span class="hs-identifier hs-var">if_expr</span></a><span>
</span><a name="line-1214"></a><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><a name="local-1628087656"><a href="#local-1628087656"><span class="hs-identifier">unf_src</span></a></a><span> </span><span class="hs-glyph">|</span><span> </span><a href="#local-1628087651"><span class="hs-identifier hs-var">stable</span></a><span>    </span><span class="hs-glyph">=</span><span> </span><a href="CoreSyn.html#InlineStable"><span class="hs-identifier hs-var">InlineStable</span></a><span>
</span><a name="line-1215"></a><span>                      </span><span class="hs-glyph">|</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="CoreSyn.html#InlineRhs"><span class="hs-identifier hs-var">InlineRhs</span></a><span>
</span><a name="line-1216"></a><span>        </span><span class="hs-special">;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><span class="hs-keyword">case</span><span> </span><a href="#local-1628087655"><span class="hs-identifier hs-var">mb_expr</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-1217"></a><span>            </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="CoreSyn.html#NoUnfolding"><span class="hs-identifier hs-var">NoUnfolding</span></a><span>
</span><a name="line-1218"></a><span>            </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Just"><span class="hs-identifier hs-var">Just</span></a><span> </span><a name="local-1628087657"><a href="#local-1628087657"><span class="hs-identifier">expr</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="CoreUnfold.html#mkUnfolding"><span class="hs-identifier hs-var">mkUnfolding</span></a><span> </span><a href="#local-1628087654"><span class="hs-identifier hs-var">dflags</span></a><span> </span><a href="#local-1628087656"><span class="hs-identifier hs-var">unf_src</span></a><span>
</span><a name="line-1219"></a><span>                           </span><span class="hs-identifier hs-var">True</span><span> </span><span class="hs-comment">{- Top level -}</span><span>
</span><a name="line-1220"></a><span>                           </span><span class="hs-special">(</span><a href="Demand.html#isBottomingSig"><span class="hs-identifier hs-var">isBottomingSig</span></a><span> </span><a href="#local-1628087653"><span class="hs-identifier hs-var">strict_sig</span></a><span class="hs-special">)</span><span>
</span><a name="line-1221"></a><span>                           </span><a href="#local-1628087657"><span class="hs-identifier hs-var">expr</span></a><span>
</span><a name="line-1222"></a><span>        </span><span class="hs-special">}</span><span>
</span><a name="line-1223"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-1224"></a><span>     </span><span class="hs-comment">-- Strictness should occur before unfolding!</span><span>
</span><a name="line-1225"></a><span>    </span><a name="local-1628087653"><a href="#local-1628087653"><span class="hs-identifier">strict_sig</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">strictnessInfo</span><span> </span><a href="#local-1628087650"><span class="hs-identifier hs-var">info</span></a><span>
</span><a name="line-1226"></a><span class="hs-identifier">tcUnfolding</span><span> </span><a name="local-1628087658"><a href="#local-1628087658"><span class="hs-identifier">name</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><a href="IfaceSyn.html#IfCompulsory"><span class="hs-identifier hs-var">IfCompulsory</span></a><span> </span><a name="local-1628087659"><a href="#local-1628087659"><span class="hs-identifier">if_expr</span></a></a><span class="hs-special">)</span><span>
</span><a name="line-1227"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><a name="local-1628087660"><a href="#local-1628087660"><span class="hs-identifier">mb_expr</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tcPragExpr"><span class="hs-identifier hs-var">tcPragExpr</span></a><span> </span><a href="#local-1628087658"><span class="hs-identifier hs-var">name</span></a><span> </span><a href="#local-1628087659"><span class="hs-identifier hs-var">if_expr</span></a><span>
</span><a name="line-1228"></a><span>        </span><span class="hs-special">;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><span class="hs-keyword">case</span><span> </span><a href="#local-1628087660"><span class="hs-identifier hs-var">mb_expr</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-1229"></a><span>                    </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><a href="CoreSyn.html#NoUnfolding"><span class="hs-identifier hs-var">NoUnfolding</span></a><span>
</span><a name="line-1230"></a><span>                    </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Just"><span class="hs-identifier hs-var">Just</span></a><span> </span><a name="local-1628087661"><a href="#local-1628087661"><span class="hs-identifier">expr</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="CoreUnfold.html#mkCompulsoryUnfolding"><span class="hs-identifier hs-var">mkCompulsoryUnfolding</span></a><span> </span><a href="#local-1628087661"><span class="hs-identifier hs-var">expr</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-1231"></a><span>
</span><a name="line-1232"></a><span class="hs-identifier">tcUnfolding</span><span> </span><a name="local-1628087662"><a href="#local-1628087662"><span class="hs-identifier">name</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><a href="IfaceSyn.html#IfInlineRule"><span class="hs-identifier hs-var">IfInlineRule</span></a><span> </span><a name="local-1628087663"><a href="#local-1628087663"><span class="hs-identifier">arity</span></a></a><span> </span><a name="local-1628087664"><a href="#local-1628087664"><span class="hs-identifier">unsat_ok</span></a></a><span> </span><a name="local-1628087665"><a href="#local-1628087665"><span class="hs-identifier">boring_ok</span></a></a><span> </span><a name="local-1628087666"><a href="#local-1628087666"><span class="hs-identifier">if_expr</span></a></a><span class="hs-special">)</span><span>
</span><a name="line-1233"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><a name="local-1628087668"><a href="#local-1628087668"><span class="hs-identifier">mb_expr</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tcPragExpr"><span class="hs-identifier hs-var">tcPragExpr</span></a><span> </span><a href="#local-1628087662"><span class="hs-identifier hs-var">name</span></a><span> </span><a href="#local-1628087666"><span class="hs-identifier hs-var">if_expr</span></a><span>
</span><a name="line-1234"></a><span>        </span><span class="hs-special">;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><span class="hs-keyword">case</span><span> </span><a href="#local-1628087668"><span class="hs-identifier hs-var">mb_expr</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-1235"></a><span>                    </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><a href="CoreSyn.html#NoUnfolding"><span class="hs-identifier hs-var">NoUnfolding</span></a><span>
</span><a name="line-1236"></a><span>                    </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Just"><span class="hs-identifier hs-var">Just</span></a><span> </span><a name="local-1628087669"><a href="#local-1628087669"><span class="hs-identifier">expr</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="CoreUnfold.html#mkCoreUnfolding"><span class="hs-identifier hs-var">mkCoreUnfolding</span></a><span> </span><a href="CoreSyn.html#InlineStable"><span class="hs-identifier hs-var">InlineStable</span></a><span> </span><span class="hs-identifier hs-var">True</span><span> </span><a href="#local-1628087669"><span class="hs-identifier hs-var">expr</span></a><span> </span><a href="#local-1628087667"><span class="hs-identifier hs-var">guidance</span></a><span> </span><span class="hs-special">)</span><span class="hs-special">}</span><span>
</span><a name="line-1237"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-1238"></a><span>    </span><a name="local-1628087667"><a href="#local-1628087667"><span class="hs-identifier">guidance</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="CoreSyn.html#UnfWhen"><span class="hs-identifier hs-var">UnfWhen</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">ug_arity</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1628087663"><span class="hs-identifier hs-var">arity</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">ug_unsat_ok</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1628087664"><span class="hs-identifier hs-var">unsat_ok</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">ug_boring_ok</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1628087665"><span class="hs-identifier hs-var">boring_ok</span></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-1239"></a><span>
</span><a name="line-1240"></a><span class="hs-identifier">tcUnfolding</span><span> </span><a name="local-1628087670"><a href="#local-1628087670"><span class="hs-identifier">name</span></a></a><span> </span><a name="local-1628087671"><a href="#local-1628087671"><span class="hs-identifier">dfun_ty</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><a href="IfaceSyn.html#IfDFunUnfold"><span class="hs-identifier hs-var">IfDFunUnfold</span></a><span> </span><a name="local-1628087672"><a href="#local-1628087672"><span class="hs-identifier">bs</span></a></a><span> </span><a name="local-1628087673"><a href="#local-1628087673"><span class="hs-identifier">ops</span></a></a><span class="hs-special">)</span><span>
</span><a name="line-1241"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="TcIface.html#bindIfaceBndrs"><span class="hs-identifier hs-var">bindIfaceBndrs</span></a><span> </span><a href="#local-1628087672"><span class="hs-identifier hs-var">bs</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><span class="hs-glyph">\</span><span> </span><a name="local-1628087676"><a href="#local-1628087676"><span class="hs-identifier">bs'</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-1242"></a><span>    </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><a name="local-1628087677"><a href="#local-1628087677"><span class="hs-identifier">mb_ops1</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcRnMonad.html#forkM_maybe"><span class="hs-identifier hs-var">forkM_maybe</span></a><span> </span><a href="#local-1628087674"><span class="hs-identifier hs-var">doc</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a><span> </span><a href="TcIface.html#tcIfaceExpr"><span class="hs-identifier hs-var">tcIfaceExpr</span></a><span> </span><a href="#local-1628087673"><span class="hs-identifier hs-var">ops</span></a><span>
</span><a name="line-1243"></a><span>       </span><span class="hs-special">;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><span class="hs-keyword">case</span><span> </span><a href="#local-1628087677"><span class="hs-identifier hs-var">mb_ops1</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-1244"></a><span>                    </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><a href="CoreSyn.html#noUnfolding"><span class="hs-identifier hs-var">noUnfolding</span></a><span>
</span><a name="line-1245"></a><span>                    </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Just"><span class="hs-identifier hs-var">Just</span></a><span> </span><a name="local-1628087678"><a href="#local-1628087678"><span class="hs-identifier">ops1</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="CoreUnfold.html#mkDFunUnfolding"><span class="hs-identifier hs-var">mkDFunUnfolding</span></a><span> </span><a href="#local-1628087676"><span class="hs-identifier hs-var">bs'</span></a><span> </span><span class="hs-special">(</span><a href="DataCon.html#classDataCon"><span class="hs-identifier hs-var">classDataCon</span></a><span> </span><a href="#local-1628087675"><span class="hs-identifier hs-var">cls</span></a><span class="hs-special">)</span><span> </span><a href="#local-1628087678"><span class="hs-identifier hs-var">ops1</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-1246"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-1247"></a><span>    </span><a name="local-1628087674"><a href="#local-1628087674"><span class="hs-identifier">doc</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;Class ops for dfun&quot;</span><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1628087670"><span class="hs-identifier hs-var">name</span></a><span>
</span><a name="line-1248"></a><span>    </span><span class="hs-special">(</span><span class="hs-identifier">_</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">,</span><span> </span><a name="local-1628087675"><a href="#local-1628087675"><span class="hs-identifier">cls</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="TcType.html#tcSplitDFunTy"><span class="hs-identifier hs-var">tcSplitDFunTy</span></a><span> </span><a href="#local-1628087671"><span class="hs-identifier hs-var">dfun_ty</span></a><span>
</span><a name="line-1249"></a><span>
</span><a name="line-1250"></a><span class="hs-comment">{-
For unfoldings we try to do the job lazily, so that we never type check
an unfolding that isn't going to be looked at.
-}</span><span>
</span><a name="line-1254"></a><span>
</span><a name="line-1255"></a><span class="hs-identifier">tcPragExpr</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Name.html#Name"><span class="hs-identifier hs-type">Name</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="IfaceSyn.html#IfaceExpr"><span class="hs-identifier hs-type">IfaceExpr</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><span class="hs-special">(</span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a><span> </span><a href="CoreSyn.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a><span class="hs-special">)</span><span>
</span><a name="line-1256"></a><a name="tcPragExpr"><a href="TcIface.html#tcPragExpr"><span class="hs-identifier">tcPragExpr</span></a></a><span> </span><a name="local-1628087679"><a href="#local-1628087679"><span class="hs-identifier">name</span></a></a><span> </span><a name="local-1628087680"><a href="#local-1628087680"><span class="hs-identifier">expr</span></a></a><span>
</span><a name="line-1257"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="TcRnMonad.html#forkM_maybe"><span class="hs-identifier hs-var">forkM_maybe</span></a><span> </span><a href="#local-1628087681"><span class="hs-identifier hs-var">doc</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-1258"></a><span>    </span><a name="local-1628087688"><a href="#local-1628087688"><span class="hs-identifier">core_expr'</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tcIfaceExpr"><span class="hs-identifier hs-var">tcIfaceExpr</span></a><span> </span><a href="#local-1628087680"><span class="hs-identifier hs-var">expr</span></a><span>
</span><a name="line-1259"></a><span>
</span><a name="line-1260"></a><span>                </span><span class="hs-comment">-- Check for type consistency in the unfolding</span><span>
</span><a name="line-1261"></a><span>    </span><a href="TcRnMonad.html#whenGOptM"><span class="hs-identifier hs-var">whenGOptM</span></a><span> </span><a href="DynFlags.html#Opt_DoCoreLinting"><span class="hs-identifier hs-var">Opt_DoCoreLinting</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-1262"></a><span>        </span><a name="local-1628087689"><a href="#local-1628087689"><span class="hs-identifier">in_scope</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="#local-1628087682"><span class="hs-identifier hs-var">get_in_scope</span></a><span>
</span><a name="line-1263"></a><span>        </span><a name="local-1628087690"><a href="#local-1628087690"><span class="hs-identifier">dflags</span></a></a><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><a href="DynFlags.html#getDynFlags"><span class="hs-identifier hs-var">getDynFlags</span></a><span>
</span><a name="line-1264"></a><span>        </span><span class="hs-keyword">case</span><span> </span><a href="CoreLint.html#lintUnfolding"><span class="hs-identifier hs-var">lintUnfolding</span></a><span> </span><a href="#local-1628087690"><span class="hs-identifier hs-var">dflags</span></a><span> </span><a href="SrcLoc.html#noSrcLoc"><span class="hs-identifier hs-var">noSrcLoc</span></a><span> </span><a href="#local-1628087689"><span class="hs-identifier hs-var">in_scope</span></a><span> </span><a href="#local-1628087688"><span class="hs-identifier hs-var">core_expr'</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-1265"></a><span>          </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-1266"></a><span>          </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Just"><span class="hs-identifier hs-var">Just</span></a><span> </span><a name="local-1628087691"><a href="#local-1628087691"><span class="hs-identifier">fail_msg</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><a name="local-1628087692"><a href="#local-1628087692"><span class="hs-identifier">mod</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcRnMonad.html#getIfModule"><span class="hs-identifier hs-var">getIfModule</span></a><span>
</span><a name="line-1267"></a><span>                              </span><span class="hs-special">;</span><span> </span><a href="Outputable.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a><span> </span><span class="hs-string">&quot;Iface Lint failure&quot;</span><span>
</span><a name="line-1268"></a><span>                                  </span><span class="hs-special">(</span><a href="Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a><span> </span><span class="hs-special">[</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;In interface for&quot;</span><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1628087692"><span class="hs-identifier hs-var">mod</span></a><span>
</span><a name="line-1269"></a><span>                                        </span><span class="hs-special">,</span><span> </span><a href="Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a><span> </span><a href="#local-1628087681"><span class="hs-identifier hs-var">doc</span></a><span> </span><span class="hs-number">2</span><span> </span><a href="#local-1628087691"><span class="hs-identifier hs-var">fail_msg</span></a><span>
</span><a name="line-1270"></a><span>                                        </span><span class="hs-special">,</span><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1628087679"><span class="hs-identifier hs-var">name</span></a><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#equals"><span class="hs-identifier hs-var">equals</span></a><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1628087688"><span class="hs-identifier hs-var">core_expr'</span></a><span>
</span><a name="line-1271"></a><span>                                        </span><span class="hs-special">,</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;Iface expr =&quot;</span><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1628087680"><span class="hs-identifier hs-var">expr</span></a><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-1272"></a><span>    </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><a href="#local-1628087688"><span class="hs-identifier hs-var">core_expr'</span></a><span>
</span><a name="line-1273"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-1274"></a><span>    </span><a name="local-1628087681"><a href="#local-1628087681"><span class="hs-identifier">doc</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;Unfolding of&quot;</span><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1628087679"><span class="hs-identifier hs-var">name</span></a><span>
</span><a name="line-1275"></a><span>
</span><a name="line-1276"></a><span>    </span><span class="hs-identifier">get_in_scope</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><span class="hs-special">[</span><a href="Var.html#Var"><span class="hs-identifier hs-type">Var</span></a><span class="hs-special">]</span><span> </span><span class="hs-comment">-- Totally disgusting; but just for linting</span><span>
</span><a name="line-1277"></a><span>    </span><a name="local-1628087682"><a href="#local-1628087682"><span class="hs-identifier">get_in_scope</span></a></a><span>
</span><a name="line-1278"></a><span>        </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><a name="local-1628087683"><a href="#local-1628087683"><span class="hs-identifier">gbl_env</span></a></a><span class="hs-special">,</span><span> </span><a name="local-1628087684"><a href="#local-1628087684"><span class="hs-identifier">lcl_env</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcRnMonad.html#getEnvs"><span class="hs-identifier hs-var">getEnvs</span></a><span>
</span><a name="line-1279"></a><span>             </span><span class="hs-special">;</span><span> </span><a name="local-1628087687"><a href="#local-1628087687"><span class="hs-identifier">rec_ids</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-identifier">if_rec_types</span><span> </span><a href="#local-1628087683"><span class="hs-identifier hs-var">gbl_env</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-1280"></a><span>                            </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><a name="line-1281"></a><span>                            </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Just"><span class="hs-identifier hs-var">Just</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier">_</span><span class="hs-special">,</span><span> </span><a name="local-1628087685"><a href="#local-1628087685"><span class="hs-identifier">get_env</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-1282"></a><span>                               </span><span class="hs-special">{</span><span> </span><a name="local-1628087686"><a href="#local-1628087686"><span class="hs-identifier">type_env</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcRnMonad.html#setLclEnv"><span class="hs-identifier hs-var">setLclEnv</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><a href="#local-1628087685"><span class="hs-identifier hs-var">get_env</span></a><span>
</span><a name="line-1283"></a><span>                               </span><span class="hs-special">;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="HscTypes.html#typeEnvIds"><span class="hs-identifier hs-var">typeEnvIds</span></a><span> </span><a href="#local-1628087686"><span class="hs-identifier hs-var">type_env</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-1284"></a><span>             </span><span class="hs-special">;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="VarEnv.html#varEnvElts"><span class="hs-identifier hs-var">varEnvElts</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier">if_tv_env</span><span> </span><a href="#local-1628087684"><span class="hs-identifier hs-var">lcl_env</span></a><span class="hs-special">)</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a><span>
</span><a name="line-1285"></a><span>                       </span><a href="VarEnv.html#varEnvElts"><span class="hs-identifier hs-var">varEnvElts</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier">if_id_env</span><span> </span><a href="#local-1628087684"><span class="hs-identifier hs-var">lcl_env</span></a><span class="hs-special">)</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a><span>
</span><a name="line-1286"></a><span>                       </span><a href="#local-1628087687"><span class="hs-identifier hs-var">rec_ids</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-1287"></a><span>
</span><a name="line-1288"></a><span class="hs-comment">{-
************************************************************************
*                                                                      *
                Getting from Names to TyThings
*                                                                      *
************************************************************************
-}</span><span>
</span><a name="line-1295"></a><span>
</span><a name="line-1296"></a><span class="hs-identifier">tcIfaceGlobal</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Name.html#Name"><span class="hs-identifier hs-type">Name</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><a href="TyCoRep.html#TyThing"><span class="hs-identifier hs-type">TyThing</span></a><span>
</span><a name="line-1297"></a><a name="tcIfaceGlobal"><a href="TcIface.html#tcIfaceGlobal"><span class="hs-identifier">tcIfaceGlobal</span></a></a><span> </span><a name="local-1628087693"><a href="#local-1628087693"><span class="hs-identifier">name</span></a></a><span>
</span><a name="line-1298"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Just"><span class="hs-identifier hs-var">Just</span></a><span> </span><a name="local-1628087694"><a href="#local-1628087694"><span class="hs-identifier">thing</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Name.html#wiredInNameTyThing_maybe"><span class="hs-identifier hs-var">wiredInNameTyThing_maybe</span></a><span> </span><a href="#local-1628087693"><span class="hs-identifier hs-var">name</span></a><span>
</span><a name="line-1299"></a><span>        </span><span class="hs-comment">-- Wired-in things include TyCons, DataCons, and Ids</span><span>
</span><a name="line-1300"></a><span>        </span><span class="hs-comment">-- Even though we are in an interface file, we want to make</span><span>
</span><a name="line-1301"></a><span>        </span><span class="hs-comment">-- sure the instances and RULES of this thing (particularly TyCon) are loaded</span><span>
</span><a name="line-1302"></a><span>        </span><span class="hs-comment">-- Imagine: f :: Double -&gt; Double</span><span>
</span><a name="line-1303"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><a href="LoadIface.html#ifCheckWiredInThing"><span class="hs-identifier hs-var">ifCheckWiredInThing</span></a><span> </span><a href="#local-1628087694"><span class="hs-identifier hs-var">thing</span></a><span class="hs-special">;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><a href="#local-1628087694"><span class="hs-identifier hs-var">thing</span></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-1304"></a><span>
</span><a name="line-1305"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a><span>
</span><a name="line-1306"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><a name="local-1628087695"><a href="#local-1628087695"><span class="hs-identifier">env</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcRnMonad.html#getGblEnv"><span class="hs-identifier hs-var">getGblEnv</span></a><span>
</span><a name="line-1307"></a><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-identifier">if_rec_types</span><span> </span><a href="#local-1628087695"><span class="hs-identifier hs-var">env</span></a><span> </span><span class="hs-keyword">of</span><span> </span><span class="hs-special">{</span><span>    </span><span class="hs-comment">-- Note [Tying the knot]</span><span>
</span><a name="line-1308"></a><span>            </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Just"><span class="hs-identifier hs-var">Just</span></a><span> </span><span class="hs-special">(</span><a name="local-1628087696"><a href="#local-1628087696"><span class="hs-identifier">mod</span></a></a><span class="hs-special">,</span><span> </span><a name="local-1628087697"><a href="#local-1628087697"><span class="hs-identifier">get_type_env</span></a></a><span class="hs-special">)</span><span>
</span><a name="line-1309"></a><span>                </span><span class="hs-glyph">|</span><span> </span><a href="Name.html#nameIsLocalOrFrom"><span class="hs-identifier hs-var">nameIsLocalOrFrom</span></a><span> </span><a href="#local-1628087696"><span class="hs-identifier hs-var">mod</span></a><span> </span><a href="#local-1628087693"><span class="hs-identifier hs-var">name</span></a><span>
</span><a name="line-1310"></a><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>           </span><span class="hs-comment">-- It's defined in the module being compiled</span><span>
</span><a name="line-1311"></a><span>                </span><span class="hs-special">{</span><span> </span><a name="local-1628087698"><a href="#local-1628087698"><span class="hs-identifier">type_env</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcRnMonad.html#setLclEnv"><span class="hs-identifier hs-var">setLclEnv</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><a href="#local-1628087697"><span class="hs-identifier hs-var">get_type_env</span></a><span>         </span><span class="hs-comment">-- yuk</span><span>
</span><a name="line-1312"></a><span>                </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="NameEnv.html#lookupNameEnv"><span class="hs-identifier hs-var">lookupNameEnv</span></a><span> </span><a href="#local-1628087698"><span class="hs-identifier hs-var">type_env</span></a><span> </span><a href="#local-1628087693"><span class="hs-identifier hs-var">name</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-1313"></a><span>                        </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Just"><span class="hs-identifier hs-var">Just</span></a><span> </span><a name="local-1628087699"><a href="#local-1628087699"><span class="hs-identifier">thing</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><a href="#local-1628087699"><span class="hs-identifier hs-var">thing</span></a><span>
</span><a name="line-1314"></a><span>                        </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Outputable.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a><span> </span><span class="hs-string">&quot;tcIfaceGlobal (local): not found:&quot;</span><span>
</span><a name="line-1315"></a><span>                                                </span><span class="hs-special">(</span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1628087693"><span class="hs-identifier hs-var">name</span></a><span> </span><a href="Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1628087698"><span class="hs-identifier hs-var">type_env</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-1316"></a><span>
</span><a name="line-1317"></a><span>          </span><span class="hs-special">;</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-1318"></a><span>
</span><a name="line-1319"></a><span>        </span><span class="hs-special">{</span><span> </span><a name="local-1628087700"><a href="#local-1628087700"><span class="hs-identifier">hsc_env</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcRnMonad.html#getTopEnv"><span class="hs-identifier hs-var">getTopEnv</span></a><span>
</span><a name="line-1320"></a><span>        </span><span class="hs-special">;</span><span> </span><a name="local-1628087701"><a href="#local-1628087701"><span class="hs-identifier">mb_thing</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a><span> </span><span class="hs-special">(</span><a href="HscTypes.html#lookupTypeHscEnv"><span class="hs-identifier hs-var">lookupTypeHscEnv</span></a><span> </span><a href="#local-1628087700"><span class="hs-identifier hs-var">hsc_env</span></a><span> </span><a href="#local-1628087693"><span class="hs-identifier hs-var">name</span></a><span class="hs-special">)</span><span>
</span><a name="line-1321"></a><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="#local-1628087701"><span class="hs-identifier hs-var">mb_thing</span></a><span> </span><span class="hs-keyword">of</span><span> </span><span class="hs-special">{</span><span>
</span><a name="line-1322"></a><span>            </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Just"><span class="hs-identifier hs-var">Just</span></a><span> </span><a name="local-1628087702"><a href="#local-1628087702"><span class="hs-identifier">thing</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><a href="#local-1628087702"><span class="hs-identifier hs-var">thing</span></a><span> </span><span class="hs-special">;</span><span>
</span><a name="line-1323"></a><span>            </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-1324"></a><span>
</span><a name="line-1325"></a><span>        </span><span class="hs-special">{</span><span> </span><a name="local-1628087703"><a href="#local-1628087703"><span class="hs-identifier">mb_thing</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="LoadIface.html#importDecl"><span class="hs-identifier hs-var">importDecl</span></a><span> </span><a href="#local-1628087693"><span class="hs-identifier hs-var">name</span></a><span>   </span><span class="hs-comment">-- It's imported; go get it</span><span>
</span><a name="line-1326"></a><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="#local-1628087703"><span class="hs-identifier hs-var">mb_thing</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-1327"></a><span>            </span><a href="Maybes.html#Failed"><span class="hs-identifier hs-var">Failed</span></a><span> </span><a name="local-1628087704"><a href="#local-1628087704"><span class="hs-identifier">err</span></a></a><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnMonad.html#failIfM"><span class="hs-identifier hs-var">failIfM</span></a><span> </span><a href="#local-1628087704"><span class="hs-identifier hs-var">err</span></a><span>
</span><a name="line-1328"></a><span>            </span><a href="Maybes.html#Succeeded"><span class="hs-identifier hs-var">Succeeded</span></a><span> </span><a name="local-1628087705"><a href="#local-1628087705"><span class="hs-identifier">thing</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><a href="#local-1628087705"><span class="hs-identifier hs-var">thing</span></a><span>
</span><a name="line-1329"></a><span>    </span><span class="hs-special">}</span><span class="hs-special">}</span><span class="hs-special">}</span><span class="hs-special">}</span><span class="hs-special">}</span><span>
</span><a name="line-1330"></a><span>
</span><a name="line-1331"></a><span class="hs-comment">-- Note [Tying the knot]</span><span>
</span><a name="line-1332"></a><span class="hs-comment">-- ~~~~~~~~~~~~~~~~~~~~~</span><span>
</span><a name="line-1333"></a><span class="hs-comment">-- The if_rec_types field is used in two situations:</span><span>
</span><a name="line-1334"></a><span class="hs-comment">--</span><span>
</span><a name="line-1335"></a><span class="hs-comment">-- a) Compiling M.hs, which indiretly imports Foo.hi, which mentions M.T</span><span>
</span><a name="line-1336"></a><span class="hs-comment">--    Then we look up M.T in M's type environment, which is splatted into if_rec_types</span><span>
</span><a name="line-1337"></a><span class="hs-comment">--    after we've built M's type envt.</span><span>
</span><a name="line-1338"></a><span class="hs-comment">--</span><span>
</span><a name="line-1339"></a><span class="hs-comment">-- b) In ghc --make, during the upsweep, we encounter M.hs, whose interface M.hi</span><span>
</span><a name="line-1340"></a><span class="hs-comment">--    is up to date.  So we call typecheckIface on M.hi.  This splats M.T into</span><span>
</span><a name="line-1341"></a><span class="hs-comment">--    if_rec_types so that the (lazily typechecked) decls see all the other decls</span><span>
</span><a name="line-1342"></a><span class="hs-comment">--</span><span>
</span><a name="line-1343"></a><span class="hs-comment">-- In case (b) it's important to do the if_rec_types check *before* looking in the HPT</span><span>
</span><a name="line-1344"></a><span class="hs-comment">-- Because if M.hs also has M.hs-boot, M.T will *already be* in the HPT, but in its</span><span>
</span><a name="line-1345"></a><span class="hs-comment">-- emasculated form (e.g. lacking data constructors).</span><span>
</span><a name="line-1346"></a><span>
</span><a name="line-1347"></a><span class="hs-identifier">tcIfaceTyConByName</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="IfaceType.html#IfExtName"><span class="hs-identifier hs-type">IfExtName</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><a href="TyCon.html#TyCon"><span class="hs-identifier hs-type">TyCon</span></a><span>
</span><a name="line-1348"></a><a name="tcIfaceTyConByName"><a href="TcIface.html#tcIfaceTyConByName"><span class="hs-identifier">tcIfaceTyConByName</span></a></a><span> </span><a name="local-1628087706"><a href="#local-1628087706"><span class="hs-identifier">name</span></a></a><span>
</span><a name="line-1349"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><a name="local-1628087707"><a href="#local-1628087707"><span class="hs-identifier">thing</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tcIfaceGlobal"><span class="hs-identifier hs-var">tcIfaceGlobal</span></a><span> </span><a href="#local-1628087706"><span class="hs-identifier hs-var">name</span></a><span>
</span><a name="line-1350"></a><span>       </span><span class="hs-special">;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="HscTypes.html#tyThingTyCon"><span class="hs-identifier hs-var">tyThingTyCon</span></a><span> </span><a href="#local-1628087707"><span class="hs-identifier hs-var">thing</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-1351"></a><span>
</span><a name="line-1352"></a><span class="hs-identifier">tcIfaceTyCon</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="IfaceType.html#IfaceTyCon"><span class="hs-identifier hs-type">IfaceTyCon</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><a href="TyCon.html#TyCon"><span class="hs-identifier hs-type">TyCon</span></a><span>
</span><a name="line-1353"></a><a name="tcIfaceTyCon"><a href="TcIface.html#tcIfaceTyCon"><span class="hs-identifier">tcIfaceTyCon</span></a></a><span> </span><span class="hs-special">(</span><a href="IfaceType.html#IfaceTyCon"><span class="hs-identifier hs-var">IfaceTyCon</span></a><span> </span><a name="local-1628087708"><a href="#local-1628087708"><span class="hs-identifier">name</span></a></a><span> </span><a name="local-1628087709"><a href="#local-1628087709"><span class="hs-identifier">info</span></a></a><span class="hs-special">)</span><span>
</span><a name="line-1354"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><a name="local-1628087710"><a href="#local-1628087710"><span class="hs-identifier">thing</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tcIfaceGlobal"><span class="hs-identifier hs-var">tcIfaceGlobal</span></a><span> </span><a href="#local-1628087708"><span class="hs-identifier hs-var">name</span></a><span>
</span><a name="line-1355"></a><span>       </span><span class="hs-special">;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><span class="hs-keyword">case</span><span> </span><a href="#local-1628087709"><span class="hs-identifier hs-var">info</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-1356"></a><span>           </span><a href="IfaceType.html#NoIfaceTyConInfo"><span class="hs-identifier hs-var">NoIfaceTyConInfo</span></a><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><a href="HscTypes.html#tyThingTyCon"><span class="hs-identifier hs-var">tyThingTyCon</span></a><span> </span><a href="#local-1628087710"><span class="hs-identifier hs-var">thing</span></a><span>
</span><a name="line-1357"></a><span>           </span><a href="IfaceType.html#IfacePromotedDataCon"><span class="hs-identifier hs-var">IfacePromotedDataCon</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="DataCon.html#promoteDataCon"><span class="hs-identifier hs-var">promoteDataCon</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><a href="HscTypes.html#tyThingDataCon"><span class="hs-identifier hs-var">tyThingDataCon</span></a><span> </span><a href="#local-1628087710"><span class="hs-identifier hs-var">thing</span></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-1358"></a><span>
</span><a name="line-1359"></a><span class="hs-identifier">tcIfaceCoAxiom</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Name.html#Name"><span class="hs-identifier hs-type">Name</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><span class="hs-special">(</span><a href="CoAxiom.html#CoAxiom"><span class="hs-identifier hs-type">CoAxiom</span></a><span> </span><a href="CoAxiom.html#Branched"><span class="hs-identifier hs-type">Branched</span></a><span class="hs-special">)</span><span>
</span><a name="line-1360"></a><a name="tcIfaceCoAxiom"><a href="TcIface.html#tcIfaceCoAxiom"><span class="hs-identifier">tcIfaceCoAxiom</span></a></a><span> </span><a name="local-1628087711"><a href="#local-1628087711"><span class="hs-identifier">name</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><a name="local-1628087712"><a href="#local-1628087712"><span class="hs-identifier">thing</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tcIfaceGlobal"><span class="hs-identifier hs-var">tcIfaceGlobal</span></a><span> </span><a href="#local-1628087711"><span class="hs-identifier hs-var">name</span></a><span>
</span><a name="line-1361"></a><span>                         </span><span class="hs-special">;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="HscTypes.html#tyThingCoAxiom"><span class="hs-identifier hs-var">tyThingCoAxiom</span></a><span> </span><a href="#local-1628087712"><span class="hs-identifier hs-var">thing</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-1362"></a><span>
</span><a name="line-1363"></a><span class="hs-identifier">tcIfaceDataCon</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Name.html#Name"><span class="hs-identifier hs-type">Name</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><a href="DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a><span>
</span><a name="line-1364"></a><a name="tcIfaceDataCon"><a href="TcIface.html#tcIfaceDataCon"><span class="hs-identifier">tcIfaceDataCon</span></a></a><span> </span><a name="local-1628087713"><a href="#local-1628087713"><span class="hs-identifier">name</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><a name="local-1628087714"><a href="#local-1628087714"><span class="hs-identifier">thing</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tcIfaceGlobal"><span class="hs-identifier hs-var">tcIfaceGlobal</span></a><span> </span><a href="#local-1628087713"><span class="hs-identifier hs-var">name</span></a><span>
</span><a name="line-1365"></a><span>                         </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="#local-1628087714"><span class="hs-identifier hs-var">thing</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-1366"></a><span>                                </span><a href="TyCoRep.html#AConLike"><span class="hs-identifier hs-var">AConLike</span></a><span> </span><span class="hs-special">(</span><a href="ConLike.html#RealDataCon"><span class="hs-identifier hs-var">RealDataCon</span></a><span> </span><a name="local-1628087715"><a href="#local-1628087715"><span class="hs-identifier">dc</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><a href="#local-1628087715"><span class="hs-identifier hs-var">dc</span></a><span>
</span><a name="line-1367"></a><span>                                </span><span class="hs-identifier">_</span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Outputable.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a><span> </span><span class="hs-string">&quot;tcIfaceExtDC&quot;</span><span> </span><span class="hs-special">(</span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1628087713"><span class="hs-identifier hs-var">name</span></a><a href="Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1628087714"><span class="hs-identifier hs-var">thing</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-1368"></a><span>
</span><a name="line-1369"></a><span class="hs-identifier">tcIfaceExtId</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Name.html#Name"><span class="hs-identifier hs-type">Name</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><a href="Var.html#Id"><span class="hs-identifier hs-type">Id</span></a><span>
</span><a name="line-1370"></a><a name="tcIfaceExtId"><a href="TcIface.html#tcIfaceExtId"><span class="hs-identifier">tcIfaceExtId</span></a></a><span> </span><a name="local-1628087716"><a href="#local-1628087716"><span class="hs-identifier">name</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><a name="local-1628087717"><a href="#local-1628087717"><span class="hs-identifier">thing</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tcIfaceGlobal"><span class="hs-identifier hs-var">tcIfaceGlobal</span></a><span> </span><a href="#local-1628087716"><span class="hs-identifier hs-var">name</span></a><span>
</span><a name="line-1371"></a><span>                       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="#local-1628087717"><span class="hs-identifier hs-var">thing</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-1372"></a><span>                          </span><a href="TyCoRep.html#AnId"><span class="hs-identifier hs-var">AnId</span></a><span> </span><a name="local-1628087718"><a href="#local-1628087718"><span class="hs-identifier">id</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><a href="#local-1628087718"><span class="hs-identifier hs-var">id</span></a><span>
</span><a name="line-1373"></a><span>                          </span><span class="hs-identifier">_</span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Outputable.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a><span> </span><span class="hs-string">&quot;tcIfaceExtId&quot;</span><span> </span><span class="hs-special">(</span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1628087716"><span class="hs-identifier hs-var">name</span></a><a href="Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1628087717"><span class="hs-identifier hs-var">thing</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-1374"></a><span>
</span><a name="line-1375"></a><span class="hs-comment">{-
************************************************************************
*                                                                      *
                Bindings
*                                                                      *
************************************************************************
-}</span><span>
</span><a name="line-1382"></a><span>
</span><a name="line-1383"></a><span class="hs-identifier">bindIfaceId</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="IfaceType.html#IfaceIdBndr"><span class="hs-identifier hs-type">IfaceIdBndr</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><a href="Var.html#Id"><span class="hs-identifier hs-type">Id</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><a href="#local-1628087071"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><a href="#local-1628087071"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-1384"></a><a name="bindIfaceId"><a href="TcIface.html#bindIfaceId"><span class="hs-identifier">bindIfaceId</span></a></a><span> </span><span class="hs-special">(</span><a name="local-1628087719"><a href="#local-1628087719"><span class="hs-identifier">fs</span></a></a><span class="hs-special">,</span><span> </span><a name="local-1628087720"><a href="#local-1628087720"><span class="hs-identifier">ty</span></a></a><span class="hs-special">)</span><span> </span><a name="local-1628087721"><a href="#local-1628087721"><span class="hs-identifier">thing_inside</span></a></a><span>
</span><a name="line-1385"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><a name="local-1628087722"><a href="#local-1628087722"><span class="hs-identifier">name</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="IfaceEnv.html#newIfaceName"><span class="hs-identifier hs-var">newIfaceName</span></a><span> </span><span class="hs-special">(</span><a href="OccName.html#mkVarOccFS"><span class="hs-identifier hs-var">mkVarOccFS</span></a><span> </span><a href="#local-1628087719"><span class="hs-identifier hs-var">fs</span></a><span class="hs-special">)</span><span>
</span><a name="line-1386"></a><span>        </span><span class="hs-special">;</span><span> </span><a name="local-1628087723"><a href="#local-1628087723"><span class="hs-identifier">ty'</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tcIfaceType"><span class="hs-identifier hs-var">tcIfaceType</span></a><span> </span><a href="#local-1628087720"><span class="hs-identifier hs-var">ty</span></a><span>
</span><a name="line-1387"></a><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><a name="local-1628087724"><a href="#local-1628087724"><span class="hs-identifier">id</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Id.html#mkLocalIdOrCoVar"><span class="hs-identifier hs-var">mkLocalIdOrCoVar</span></a><span> </span><a href="#local-1628087722"><span class="hs-identifier hs-var">name</span></a><span> </span><a href="#local-1628087723"><span class="hs-identifier hs-var">ty'</span></a><span>
</span><a name="line-1388"></a><span>        </span><span class="hs-special">;</span><span> </span><a href="IfaceEnv.html#extendIfaceIdEnv"><span class="hs-identifier hs-var">extendIfaceIdEnv</span></a><span> </span><span class="hs-special">[</span><a href="#local-1628087724"><span class="hs-identifier hs-var">id</span></a><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><a href="#local-1628087721"><span class="hs-identifier hs-var">thing_inside</span></a><span> </span><a href="#local-1628087724"><span class="hs-identifier hs-var">id</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-1389"></a><span>
</span><a name="line-1390"></a><span class="hs-identifier">bindIfaceIds</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><a href="IfaceType.html#IfaceIdBndr"><span class="hs-identifier hs-type">IfaceIdBndr</span></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><a href="Var.html#Id"><span class="hs-identifier hs-type">Id</span></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><a href="#local-1628087070"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><a href="#local-1628087070"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-1391"></a><a name="bindIfaceIds"><a href="TcIface.html#bindIfaceIds"><span class="hs-identifier">bindIfaceIds</span></a></a><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><a name="local-1628087725"><a href="#local-1628087725"><span class="hs-identifier">thing_inside</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1628087725"><span class="hs-identifier hs-var">thing_inside</span></a><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><a name="line-1392"></a><span class="hs-identifier">bindIfaceIds</span><span> </span><span class="hs-special">(</span><a name="local-1628087726"><a href="#local-1628087726"><span class="hs-identifier">b</span></a></a><span class="hs-glyph">:</span><a name="local-1628087727"><a href="#local-1628087727"><span class="hs-identifier">bs</span></a></a><span class="hs-special">)</span><span> </span><a name="local-1628087728"><a href="#local-1628087728"><span class="hs-identifier">thing_inside</span></a></a><span>
</span><a name="line-1393"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="TcIface.html#bindIfaceId"><span class="hs-identifier hs-var">bindIfaceId</span></a><span> </span><a href="#local-1628087726"><span class="hs-identifier hs-var">b</span></a><span>   </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><span class="hs-glyph">\</span><a name="local-1628087729"><a href="#local-1628087729"><span class="hs-identifier">b'</span></a></a><span>  </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-1394"></a><span>    </span><a href="TcIface.html#bindIfaceIds"><span class="hs-identifier hs-var">bindIfaceIds</span></a><span> </span><a href="#local-1628087727"><span class="hs-identifier hs-var">bs</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><span class="hs-glyph">\</span><a name="local-1628087730"><a href="#local-1628087730"><span class="hs-identifier">bs'</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-1395"></a><span>    </span><a href="#local-1628087728"><span class="hs-identifier hs-var">thing_inside</span></a><span> </span><span class="hs-special">(</span><a href="#local-1628087729"><span class="hs-identifier hs-var">b'</span></a><span class="hs-glyph">:</span><a href="#local-1628087730"><span class="hs-identifier hs-var">bs'</span></a><span class="hs-special">)</span><span>
</span><a name="line-1396"></a><span>
</span><a name="line-1397"></a><span class="hs-identifier">bindIfaceBndr</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="IfaceType.html#IfaceBndr"><span class="hs-identifier hs-type">IfaceBndr</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><a href="CoreSyn.html#CoreBndr"><span class="hs-identifier hs-type">CoreBndr</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><a href="#local-1628087069"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><a href="#local-1628087069"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-1398"></a><a name="bindIfaceBndr"><a href="TcIface.html#bindIfaceBndr"><span class="hs-identifier">bindIfaceBndr</span></a></a><span> </span><span class="hs-special">(</span><a href="IfaceType.html#IfaceIdBndr"><span class="hs-identifier hs-var">IfaceIdBndr</span></a><span> </span><a name="local-1628087731"><a href="#local-1628087731"><span class="hs-identifier">bndr</span></a></a><span class="hs-special">)</span><span> </span><a name="local-1628087732"><a href="#local-1628087732"><span class="hs-identifier">thing_inside</span></a></a><span>
</span><a name="line-1399"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="TcIface.html#bindIfaceId"><span class="hs-identifier hs-var">bindIfaceId</span></a><span> </span><a href="#local-1628087731"><span class="hs-identifier hs-var">bndr</span></a><span> </span><a href="#local-1628087732"><span class="hs-identifier hs-var">thing_inside</span></a><span>
</span><a name="line-1400"></a><span class="hs-identifier">bindIfaceBndr</span><span> </span><span class="hs-special">(</span><a href="IfaceType.html#IfaceTvBndr"><span class="hs-identifier hs-var">IfaceTvBndr</span></a><span> </span><a name="local-1628087733"><a href="#local-1628087733"><span class="hs-identifier">bndr</span></a></a><span class="hs-special">)</span><span> </span><a name="local-1628087734"><a href="#local-1628087734"><span class="hs-identifier">thing_inside</span></a></a><span>
</span><a name="line-1401"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="TcIface.html#bindIfaceTyVar"><span class="hs-identifier hs-var">bindIfaceTyVar</span></a><span> </span><a href="#local-1628087733"><span class="hs-identifier hs-var">bndr</span></a><span> </span><a href="#local-1628087734"><span class="hs-identifier hs-var">thing_inside</span></a><span>
</span><a name="line-1402"></a><span>
</span><a name="line-1403"></a><span class="hs-identifier">bindIfaceBndrs</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><a href="IfaceType.html#IfaceBndr"><span class="hs-identifier hs-type">IfaceBndr</span></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><a href="CoreSyn.html#CoreBndr"><span class="hs-identifier hs-type">CoreBndr</span></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><a href="#local-1628087068"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><a href="#local-1628087068"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-1404"></a><a name="bindIfaceBndrs"><a href="TcIface.html#bindIfaceBndrs"><span class="hs-identifier">bindIfaceBndrs</span></a></a><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>     </span><a name="local-1628087735"><a href="#local-1628087735"><span class="hs-identifier">thing_inside</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1628087735"><span class="hs-identifier hs-var">thing_inside</span></a><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><a name="line-1405"></a><span class="hs-identifier">bindIfaceBndrs</span><span> </span><span class="hs-special">(</span><a name="local-1628087736"><a href="#local-1628087736"><span class="hs-identifier">b</span></a></a><span class="hs-glyph">:</span><a name="local-1628087737"><a href="#local-1628087737"><span class="hs-identifier">bs</span></a></a><span class="hs-special">)</span><span> </span><a name="local-1628087738"><a href="#local-1628087738"><span class="hs-identifier">thing_inside</span></a></a><span>
</span><a name="line-1406"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="TcIface.html#bindIfaceBndr"><span class="hs-identifier hs-var">bindIfaceBndr</span></a><span> </span><a href="#local-1628087736"><span class="hs-identifier hs-var">b</span></a><span>     </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><span class="hs-glyph">\</span><span> </span><a name="local-1628087739"><a href="#local-1628087739"><span class="hs-identifier">b'</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-1407"></a><span>    </span><a href="TcIface.html#bindIfaceBndrs"><span class="hs-identifier hs-var">bindIfaceBndrs</span></a><span> </span><a href="#local-1628087737"><span class="hs-identifier hs-var">bs</span></a><span>   </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><span class="hs-glyph">\</span><span> </span><a name="local-1628087740"><a href="#local-1628087740"><span class="hs-identifier">bs'</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-1408"></a><span>    </span><a href="#local-1628087738"><span class="hs-identifier hs-var">thing_inside</span></a><span> </span><span class="hs-special">(</span><a href="#local-1628087739"><span class="hs-identifier hs-var">b'</span></a><span class="hs-glyph">:</span><a href="#local-1628087740"><span class="hs-identifier hs-var">bs'</span></a><span class="hs-special">)</span><span>
</span><a name="line-1409"></a><span>
</span><a name="line-1410"></a><span class="hs-comment">-----------------------</span><span>
</span><a name="line-1411"></a><span class="hs-identifier">bindIfaceBndrTy</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="IfaceType.html#IfaceForAllBndr"><span class="hs-identifier hs-type">IfaceForAllBndr</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><a href="Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TyCoRep.html#VisibilityFlag"><span class="hs-identifier hs-type">VisibilityFlag</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><a href="#local-1628087067"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><a href="#local-1628087067"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-1412"></a><a name="bindIfaceBndrTy"><a href="TcIface.html#bindIfaceBndrTy"><span class="hs-identifier">bindIfaceBndrTy</span></a></a><span> </span><span class="hs-special">(</span><a href="IfaceType.html#IfaceTv"><span class="hs-identifier hs-var">IfaceTv</span></a><span> </span><a name="local-1628087741"><a href="#local-1628087741"><span class="hs-identifier">tv</span></a></a><span> </span><a name="local-1628087742"><a href="#local-1628087742"><span class="hs-identifier">vis</span></a></a><span class="hs-special">)</span><span> </span><a name="local-1628087743"><a href="#local-1628087743"><span class="hs-identifier">thing_inside</span></a></a><span>
</span><a name="line-1413"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="TcIface.html#bindIfaceTyVar"><span class="hs-identifier hs-var">bindIfaceTyVar</span></a><span> </span><a href="#local-1628087741"><span class="hs-identifier hs-var">tv</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><span class="hs-glyph">\</span><a name="local-1628087744"><a href="#local-1628087744"><span class="hs-identifier">tv'</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-1628087743"><span class="hs-identifier hs-var">thing_inside</span></a><span> </span><a href="#local-1628087744"><span class="hs-identifier hs-var">tv'</span></a><span> </span><a href="#local-1628087742"><span class="hs-identifier hs-var">vis</span></a><span>
</span><a name="line-1414"></a><span>
</span><a name="line-1415"></a><span class="hs-identifier">bindIfaceTyVar</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="IfaceType.html#IfaceTvBndr"><span class="hs-identifier hs-type">IfaceTvBndr</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><a href="Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><a href="#local-1628087066"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><a href="#local-1628087066"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-1416"></a><a name="bindIfaceTyVar"><a href="TcIface.html#bindIfaceTyVar"><span class="hs-identifier">bindIfaceTyVar</span></a></a><span> </span><span class="hs-special">(</span><a name="local-1628087745"><a href="#local-1628087745"><span class="hs-identifier">occ</span></a></a><span class="hs-special">,</span><a name="local-1628087746"><a href="#local-1628087746"><span class="hs-identifier">kind</span></a></a><span class="hs-special">)</span><span> </span><a name="local-1628087747"><a href="#local-1628087747"><span class="hs-identifier">thing_inside</span></a></a><span>
</span><a name="line-1417"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><a name="local-1628087748"><a href="#local-1628087748"><span class="hs-identifier">name</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="IfaceEnv.html#newIfaceName"><span class="hs-identifier hs-var">newIfaceName</span></a><span> </span><span class="hs-special">(</span><a href="OccName.html#mkTyVarOccFS"><span class="hs-identifier hs-var">mkTyVarOccFS</span></a><span> </span><a href="#local-1628087745"><span class="hs-identifier hs-var">occ</span></a><span class="hs-special">)</span><span>
</span><a name="line-1418"></a><span>        </span><span class="hs-special">;</span><span> </span><a name="local-1628087749"><a href="#local-1628087749"><span class="hs-identifier">tyvar</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#mk_iface_tyvar"><span class="hs-identifier hs-var">mk_iface_tyvar</span></a><span> </span><a href="#local-1628087748"><span class="hs-identifier hs-var">name</span></a><span> </span><a href="#local-1628087746"><span class="hs-identifier hs-var">kind</span></a><span>
</span><a name="line-1419"></a><span>        </span><span class="hs-special">;</span><span> </span><a href="IfaceEnv.html#extendIfaceTyVarEnv"><span class="hs-identifier hs-var">extendIfaceTyVarEnv</span></a><span> </span><span class="hs-special">[</span><a href="#local-1628087749"><span class="hs-identifier hs-var">tyvar</span></a><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><a href="#local-1628087747"><span class="hs-identifier hs-var">thing_inside</span></a><span> </span><a href="#local-1628087749"><span class="hs-identifier hs-var">tyvar</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-1420"></a><span>
</span><a name="line-1421"></a><span class="hs-identifier">bindIfaceTvBndrs</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><a href="IfaceType.html#IfaceTvBndr"><span class="hs-identifier hs-type">IfaceTvBndr</span></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><a href="Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><a href="#local-1628087065"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><a href="#local-1628087065"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-1422"></a><a name="bindIfaceTvBndrs"><a href="TcIface.html#bindIfaceTvBndrs"><span class="hs-identifier">bindIfaceTvBndrs</span></a></a><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>       </span><a name="local-1628087750"><a href="#local-1628087750"><span class="hs-identifier">thing_inside</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1628087750"><span class="hs-identifier hs-var">thing_inside</span></a><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><a name="line-1423"></a><span class="hs-identifier">bindIfaceTvBndrs</span><span> </span><span class="hs-special">(</span><a name="local-1628087751"><a href="#local-1628087751"><span class="hs-identifier">tv</span></a></a><span class="hs-glyph">:</span><a name="local-1628087752"><a href="#local-1628087752"><span class="hs-identifier">tvs</span></a></a><span class="hs-special">)</span><span> </span><a name="local-1628087753"><a href="#local-1628087753"><span class="hs-identifier">thing_inside</span></a></a><span>
</span><a name="line-1424"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="TcIface.html#bindIfaceTyVar"><span class="hs-identifier hs-var">bindIfaceTyVar</span></a><span> </span><a href="#local-1628087751"><span class="hs-identifier hs-var">tv</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><span class="hs-glyph">\</span><a name="local-1628087754"><a href="#local-1628087754"><span class="hs-identifier">tv'</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-1425"></a><span>    </span><a href="TcIface.html#bindIfaceTvBndrs"><span class="hs-identifier hs-var">bindIfaceTvBndrs</span></a><span> </span><a href="#local-1628087752"><span class="hs-identifier hs-var">tvs</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><span class="hs-glyph">\</span><a name="local-1628087755"><a href="#local-1628087755"><span class="hs-identifier">tvs'</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-1426"></a><span>    </span><a href="#local-1628087753"><span class="hs-identifier hs-var">thing_inside</span></a><span> </span><span class="hs-special">(</span><a href="#local-1628087754"><span class="hs-identifier hs-var">tv'</span></a><span class="hs-glyph">:</span><a href="#local-1628087755"><span class="hs-identifier hs-var">tvs'</span></a><span class="hs-special">)</span><span>
</span><a name="line-1427"></a><span>
</span><a name="line-1428"></a><span class="hs-identifier">mk_iface_tyvar</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Name.html#Name"><span class="hs-identifier hs-type">Name</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="IfaceType.html#IfaceKind"><span class="hs-identifier hs-type">IfaceKind</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><a href="Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a><span>
</span><a name="line-1429"></a><a name="mk_iface_tyvar"><a href="TcIface.html#mk_iface_tyvar"><span class="hs-identifier">mk_iface_tyvar</span></a></a><span> </span><a name="local-1628087756"><a href="#local-1628087756"><span class="hs-identifier">name</span></a></a><span> </span><a name="local-1628087757"><a href="#local-1628087757"><span class="hs-identifier">ifKind</span></a></a><span>
</span><a name="line-1430"></a><span>   </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><a name="local-1628087758"><a href="#local-1628087758"><span class="hs-identifier">kind</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcIface.html#tcIfaceType"><span class="hs-identifier hs-var">tcIfaceType</span></a><span> </span><a href="#local-1628087757"><span class="hs-identifier hs-var">ifKind</span></a><span>
</span><a name="line-1431"></a><span>        </span><span class="hs-special">;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="Var.html#mkTyVar"><span class="hs-identifier hs-var">Var</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">mkTyVar</span></a><span> </span><a href="#local-1628087756"><span class="hs-identifier hs-var">name</span></a><span> </span><a href="#local-1628087758"><span class="hs-identifier hs-var">kind</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-1432"></a><span>
</span><a name="line-1433"></a><span class="hs-identifier">bindIfaceTyConBinders</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><a href="IfaceType.html#IfaceTyConBinder"><span class="hs-identifier hs-type">IfaceTyConBinder</span></a><span class="hs-special">]</span><span>
</span><a name="line-1434"></a><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><a href="Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><a href="TyCoRep.html#TyBinder"><span class="hs-identifier hs-type">TyBinder</span></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><a href="#local-1628087064"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><a href="#local-1628087064"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-1435"></a><a name="bindIfaceTyConBinders"><a href="TcIface.html#bindIfaceTyConBinders"><span class="hs-identifier">bindIfaceTyConBinders</span></a></a><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><a name="local-1628087759"><a href="#local-1628087759"><span class="hs-identifier">thing_inside</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1628087759"><span class="hs-identifier hs-var">thing_inside</span></a><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><a name="line-1436"></a><span class="hs-identifier">bindIfaceTyConBinders</span><span> </span><span class="hs-special">(</span><a name="local-1628087760"><a href="#local-1628087760"><span class="hs-identifier">b</span></a></a><span class="hs-glyph">:</span><a name="local-1628087761"><a href="#local-1628087761"><span class="hs-identifier">bs</span></a></a><span class="hs-special">)</span><span> </span><a name="local-1628087762"><a href="#local-1628087762"><span class="hs-identifier">thing_inside</span></a></a><span>
</span><a name="line-1437"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="TcIface.html#bindIfaceTyConBinderX"><span class="hs-identifier hs-var">bindIfaceTyConBinderX</span></a><span> </span><a href="TcIface.html#bindIfaceTyVar"><span class="hs-identifier hs-var">bindIfaceTyVar</span></a><span> </span><a href="#local-1628087760"><span class="hs-identifier hs-var">b</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><span class="hs-glyph">\</span><span> </span><a name="local-1628087763"><a href="#local-1628087763"><span class="hs-identifier">tv'</span></a></a><span>  </span><a name="local-1628087764"><a href="#local-1628087764"><span class="hs-identifier">b'</span></a></a><span>  </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-1438"></a><span>    </span><a href="TcIface.html#bindIfaceTyConBinders"><span class="hs-identifier hs-var">bindIfaceTyConBinders</span></a><span> </span><a href="#local-1628087761"><span class="hs-identifier hs-var">bs</span></a><span>               </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><span class="hs-glyph">\</span><span> </span><a name="local-1628087765"><a href="#local-1628087765"><span class="hs-identifier">tvs'</span></a></a><span> </span><a name="local-1628087766"><a href="#local-1628087766"><span class="hs-identifier">bs'</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-1439"></a><span>    </span><a href="#local-1628087762"><span class="hs-identifier hs-var">thing_inside</span></a><span> </span><span class="hs-special">(</span><a href="#local-1628087763"><span class="hs-identifier hs-var">tv'</span></a><span class="hs-glyph">:</span><a href="#local-1628087765"><span class="hs-identifier hs-var">tvs'</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><a href="#local-1628087764"><span class="hs-identifier hs-var">b'</span></a><span class="hs-glyph">:</span><a href="#local-1628087766"><span class="hs-identifier hs-var">bs'</span></a><span class="hs-special">)</span><span>
</span><a name="line-1440"></a><span>
</span><a name="line-1441"></a><span class="hs-identifier">bindIfaceTyConBinders_AT</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><a href="IfaceType.html#IfaceTyConBinder"><span class="hs-identifier hs-type">IfaceTyConBinder</span></a><span class="hs-special">]</span><span>
</span><a name="line-1442"></a><span>                         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><a href="Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><a href="TyCoRep.html#TyBinder"><span class="hs-identifier hs-type">TyBinder</span></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><a href="#local-1628087063"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><a href="#local-1628087063"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-1443"></a><span class="hs-comment">-- Used for type variable in nested associated data/type declarations</span><span>
</span><a name="line-1444"></a><span class="hs-comment">-- where some of the type variables are already in scope</span><span>
</span><a name="line-1445"></a><span class="hs-comment">--    class C a where { data T a b }</span><span>
</span><a name="line-1446"></a><span class="hs-comment">-- Here 'a' is in scope when we look at the 'data T'</span><span>
</span><a name="line-1447"></a><a name="bindIfaceTyConBinders_AT"><a href="TcIface.html#bindIfaceTyConBinders_AT"><span class="hs-identifier">bindIfaceTyConBinders_AT</span></a></a><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><a name="local-1628087767"><a href="#local-1628087767"><span class="hs-identifier">thing_inside</span></a></a><span>
</span><a name="line-1448"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="#local-1628087767"><span class="hs-identifier hs-var">thing_inside</span></a><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><a name="line-1449"></a><span class="hs-identifier">bindIfaceTyConBinders_AT</span><span> </span><span class="hs-special">(</span><a name="local-1628087768"><a href="#local-1628087768"><span class="hs-identifier">b</span></a></a><span> </span><span class="hs-glyph">:</span><span> </span><a name="local-1628087769"><a href="#local-1628087769"><span class="hs-identifier">bs</span></a></a><span class="hs-special">)</span><span> </span><a name="local-1628087770"><a href="#local-1628087770"><span class="hs-identifier">thing_inside</span></a></a><span>
</span><a name="line-1450"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="TcIface.html#bindIfaceTyConBinderX"><span class="hs-identifier hs-var">bindIfaceTyConBinderX</span></a><span> </span><a href="#local-1628087771"><span class="hs-identifier hs-var">bind_tv</span></a><span> </span><a href="#local-1628087768"><span class="hs-identifier hs-var">b</span></a><span>  </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><span class="hs-glyph">\</span><a name="local-1628087776"><a href="#local-1628087776"><span class="hs-identifier">tv'</span></a></a><span>  </span><a name="local-1628087777"><a href="#local-1628087777"><span class="hs-identifier">b'</span></a></a><span>  </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-1451"></a><span>    </span><a href="TcIface.html#bindIfaceTyConBinders_AT"><span class="hs-identifier hs-var">bindIfaceTyConBinders_AT</span></a><span>      </span><a href="#local-1628087769"><span class="hs-identifier hs-var">bs</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><span class="hs-glyph">\</span><a name="local-1628087778"><a href="#local-1628087778"><span class="hs-identifier">tvs'</span></a></a><span> </span><a name="local-1628087779"><a href="#local-1628087779"><span class="hs-identifier">bs'</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-1452"></a><span>    </span><a href="#local-1628087770"><span class="hs-identifier hs-var">thing_inside</span></a><span> </span><span class="hs-special">(</span><a href="#local-1628087776"><span class="hs-identifier hs-var">tv'</span></a><span class="hs-glyph">:</span><a href="#local-1628087778"><span class="hs-identifier hs-var">tvs'</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><a href="#local-1628087777"><span class="hs-identifier hs-var">b'</span></a><span class="hs-glyph">:</span><a href="#local-1628087779"><span class="hs-identifier hs-var">bs'</span></a><span class="hs-special">)</span><span>
</span><a name="line-1453"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-1454"></a><span>    </span><a name="local-1628087771"><a href="#local-1628087771"><span class="hs-identifier">bind_tv</span></a></a><span> </span><a name="local-1628087772"><a href="#local-1628087772"><span class="hs-identifier">tv</span></a></a><span> </span><a name="local-1628087773"><a href="#local-1628087773"><span class="hs-identifier">thing</span></a></a><span>
</span><a name="line-1455"></a><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><a name="local-1628087774"><a href="#local-1628087774"><span class="hs-identifier">mb_tv</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="IfaceEnv.html#lookupIfaceTyVar"><span class="hs-identifier hs-var">lookupIfaceTyVar</span></a><span> </span><a href="#local-1628087772"><span class="hs-identifier hs-var">tv</span></a><span>
</span><a name="line-1456"></a><span>           </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="#local-1628087774"><span class="hs-identifier hs-var">mb_tv</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-1457"></a><span>               </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Just"><span class="hs-identifier hs-var">Just</span></a><span> </span><a name="local-1628087775"><a href="#local-1628087775"><span class="hs-identifier">b'</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-1628087773"><span class="hs-identifier hs-var">thing</span></a><span> </span><a href="#local-1628087775"><span class="hs-identifier hs-var">b'</span></a><span>
</span><a name="line-1458"></a><span>               </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcIface.html#bindIfaceTyVar"><span class="hs-identifier hs-var">bindIfaceTyVar</span></a><span> </span><a href="#local-1628087772"><span class="hs-identifier hs-var">tv</span></a><span> </span><a href="#local-1628087773"><span class="hs-identifier hs-var">thing</span></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-1459"></a><span>
</span><a name="line-1460"></a><span class="hs-identifier">bindIfaceTyConBinderX</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><a href="IfaceType.html#IfaceTvBndr"><span class="hs-identifier hs-type">IfaceTvBndr</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><a href="Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><a href="#local-1628087062"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><a href="#local-1628087062"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-1461"></a><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><a href="IfaceType.html#IfaceTyConBinder"><span class="hs-identifier hs-type">IfaceTyConBinder</span></a><span>
</span><a name="line-1462"></a><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><a href="Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TyCoRep.html#TyBinder"><span class="hs-identifier hs-type">TyBinder</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><a href="#local-1628087062"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcRnTypes.html#IfL"><span class="hs-identifier hs-type">IfL</span></a><span> </span><a href="#local-1628087062"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-1463"></a><a name="bindIfaceTyConBinderX"><a href="TcIface.html#bindIfaceTyConBinderX"><span class="hs-identifier">bindIfaceTyConBinderX</span></a></a><span> </span><a name="local-1628087780"><a href="#local-1628087780"><span class="hs-identifier">bind_tv</span></a></a><span> </span><span class="hs-special">(</span><a href="IfaceType.html#IfaceAnon"><span class="hs-identifier hs-var">IfaceAnon</span></a><span> </span><a name="local-1628087781"><a href="#local-1628087781"><span class="hs-identifier">name</span></a></a><span> </span><a name="local-1628087782"><a href="#local-1628087782"><span class="hs-identifier">ki</span></a></a><span class="hs-special">)</span><span> </span><a name="local-1628087783"><a href="#local-1628087783"><span class="hs-identifier">thing_inside</span></a></a><span>
</span><a name="line-1464"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="#local-1628087780"><span class="hs-identifier hs-var">bind_tv</span></a><span> </span><span class="hs-special">(</span><a href="#local-1628087781"><span class="hs-identifier hs-var">name</span></a><span class="hs-special">,</span><span> </span><a href="#local-1628087782"><span class="hs-identifier hs-var">ki</span></a><span class="hs-special">)</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><span class="hs-glyph">\</span><span> </span><a name="local-1628087784"><a href="#local-1628087784"><span class="hs-identifier">tv'</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-1465"></a><span>    </span><a href="#local-1628087783"><span class="hs-identifier hs-var">thing_inside</span></a><span> </span><a href="#local-1628087784"><span class="hs-identifier hs-var">tv'</span></a><span> </span><span class="hs-special">(</span><a href="TyCoRep.html#Anon"><span class="hs-identifier hs-var">Anon</span></a><span> </span><span class="hs-special">(</span><a href="Var.html#tyVarKind"><span class="hs-identifier hs-var">tyVarKind</span></a><span> </span><a href="#local-1628087784"><span class="hs-identifier hs-var">tv'</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-1466"></a><span class="hs-identifier">bindIfaceTyConBinderX</span><span> </span><a name="local-1628087785"><a href="#local-1628087785"><span class="hs-identifier">bind_tv</span></a></a><span> </span><span class="hs-special">(</span><a href="IfaceType.html#IfaceNamed"><span class="hs-identifier hs-var">IfaceNamed</span></a><span> </span><span class="hs-special">(</span><a href="IfaceType.html#IfaceTv"><span class="hs-identifier hs-var">IfaceTv</span></a><span> </span><a name="local-1628087786"><a href="#local-1628087786"><span class="hs-identifier">tv</span></a></a><span> </span><a name="local-1628087787"><a href="#local-1628087787"><span class="hs-identifier">vis</span></a></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><a name="local-1628087788"><a href="#local-1628087788"><span class="hs-identifier">thing_inside</span></a></a><span>
</span><a name="line-1467"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="#local-1628087785"><span class="hs-identifier hs-var">bind_tv</span></a><span> </span><a href="#local-1628087786"><span class="hs-identifier hs-var">tv</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><span class="hs-glyph">\</span><a name="local-1628087789"><a href="#local-1628087789"><span class="hs-identifier">tv'</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-1468"></a><span>    </span><a href="#local-1628087788"><span class="hs-identifier hs-var">thing_inside</span></a><span> </span><a href="#local-1628087789"><span class="hs-identifier hs-var">tv'</span></a><span> </span><span class="hs-special">(</span><a href="TyCoRep.html#Named"><span class="hs-identifier hs-var">Named</span></a><span> </span><a href="#local-1628087789"><span class="hs-identifier hs-var">tv'</span></a><span> </span><a href="#local-1628087787"><span class="hs-identifier hs-var">vis</span></a><span class="hs-special">)</span><span>
</span><a name="line-1469"></a></pre></body></html>